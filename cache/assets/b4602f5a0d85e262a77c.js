"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[93198],{594838:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.onLearnMore,r=e.selectedBackgroundOption,b=e.onSelectBackgroundOption,I=e.currentDeviceId,N=e.smallerBackgroundOptions,S=(0,o.useStateFromStores)([l.default],(function(){return l.default.getCurrentUser()})),B=(x=a.useState(null),z=2,function(e){if(Array.isArray(e))return e}(x)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){l=!0;a=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw a}}return o}}(x,z)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(x,z)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=B[0],D=B[1],U=(0,O.default)(),T=d.default.isPremium(S,_.PremiumTypes.TIER_2),V=(0,o.useStateFromStoresObject)([p.default],(function(){return T?p.default.videoFilterAssets:{}})),L=a.useMemo((function(){return Object.values(V).filter((function(e){return e.type===y.VideoFilterType.BACKGROUND}))}),[V]),j=(0,u.useAnalyticsContext)();var x,z;a.useEffect((function(){U?(0,m.applyBackgroundOptionPreview)(r,I,{track:!1}).catch((function(){return b(null)})):null!=r&&b(null)}),[I]);var W=function(){var e=P(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===r&&(r=!1);e.prev=1;e.next=4;return(0,f.uploadVideoFilterAsset)(t,y.VideoFilterType.BACKGROUND);case 4:a=e.sent;H(a);(0,v.trackBackgroundOptionAdded)(a,n.type===E.FileTypes.MP4,r);D(null);e.next=13;break;case 10:e.prev=10;e.t0=e.catch(1);D(h.default.Messages.VIDEO_BACKGROUND_ERROR_UPLOAD);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),H=function(e){b(e);(0,m.applyBackgroundOptionPreview)(e,I,{location:j.location}).then((function(){return D(null)})).catch((function(){D(h.default.Messages.VIDEO_BACKGROUND_ERROR_APPLY);(0,m.applyBackgroundOptionPreview)(null,I,{location:j.location})}))};if(!U)return null;return a.createElement(a.Fragment,null,k(s.default,{className:M.default.spacingTop24,size:s.default.Sizes.SIZE_12,muted:!0,uppercase:!0},void 0,h.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND),null!=w?k(i.default,{className:M.default.videoBackgroundError},void 0,w):null,k(g.default,{canUseCustomBackgrounds:T,customBackgroundOptions:L,selectedOption:r,onSelectOption:H,onUpsellClick:function(){(0,c.openModalLazy)(P(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([n.e(40532),n.e(35666),n.e(54587),n.e(32660),n.e(24704),n.e(96906),n.e(62764),n.e(23046),n.e(86683),n.e(38583),n.e(50938),n.e(4445)]).then(n.bind(n,338509));case 2:r=e.sent;o=r.default;return e.abrupt("return",(function(e){return a.createElement(o,C({},e,{onLearnMore:t,analyticsSource:C({},j.location,{object:_.AnalyticsObjects.BUTTON_CTA})}))}));case 5:case"end":return e.stop()}}),e)}))))},onUploadNewBackground:function(e,t){if(t.type===E.FileTypes.MP4)return W(e,t);(0,c.openModalLazy)(P(regeneratorRuntime.mark((function r(){var o,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return Promise.all([n.e(40532),n.e(35666),n.e(54587),n.e(32660),n.e(24704),n.e(96906),n.e(70322),n.e(62764),n.e(23046),n.e(86683),n.e(38583),n.e(50938),n.e(32882),n.e(75639),n.e(35166)]).then(n.bind(n,810170));case 2:o=r.sent;u=o.default;return r.abrupt("return",(function(n){return a.createElement(u,C({onCrop:W,imgURI:e,file:t,uploadType:A.UploadTypes.VIDEO_BACKGROUND},n))}));case 5:case"end":return r.stop()}}),r)}))))},onAddBackgroundImage:W,smallerOptions:N}))};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=n(536211),u=n(556470),l=b(n(728429)),i=b(n(682473)),c=n(194322),s=b(n(971639)),d=b(n(838583)),f=n(144594),p=b(n(96005)),v=n(939617),m=n(700192),O=b(n(712594)),g=b(n(881963)),y=n(280696),_=n(770348),A=n(173708),E=n(683749),h=b(n(247001)),M=b(n(816725));function b(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function k(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var l=new Array(u),i=0;i<u;i++)l[i]=arguments[i+3];t.children=l}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function C(){C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return C.apply(this,arguments)}function N(e,t,n,r,a,o,u){try{var l=e[o](u),i=l.value}catch(e){n(e);return}l.done?t(i):Promise.resolve(i).then(r,a)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){N(o,r,a,u,l,"next",e)}function l(e){N(o,r,a,u,l,"throw",e)}u(void 0)}))}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},881963:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=te;var r,a=x(n(667294)),o=L(n(294184)),u=n(536211),l=n(378158),i=n(556470),c=x(n(278352)),s=L(n(652566)),d=L(n(32735)),f=L(n(16941)),p=x(n(730977)),v=L(n(887727)),m=L(n(908306)),O=L(n(41024)),g=L(n(110583)),y=L(n(118138)),_=n(194322),A=n(499458),E=n(598671),h=L(n(776360)),M=L(n(865725)),b=L(n(308920)),I=n(692711),k=L(n(71636)),C=L(n(256773)),N=n(939617),P=L(n(211500)),R=n(280696),S=n(770348),B=n(439142),w=n(173708),D=n(265517),U=L(n(247001)),T=L(n(750812)),V=["option","source","selected","onSelectOption","isAnimatedImage","isVideo","hotspotLocation"];function L(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}function z(){z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return z.apply(this,arguments)}function W(e,t,n,r,a,o,u){try{var l=e[o](u),i=l.value}catch(e){n(e);return}l.done?t(i):Promise.resolve(i).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){W(o,r,a,u,l,"next",e)}function l(e){W(o,r,a,u,l,"throw",e)}u(void 0)}))}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){l=!0;a=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var l=new Array(u),i=0;i<u;i++)l[i]=arguments[i+3];t.children=l}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function $(e){var t,n=e.icon,r=e.iconClassName,a=e.onClick,u=e.text,l=e.children,i=e.className,c=e.selected,s=void 0!==c&&c,d=e.disabled,p=void 0!==d&&d,v=e.onMouseLeave,m=e.onBlur;return K(f.default,{className:(0,o.default)(i,T.default.backgroundOption,(t={},t[T.default.backgroundOptionSelected]=s,t[T.default.backgroundOptionDisabled]=p,t)),onMouseLeave:v,onBlur:m,onClick:p?void 0:a},void 0,s?K("div",{className:T.default.backgroundOptionRing}):null,K("div",{className:T.default.backgroundOptionInner},void 0,l,K("div",{className:T.default.backgroundOptionContent},void 0,K(n,{className:(0,o.default)(T.default.backgroundIconOptionIcon,r)}),K(h.default,{className:T.default.backgroundOptionText,color:h.default.Colors.CUSTOM},void 0,u))))}$.displayName="VideoBackgroundIconOption";function Y(e){var t=e.option,n=e.source,r=e.isAnimated,o=G(a.useState(!1),2),u=o[0],l=o[1];a.useEffect((function(){(new Image).src=n}),[n]);if(!r||null==t)return K("div",{className:T.default.backgroundImageOption,style:{backgroundImage:"url("+n+")"}});var i=(0,I.getVideoFilterAssetURL)({userId:t.user_id,assetId:t.id,assetHash:t.asset,size:720,canAnimate:!1});return K("img",{onMouseMove:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:T.default.backgroundImageOption,src:u?n:i,alt:t.id})}Y.displayName="VideoBackgroundImage";function Z(e){var t,r=e.option,d=e.source,p=e.selected,v=void 0!==p&&p,m=e.onSelectOption,O=e.isAnimatedImage,g=e.isVideo,_=e.hotspotLocation,A=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,V),h=(0,i.useAnalyticsContext)(),I=(0,u.useStateFromStores)([s.default],(function(){return null!=_&&s.default.hasHotspot(_)})),k=g?K(M.default,{className:T.default.backgroundImageOption,src:d,loop:!0,playOnHover:!0,muted:!0}):K(Y,{isAnimated:O,option:(0,N.isCustomBackgroundOption)(r)?r:void 0,source:d});function C(){if(null!=_&&I){c.hideHotspot(_);b.default.track(S.AnalyticEvents.PREMIUM_UPSELL_VIEWED,{type:D.PremiumUpsellTypes.ANIMATED_VIDEO_BACKGROUND_NEW_PRESET,location:h.location})}}return a.createElement(f.default,z({},A,{className:(0,o.default)(T.default.backgroundOption,(t={},t[T.default.backgroundOptionSelected]=v,t)),onClick:function(){return m(r)},onContextMenu:function(e){return(0,l.openContextMenuLazy)(e,H(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([n.e(40532),n.e(35666),n.e(54587),n.e(32660),n.e(24704),n.e(96906),n.e(46616),n.e(6379),n.e(55809),n.e(61801),n.e(62764),n.e(23046),n.e(86683),n.e(38583),n.e(50938),n.e(48485),n.e(44461),n.e(44784),n.e(35991)]).then(n.bind(n,419401));case 2:t=e.sent;o=t.default;return e.abrupt("return",(function(e){return a.createElement(o,z({},e,{backgroundOption:r,optionIsInUse:v}))}));case 5:case"end":return e.stop()}}),e)}))))}}),v?K("div",{className:T.default.backgroundOptionRing}):null,K("div",{onFocus:C,onMouseEnter:C,className:T.default.backgroundOptionInner},void 0,k),g||O?K(y.default,{className:T.default.playIcon}):null,I&&K(E.TextBadge,{text:U.default.Messages.NEW,className:T.default.newTextBadge}))}Z.displayName="VideoBackgroundImageOption";function X(){return K("div",{className:T.default.customBackgroundTooltip},void 0,K(O.default,{className:T.default.customBackgroundTooltipIcon}),K(h.default,{},void 0,U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP))}X.displayName="CustomBackgroundTooltip";function q(e){var t=e.onClick,n=e.tooltipText,r=e.disabled,a=void 0!==r&&r,o=e.children,l=C.default.useExperiment({}).canUseAnimatedBackgrounds,i=(0,u.useStateFromStores)([s.default],(function(){return s.default.hasHotspot(B.HotspotLocations.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)}));function d(){c.hideHotspot(B.HotspotLocations.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)}var f=l&&i?U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NEW_ANIMATED_TOOLTIP:n;return K(p.TooltipContainer,{text:f,tooltipClassName:T.default.tooltip},void 0,K($,{className:T.default.backgroundOptionBlurred,disabled:a,icon:m.default,iconClassName:T.default.uploadIconOption,onClick:t,onMouseLeave:d,onBlur:d,text:K("div",{className:T.default.backgroundCustomInlineUpsell},void 0,K(O.default,{className:T.default.backgroundCustomInlineUpsellIcon}),K("div",{className:T.default.overflowEllipsis},void 0,U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM))},void 0,K("div",{className:T.default.backgroundCustomInlineUpsellBackground}),K("div",{className:T.default.backgroundCustomInlineUpsellBackgroundDarkener}),o))}q.displayName="VideoBackgroundOptionUpload";function J(e){var t=e.onClick,n=(0,i.useAnalyticsContext)();a.useEffect((function(){b.default.track(S.AnalyticEvents.PREMIUM_UPSELL_VIEWED,{type:D.PremiumUpsellTypes.VIDEO_BACKGROUNDS_INLINE,location:n.location})}),[]);return K(q,{onClick:t,tooltipText:U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPSELL_TOOLTIP})}J.displayName="VideoBackgroundOptionUploadCustomUpsell";function Q(e){var t=e.onUpload,r=e.onAddBackgroundImage,o=e.disabled,u=C.default.useExperiment({}).canUseAnimatedBackgrounds,l=a.useContext(A.ModalContext),i=a.useRef(null),c=o?U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_MAX_REACHED.format({maxCustomBackgrounds:25}):U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_PREMIUM,s=function(e){var t=["jpg","jpeg","png"];e&&t.push("gif","mp4");return[{name:U.default.Messages.IMAGES,extensions:t}]}(u);return u?K(q,{disabled:o,onClick:function(){(0,_.openModalLazy)(H(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([n.e(40532),n.e(35666),n.e(54587),n.e(32660),n.e(24704),n.e(61801),n.e(62764),n.e(23046),n.e(86683),n.e(38583),n.e(75527)]).then(n.bind(n,75527));case 2:t=e.sent;o=t.default;return e.abrupt("return",(function(e){return a.createElement(o,z({maxFileSizeBytes:R.MAX_BACKGROUND_IMAGE_UPLOAD_FILESIZE_BYTES,onComplete:r,uploadType:w.UploadTypes.VIDEO_BACKGROUND,filters:s,modalTitle:U.default.Messages.UPLOAD_BACKGROUND,modalSubTitle:U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_SUBTITLE,uploadOptionTitle:U.default.Messages.SELECT_IMAGE_MODAL_UPLOAD_IMAGE_OR_VIDEO,showUpsellHeader:!0},e))}));case 5:case"end":return e.stop()}}),e)}))),{contextKey:l})},tooltipText:c}):K(q,{disabled:o,onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.activateUploadDialogue()},tooltipText:c},void 0,a.createElement(d.default,{className:T.default.imageInput,disabled:o,multiple:!1,"aria-hidden":!0,onChange:t,filters:s,ref:i}))}Q.displayName="VideoBackgroundOptionUploadCustom";var ee=K(X,{});function te(e){var t=e.canUseCustomBackgrounds,n=e.customBackgroundOptions,r=e.selectedOption,o=e.onSelectOption,u=e.onUpsellClick,l=e.onUploadNewBackground,i=e.onAddBackgroundImage,c=e.smallerOptions;a.useEffect((function(){C.default.trackExposure({})}),[]);var s=C.default.useExperiment({}),d=s.canUseAnimatedBackgrounds,f=s.shouldShowPresets,m=a.useMemo((function(){return n.sort((function(e,t){return null==e.last_used||null==t.last_used?k.default.compare(t.id,e.id):new Date(t.last_used).getTime()-new Date(e.last_used).getTime()}))}),[n]),O=m.length>=25,y=Object.values((0,P.default)()).sort((function(e,t){return R.DEFAULT_VIDEO_BACKGROUND_SORT[e.id]-R.DEFAULT_VIDEO_BACKGROUND_SORT[t.id]}));return K("div",{className:c?T.default.backgroundOptionsSmall:T.default.backgroundOptionsLarge},void 0,K($,{selected:null==r,icon:g.default,iconClassName:T.default.noneOptionIcon,onClick:function(){return o(null)},text:U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NONE}),K($,{className:T.default.backgroundOptionBlurred,selected:r===R.BLUR_BACKGROUND_OPTION,icon:v.default,iconClassName:T.default.blurOptionIcon,onClick:function(){return o(R.BLUR_BACKGROUND_OPTION)},text:U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_BLUR},void 0,K("div",{className:T.default.backgroundOptionBlurBackground})),t?K(Q,{onUpload:l,onAddBackgroundImage:i,disabled:O}):K(J,{onClick:u}),m.map((function(e){return K(p.default,{text:ee,"aria-label":U.default.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP},e.id,(function(t){var n=(0,I.getVideoFilterAssetURL)({userId:e.user_id,assetId:e.id,assetHash:e.asset,size:720,canAnimate:d});return null==n?null:a.createElement(Z,z({},t,{key:e.id,option:e,source:n,selected:(0,N.isCustomBackgroundOption)(r)&&r.id===e.id,onSelectOption:o,isVideo:(0,I.isVideoAssetHash)(e.asset),isAnimatedImage:(0,I.isAnimatedIconHash)(e.asset)}))}))})),y.map((function(e){var t=!0===e.isVideo;return!t||d&&f?K(p.default,{text:e.name,"aria-label":e.name},e.id,(function(n){return a.createElement(Z,z({},n,{key:e.id,option:e.id,source:e.source,selected:r===e.id,onSelectOption:o,isVideo:t,isAnimatedImage:!1,hotspotLocation:e.hotspotLocation}))})):null})))}te.displayName="VideoBackgroundOptions"},393198:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.FilterLoadingIndicator=N;t.default=function(e){var t,n=e.hideDeviceSelector,r=void 0!==n&&n,l=e.hideDeviceHeader,p=void 0!==l&&l,h=e.onLearnMore,M=e.selectedBackgroundOption,I=e.onSelectBackgroundOption,k=e.renderCamera,C=e.hidePreviewToggle,N=void 0!==C&&C,P=e.showSmallBackgroundOptions,R=void 0!==P&&P,S=(0,u.useStateFromStores)([f.default],(function(){return f.default.getVideoDeviceId()})),B=(0,u.useStateFromStoresArray)([f.default],(function(){return Object.values(f.default.getVideoDevices())})),w=c.AlwaysPreviewVideo.useSetting(),D=B.map((function(e){return{value:e.id,label:e.name}}));a.useEffect((function(){(0,s.fetchVideoFilterAssets)()}),[]);return a.createElement(a.Fragment,null,k(S),f.default.isEnabled()?null:b(g.default,{className:E.default.permissionWarning,color:g.default.Colors.INTERACTIVE_NORMAL,size:g.default.Sizes.SIZE_14},void 0,A.default.Messages.FORM_WARNING_VIDEO_PREVIEW.format({onEnableClick:i.default.enable})),N?null:b(v.default,{className:E.default.previewToggle,note:A.default.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW_NOTE,onChange:function(e){c.AlwaysPreviewVideo.updateSetting(e);y.default.track(_.AnalyticEvents.UPDATE_USER_SETTINGS_LOCAL,{always_preview_video:e})},value:w,hideBorder:!0},void 0,b("div",{className:E.default.cameraPreviewTitle},void 0,A.default.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW)),r?null:a.createElement(a.Fragment,null,p?null:b(m.default,{className:E.default.spacingTop24,size:m.default.Sizes.SIZE_12,muted:!0,uppercase:!0},void 0,A.default.Messages.CAMERA_PREVIEW_CAMERA),b(O.SingleSelect,{placeholder:A.default.Messages.CHANGE_CAMERA,className:(0,o.default)(E.default.selector,(t={},t[E.default.selectorNoHeader]=p,t)),options:D,value:S,onChange:function(e){return i.default.setVideoDevice(e)}})),b(d.default,{onLearnMore:h,selectedBackgroundOption:M,onSelectBackgroundOption:I,currentDeviceId:S,smallerBackgroundOptions:R}))};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=h(n(294184)),u=n(536211),l=n(91817),i=h(n(740207)),c=n(894826),s=n(144594),d=h(n(594838)),f=h(n(635014)),p=h(n(80828)),v=h(n(567668)),m=h(n(971639)),O=n(967965),g=h(n(776360)),y=h(n(308920)),_=n(770348),A=h(n(247001)),E=h(n(895598));function h(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function b(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var l=new Array(u),i=0;i<u;i++)l[i]=arguments[i+3];t.children=l}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){l=!0;a=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=b(p.default,{});function N(){var e=I(a.useState(!1),2),t=e[0],n=e[1],r=(0,u.useStateFromStores)([f.default],(function(){return f.default.isMediaFilterSettingLoading()}));a.useEffect((function(){var e=new l.Timeout;if(r)e.start(150,(function(){n(!0)}));else{e.stop();n(!1)}return function(){return e.stop()}}),[r]);return t?b("div",{className:E.default.filterLoadingIndicator},void 0,C):null}
N.displayName="FilterLoadingIndicator"},887727:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=d;var r,a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294)),u=(r=n(468205))&&r.__esModule?r:{default:r},l=["width","height","color","className","foreground"];function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return c.apply(this,arguments)}function s(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var l=new Array(u),i=0;i<u;i++)l[i]=arguments[i+3];t.children=l}if(t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function d(e){var t=e.width,n=void 0===t?24:t,r=e.height,a=void 0===r?24:r,i=e.color,d=void 0===i?"currentColor":i,f=e.className,p=e.foreground,v=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(a[n]=e[n])}return a}(e,l);return o.createElement("svg",c({},(0,u.default)(v),{className:f,width:n,height:a,viewBox:"0 0 32 32"}),s("path",{className:p,d:"M10.5 24c0-3.682 2.318-6 6-6s6 2.318 6 6h-12zM16.5 16a4 4 0 100-8 4 4 0 000 8zM29.166 15.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 15h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 15zM31.167 16.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 11.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 11h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 11zM31.167 12.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 7.334H28.5a.335.335 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.335.335 0 00-.334-.333zM26.5 7h-1.333a.335.335 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333V7.333A.335.335 0 0026.5 7zM31.167 8.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 23.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 23h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 23zM31.167 24.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 19.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 19h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 19zM31.167 20.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 15.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 15H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 15zM1.833 16.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 11.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 11H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 11zM1.833 12.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 7.334h-.667a.335.335 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.335.335 0 00-.333-.333zM7.833 7H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333V7.333A.335.335 0 007.833 7zM1.833 8.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 23.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 23H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 23zM1.833 24.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 19.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 19H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 19zM1.833 20.333a.333.333 0 100-.667.333.333 0 000 .667z",fill:d}))}d.displayName="BackgroundBlur"}}]);