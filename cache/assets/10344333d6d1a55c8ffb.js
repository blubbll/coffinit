"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[37390],{186705:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=(r=n(636602))&&r.__esModule?r:{default:r},i=n(770348);var o={clearDraft:function(e,t){a.default.dirtyDispatch({type:i.ActionTypes.DRAFT_CLEAR,channelId:e,draftType:t})},saveDraft:function(e,t,n){a.default.dirtyDispatch({type:i.ActionTypes.DRAFT_SAVE,channelId:e,draft:t,draftType:n})},changeDraft:function(e,t,n){a.default.dirtyDispatch({type:i.ActionTypes.DRAFT_CHANGE,channelId:e,draft:t,draftType:n})},changeThreadSettings:function(e,t){a.default.dirtyDispatch({type:i.ActionTypes.THREAD_SETTINGS_DRAFT_CHANGE,channelId:e,draft:t})}};t.default=o},55189:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=(r=n(636602))&&r.__esModule?r:{default:r},i=n(770348);var o={startTyping:function(e){a.default.dirtyDispatch({type:i.ActionTypes.TYPING_START_LOCAL,channelId:e})},
stopTyping:function(e){a.default.dirtyDispatch({type:i.ActionTypes.TYPING_STOP_LOCAL,channelId:e})}};t.default=o},413546:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=(r=n(636602))&&r.__esModule?r:{default:r},i=n(770348);var o={popFirstFile:function(e){a.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_POP_FILE,channelId:e})},addFiles:function(e){var t=e.files,n=e.channelId,r=e.showLargeMessageDialog,o=e.draftType;a.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:t,showLargeMessageDialog:r,draftType:o})},addFile:function(e){var t=e.file,n=e.channelId,r=e.showLargeMessageDialog,o=e.draftType;a.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:[t],showLargeMessageDialog:r,draftType:o})},remove:function(e,t,n){a.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILE,channelId:e,id:t,draftType:n})},removeFiles:function(e,t,n){a.default.dispatch({
type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILES,channelId:e,attachmentIds:t,draftType:n})},clearAll:function(e,t){a.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_CLEAR_ALL_FILES,channelId:e,draftType:t})},update:function(e,t,n,r){var o=r.description,u=r.filename,l=r.spoiler;a.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_UPDATE_FILE,channelId:e,id:t,filename:u,description:o,spoiler:l,draftType:n})},setUploads:function(e){var t=e.uploads,n=e.channelId,r=e.draftType;a.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_UPLOADS,channelId:n,uploads:t,draftType:r})},setFile:function(e){var t=e.file,n=e.channelId,r=e.id,o=e.draftType;a.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_FILE,channelId:n,id:r,file:t,draftType:o})}};t.default=o},169549:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=r.useRef(null);null===e.current&&(e.current=new AbortController);r.useEffect((function(){return function(){
var t;null===(t=e.current)||void 0===t||t.abort()}}),[]);return e.current.signal};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e;n&&n.set(e,r);return r}(n(667294));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}},536487:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getApplicationDiscoveryCommands=t.clearGuildDiscoveryCommands=void 0;t.listApplicationGuildCommands=function(e){var t=e.applicationId,n=e.guildId,r=e.limit,a=e.commandType,i=e.nonce,u=e.scope;o.default.dirtyDispatch({
type:p.ActionTypes.APPLICATION_COMMAND_QUERY_LIST_REQUEST,applicationId:t,guildId:n,limit:r,commandType:a,nonce:i,scope:u})};t.performAutocomplete=function(e,t,n){var a;(0,r.default)(null!=t.autocomplete,"Missing autocomplete context");var c=t.autocomplete,f=c.query,m=c.name,y=s.default.fromTimestamp(Date.now());o.default.dirtyDispatch({type:"APPLICATION_COMMAND_AUTOCOMPLETE_REQUEST",nonce:y,channelId:t.channel.id,query:f,name:m});if(null!=d.default.getAutocompleteChoices(t.channel.id,m,f))return;i.default.post({url:p.Endpoints.INTERACTIONS,body:{type:u.InteractionTypes.APPLICATION_COMMAND_AUTOCOMPLETE,application_id:e.applicationId,guild_id:null===(a=t.guild)||void 0===a?void 0:a.id,channel_id:t.channel.id,session_id:l.default.getSessionId(),data:n,nonce:y},timeout:3e3}).catch((function(){o.default.dirtyDispatch({type:"INTERACTION_FAILURE",nonce:y})}))};t.queryDmApplicationCommands=function(e,t){return _.apply(this,arguments)}
;t.querySearchManager=t.queryGuildApplications=t.queryGuildApplicationCommands=void 0;t.setActiveCommand=function(e,t,n){null!=t&&(0,r.default)(t.inputType!==c.ApplicationCommandInputType.PLACEHOLDER,"command should not be placeholder");o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_SET_ACTIVE_COMMAND,channelId:e,command:t,location:n})};t.setPreferredCommandId=function(e,t){o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_SET_PREFERRED_COMMAND,channelId:e,commandId:t})};t.updateApplicationGuildCommandPermissions=function(e,t,n,r){return i.default.put({body:{permissions:r},url:p.Endpoints.APPLICATION_BOT_GUILD_COMMAND_PERMISSIONS(e,t,n)})};t.updateChannelState=function(e,t,n,r){o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_UPDATE_CHANNEL_STATE,channelId:e,command:t,preferredCommandId:n,changedOptionStates:r})};t.updateOptionStates=T;t.updateOptionValidationStates=function(e,t){var n=Object.fromEntries(Object.entries(t).map((function(e){
var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return[r[0],{lastValidationResult:r[1]}]})));T(e,n)}
;var r=f(n(441143)),a=f(n(496486)),i=f(n(118915)),o=f(n(636602)),u=n(81069),l=f(n(423046)),s=f(n(71636)),d=f(n(373265)),c=n(65621),p=n(770348);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){m(i,r,a,o,u,"next",e)}function u(e){m(i,r,a,o,u,"throw",e)}o(void 0)}))}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_UPDATE_OPTIONS,channelId:e,changedOptionStates:t})}function _(){return(_=y(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return i.default.get(p.Endpoints.APPLICATION_BOT_COMMANDS(t));case 2:
(r=e.sent).ok&&o.default.dirtyDispatch({type:p.ActionTypes.DM_APPLICATION_COMMANDS_UPDATE,botUserId:t,applicationCommands:r.body,commandType:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=a.default.debounce((function(e,t,n,r,a){o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST,guildId:e,query:t,limit:n,nonce:s.default.fromTimestamp(Date.now()),includeApplications:a,commandType:r})}),250,{leading:!0,trailing:!0,maxWait:750});t.queryGuildApplicationCommands=I;t.querySearchManager=function(e,t,n,r){var a=s.default.fromTimestamp(Date.now());o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_QUERY_SEARCH_MANAGER,context:e,query:t,limit:n,commandType:r,nonce:a})};t.queryGuildApplications=function(e,t,n,r){o.default.dirtyDispatch({type:p.ActionTypes.APPLICATIONS_REQUEST,guildId:e,nonce:s.default.fromTimestamp(Date.now()),commandLimit:t,commandType:n,commandIds:r})};t.getApplicationDiscoveryCommands=function(e){
var t=e.guildId,n=e.offset,r=e.limit,a=e.isBefore,i=e.applications,u=e.commandType,l=e.jumpDescriptor;o.default.dirtyDispatch({type:p.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST,guildId:t,offset:n,limit:r,isBefore:a,commandType:u,applications:i,jumpDescriptor:l,nonce:s.default.fromTimestamp(Date.now())})};t.clearGuildDiscoveryCommands=function(){o.default.dirtyDispatch({type:p.ActionTypes.CLEAR_GUILD_DISCOVERY_COMMANDS})}},373265:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=s(n(536211)),i=s(n(636602)),o=s(n(211136)),u=s(n(572935)),l=n(770348);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return c.apply(this,arguments)}var p=new Map,f=new Map;function m(e){if(!f.has(e)){
var t;f.set(e,{commandId:null===(t=u.default.getActiveCommand(e))||void 0===t?void 0:t.id,optionName:u.default.getActiveOptionName(e),optionNameToAutocompleteQueries:new Map,optionNameToLastResults:new Map,optionNameToNonce:new Map,optionNameToLastQuery:new Map,lastErrored:!1})}return f.get(e)}function y(){p.clear();f.clear();return!0}var A=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;d(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){var e=this;u.default.addChangeListener((function(){var t,n=o.default.getChannelId();if(null!=n){var r=null===(t=u.default.getActiveCommand(n))||void 0===t?void 0:t.id,a=u.default.getActiveOptionName(n),i=f.get(n);if(null!=i&&(r!==i.commandId||a!==i.optionName)){if(null!=r&&r!==i.commandId){i.optionNameToLastResults.clear();i.optionNameToNonce.clear();i.optionNameToLastQuery.clear();i.optionNameToAutocompleteQueries.clear()}i.lastErrored=!1;i.commandId=r
;i.optionName=a;e.emitChange()}}else y()}))};n.getLastErrored=function(e){return m(e).lastErrored};n.getAutocompleteChoices=function(e,t,n){var r;return null===(r=m(e).optionNameToAutocompleteQueries.get(t))||void 0===r?void 0:r.get(n)};n.getAutocompleteLastChoices=function(e,t){return m(e).optionNameToLastResults.get(t)};return t}(a.default.Store);A.displayName="ApplicationCommandAutocompleteStore";var T=new A(i.default,((r={})[l.ActionTypes.CONNECTION_OPEN]=y,r[l.ActionTypes.LOGOUT]=y,r[l.ActionTypes.CHANNEL_SELECT]=y,r[l.ActionTypes.APPLICATION_COMMAND_AUTOCOMPLETE_REQUEST]=function(e){var t,n=e.nonce,r=e.channelId,a=e.query,i=e.name,o=m(r);if(o.optionNameToLastQuery.get(i)===a)return!1;o.optionNameToLastQuery.set(i,a);var u=null===(t=o.optionNameToAutocompleteQueries.get(i))||void 0===t?void 0:t.get(a);if(null!=u){o.lastErrored=!1;o.optionNameToLastResults.set(i,u);return!0}var l=o.optionNameToNonce.get(i);null!=l&&p.delete(l);p.set(n,{channelId:r,query:a,name:i})
;o.optionNameToNonce.set(i,n);if(o.lastErrored){o.lastErrored=!1;return!0}},r[l.ActionTypes.APPLICATION_COMMAND_AUTOCOMPLETE_RESPONSE]=function(e){var t,n,r=e.choices,a=e.nonce,i=p.get(a);if(null==i)return!1;p.delete(a);var o=null!==(t=null==r?void 0:r.map((function(e){var t;return c({},e,{displayName:null!==(t=e.name_localized)&&void 0!==t?t:e.name})})))&&void 0!==t?t:[],u=m(i.channelId);null==u.optionNameToAutocompleteQueries.get(i.name)&&u.optionNameToAutocompleteQueries.set(i.name,new Map);null===(n=u.optionNameToAutocompleteQueries.get(i.name))||void 0===n||n.set(i.query,o);if(u.optionNameToLastQuery.get(i.name)===i.query){u.lastErrored=!1;u.optionNameToLastResults.set(i.name,o)}return!0},r[l.ActionTypes.INTERACTION_FAILURE]=function(e){var t=e.nonce;if(null==t)return!1;var n=p.get(t);if(null==n)return!1;p.delete(t);m(n.channelId).lastErrored=!0;return!0},r));t.default=T},724833:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.UserExperiment=t.GuildExperiment=void 0
;t.shouldUseBackendV2=function(e){if(null!=e.guild_id)return a.getCurrentConfig({guildId:e.guild_id}).enabled;return i.getCurrentConfig({}).enabled};var r=n(373505),a=(0,r.createExperiment)({kind:"guild",label:"App Commands V2 Guild",id:"2022-02_app_commands_v2_guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});t.GuildExperiment=a;var i=(0,r.createExperiment)({kind:"user",label:"App Commands V2 DM",id:"2022-02_app_commands_v2_dm",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});t.UserExperiment=i},481414:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getBuiltInCommands=t.BUILT_IN_SECTIONS=t.BUILT_IN_COMMANDS_ORIGINAL=t.BUILT_IN_COMMANDS=void 0
;var r,a=S(n(441143)),i=S(n(730381)),o=n(723360),u=S(n(616213)),l=S(n(709403)),s=S(n(415275)),d=S(n(786345)),c=n(81069),p=n(506309),f=S(n(614293)),m=n(192751),y=n(192110),A=n(819235),T=n(894826),_=S(n(644263)),I=S(n(689389)),v=S(n(663303)),C=S(n(728429)),E=n(65621),O=n(484278),M=n(770348),g=n(397769),N=S(n(247001));function S(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,u,"next",e)}function u(e){h(i,r,a,o,u,"throw",e)}o(void 0)}))}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=n(258938).Z,P=function(e,t){var n;return null===(n=e.find((function(e){return e.name===t})))||void 0===n?void 0:n.value},L=((r={})[O.BuiltInSectionId.BUILT_IN]={id:O.BuiltInSectionId.BUILT_IN,
type:E.ApplicationCommandSectionType.BUILT_IN,get name(){return N.default.Messages.COMMAND_SECTION_BUILT_IN_NAME}},r[O.BuiltInSectionId.FRECENCY]={id:O.BuiltInSectionId.FRECENCY,type:E.ApplicationCommandSectionType.BUILT_IN,get name(){return N.default.Messages.FREQUENTLY_USED}},r);t.BUILT_IN_SECTIONS=L;var U,w,B=[].concat(function(e){if(Array.isArray(e))return R(e)}(w=b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(w)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(w)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{id:"-1",name:"shrug",displayName:"shrug",
type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_SHRUG_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_SHRUG_DESCRIPTION},options:[{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION}}],execute:function(e){var t;return{content:((null!==(t=P(e,"message"))&&void 0!==t?t:"")+" ¯\\_(ツ)_/¯").trim()}}},{id:"-2",name:"tableflip",displayName:"tableflip",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_TABLEFLIP_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TABLEFLIP_DESCRIPTION},options:[{
name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_TABLEFLIP_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TABLEFLIP_MESSAGE_DESCRIPTION}}],execute:function(e){var t;return{content:((null!==(t=P(e,"message"))&&void 0!==t?t:"")+" (╯°□°）╯︵ ┻━┻").trim()}}},{id:"-3",name:"unflip",displayName:"unflip",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},options:[{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_TABLEUNFLIP_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TABLEUNFLIP_MESSAGE_DESCRIPTION}}],execute:function(e){var t
;return{content:((null!==(t=P(e,"message"))&&void 0!==t?t:"")+" ┬─┬ ノ( ゜-゜ノ)").trim()}}},{id:"-4",name:"tts",displayName:"tts",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_TTS_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TTS_DESCRIPTION},options:[{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_TTS_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TTS_MESSAGE_DESCRIPTION},required:!0}],predicate:function(e){var t=e.channel;return!t.isPrivate()&&T.EnableTTSCommand.getSetting()&&I.default.can(M.Permissions.SEND_TTS_MESSAGES,t)},execute:function(e){var t;return{content:null!==(t=P(e,"message"))&&void 0!==t?t:"",tts:!0}}},{id:"-5",name:"me",displayName:"me",type:c.ApplicationCommandType.CHAT,
inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_ME_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_ME_DESCRIPTION},options:[{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_ME_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_ME_MESSAGE_DESCRIPTION},required:!0}],execute:function(e){var t;return{content:"_"+(null!==(t=P(e,"message"))&&void 0!==t?t:"")+"_"}}},{id:"-6",name:"spoiler",displayName:"spoiler",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN_TEXT,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_SPOILER_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_SPOILER_DESCRIPTION},options:[{name:"message",displayName:"message",
type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_SPOILER_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_SPOILER_MESSAGE_DESCRIPTION},required:!0}],execute:function(e){var t,n=null!==(t=P(e,"message"))&&void 0!==t?t:"";return{content:(0,M.MARKDOWN_SPOILER_WRAPPER)(n).trim()}}},{id:"-7",name:"nick",displayName:"nick",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_NICK_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_NICK_DESCRIPTION},options:[{name:"new_nick",displayName:"new_nick",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_NICK_NEWNICK_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_NICK_NEWNICK_DESCRIPTION}}],predicate:function(e){var t=e.channel
;return!t.isPrivate()&&(I.default.can(M.Permissions.CHANGE_NICKNAME,t)||I.default.can(M.Permissions.MANAGE_NICKNAMES,t))},execute:function(e,t){var n,r=t.guild,a=t.channel;if(null!=r){var i=null!==(n=P(e,"new_nick"))&&void 0!==n?n:"";u.default.changeNickname(r.id,a.id,M.ME,i||"")}}},{id:"-10",name:"thread",displayName:"thread",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_THREAD_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_THREAD_DESCRIPTION},options:[{name:"name",displayName:"name",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_THREAD_NAME_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_THREAD_NAME_DESCRIPTION},required:!0},{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){
return N.default.Messages.COMMAND_THREAD_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_THREAD_MESSAGE_DESCRIPTION},required:!0}],predicate:function(e){var t=e.channel;return(0,A.computeCanStartPublicThread)(t)},execute:(U=D(regeneratorRuntime.mark((function e(t,n){var r,a,i,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.channel;u=null!==(r=P(t,"name"))&&void 0!==r?r:"";l=null!==(a=P(t,"message"))&&void 0!==a?a:"";e.next=5;return(0,y.createThread)(i,u,o.ChannelTypes.PUBLIC_THREAD,(0,m.getAutoArchiveDuration)(i,null),"Slash Command");case 5:s=e.sent;d.default.sendMessage(s.id,f.default.parse(s,l));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return U.apply(this,arguments)})},{id:"-11",name:"kick",displayName:"kick",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){
return N.default.Messages.COMMAND_KICK_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_KICK_DESCRIPTION},options:[{name:"user",displayName:"user",type:c.ApplicationCommandOptionType.USER,get description(){return N.default.Messages.COMMAND_KICK_USER_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_KICK_USER_DESCRIPTION},required:!0},{name:"reason",displayName:"reason",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_KICK_REASON_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_KICK_REASON_DESCRIPTION},required:!1}],predicate:function(e){var t=e.guild;return I.default.can(M.Permissions.KICK_MEMBERS,t)},execute:function(e,t){var n,r=t.guild,a=t.channel;if(null!=r){var i=null!==(n=P(e,"user"))&&void 0!==n?n:"";if(I.default.canManageUser(M.Permissions.KICK_MEMBERS,i,r)){var o=function(){var t=D(regeneratorRuntime.mark((function t(){var n,o
;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(o=C.default.getUser(i))){t.next=3;break}throw new Error;case 3:t.next=5;return s.default.kickUser(r.id,i,null!==(n=P(e,"reason"))&&void 0!==n?n:"");case 5:d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_KICK_CONFIRMATION.format({user:v.default.hidePersonalInformation?o.username:o.tag}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o().catch((function(){d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_KICK_ERROR)}))}else d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_KICK_UNABLE)}}},{id:"-12",name:"ban",displayName:"ban",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_BAN_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_BAN_DESCRIPTION},options:[{name:"user",
displayName:"user",type:c.ApplicationCommandOptionType.USER,get description(){return N.default.Messages.COMMAND_BAN_USER_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_BAN_USER_DESCRIPTION},required:!0},{name:"delete_messages",displayName:"delete_messages",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_BAN_DELETE_MESSAGES_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_BAN_DELETE_MESSAGES_DESCRIPTION},required:!0,get choices(){return[{name:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_NONE,displayName:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_NONE,value:"0"},{name:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_24HR,displayName:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_24HR,value:"1"},{name:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_7D,displayName:N.default.Messages.DELETE_MESSAGE_HISTORY_OPTION_7D,value:"7"}]}},{name:"reason",displayName:"reason",
type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_BAN_REASON_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_BAN_REASON_DESCRIPTION},required:!1}],predicate:function(e){var t=e.guild;return I.default.can(M.Permissions.BAN_MEMBERS,t)},execute:function(e,t){var n,r=t.guild,a=t.channel;if(null!=r){var i=null!==(n=P(e,"user"))&&void 0!==n?n:"";if(I.default.canManageUser(M.Permissions.BAN_MEMBERS,i,r)){var o=function(){var t=D(regeneratorRuntime.mark((function t(){var n,o,u,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==i){t.next=2;break}throw new Error;case 2:u=null!==(n=P(e,"delete_messages"))&&void 0!==n?n:"";l=null!==(o=P(e,"reason"))&&void 0!==o?o:"";c=C.default.getUser(i);t.next=7;return s.default.banUser(r.id,i,u,l);case 7:d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_BAN_CONFIRMATION.format({user:null!=c?v.default.hidePersonalInformation?c.username:c.tag:i}))
;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o().catch((function(){d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_BAN_ERROR)}))}else d.default.sendBotMessage(a.id,N.default.Messages.COMMAND_BAN_UNABLE)}}},{id:"-13",name:"timeout",displayName:"timeout",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_TIMEOUT_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TIMEOUT_DESCRIPTION},options:[{name:"user",displayName:"user",type:c.ApplicationCommandOptionType.USER,get description(){return N.default.Messages.COMMAND_TIMEOUT_USER_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TIMEOUT_USER_DESCRIPTION},required:!0},{name:"duration",displayName:"duration",type:c.ApplicationCommandOptionType.STRING,get description(){
return N.default.Messages.COMMAND_TIMEOUT_DURATION_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TIMEOUT_DURATION_DESCRIPTION},required:!0,get choices(){return Object.keys(g.DisableCommunicationDuration).filter((function(e){return isNaN(Number(e))})).map((function(e){var t,n=null!==(t=(0,g.makeLabel)(g.DisableCommunicationDuration[e]))&&void 0!==t?t:"";return{name:n,displayName:n,value:""+g.DisableCommunicationDuration[e]}}))}},{name:"reason",displayName:"reason",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_TIMEOUT_REASON_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_TIMEOUT_REASON_DESCRIPTION},required:!1}],predicate:function(e){var t=e.guild;return I.default.can(M.Permissions.MODERATE_MEMBERS,t)},execute:function(e,t){var n=t.guild,r=t.channel;if(null!=n){var a=P(e,"user");if((0,p.canToggleCommunicationDisableOnUser)(n.id,a)){var o=function(){
var t=D(regeneratorRuntime.mark((function t(){var o,u,l,c,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=null!==(o=P(e,"duration"))&&void 0!==o?o:"";c=null!==(u=P(e,"reason"))&&void 0!==u?u:"";if(null!=(p=C.default.getUser(a))){t.next=5;break}throw new Error;case 5:t.next=7;return s.default.setCommunicationDisabledUntil(n.id,a,(0,i.default)().add(l,"s").toISOString(),l,c);case 7:d.default.sendBotMessage(r.id,N.default.Messages.COMMAND_TIMEOUT_CONFIRMATION.format({user:v.default.hidePersonalInformation?p.username:p.tag,duration:l}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o().catch((function(){d.default.sendBotMessage(r.id,N.default.Messages.COMMAND_TIMEOUT_ERROR)}))}else d.default.sendBotMessage(r.id,N.default.Messages.COMMAND_TIMEOUT_UNABLE)}}},{id:"-14",name:"msg",displayName:"msg",type:c.ApplicationCommandType.CHAT,inputType:E.ApplicationCommandInputType.BUILT_IN,
applicationId:O.BuiltInSectionId.BUILT_IN,get description(){return N.default.Messages.COMMAND_MSG_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_MSG_DESCRIPTION},options:[{name:"user",displayName:"user",type:c.ApplicationCommandOptionType.USER,get description(){return N.default.Messages.COMMAND_MSG_USER_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_MSG_USER_DESCRIPTION},required:!0},{name:"message",displayName:"message",type:c.ApplicationCommandOptionType.STRING,get description(){return N.default.Messages.COMMAND_MSG_MESSAGE_DESCRIPTION},get displayDescription(){return N.default.Messages.COMMAND_MSG_MESSAGE_DESCRIPTION},required:!0}],execute:function(e,t){var n,r=t.channel,i=P(e,"user"),o=null!==(n=P(e,"message"))&&void 0!==n?n:"",u=function(){var e=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return l.default.openPrivateChannel(i).then((function(e){
var t=_.default.getChannel(e);(0,a.default)(null!=t,"Newly created PrivateChannel is null");d.default.sendMessage(t.id,f.default.parse(t,o))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u().catch((function(){d.default.sendBotMessage(r.id,N.default.Messages.COMMAND_MSG_ERROR)}))}}]);t.BUILT_IN_COMMANDS=B;var j=B.filter((function(e){return["giphy","tenor","tts","me","tableflip","unflip","shrug","spoiler","nick"].includes(e.name)}));t.BUILT_IN_COMMANDS_ORIGINAL=j;t.getBuiltInCommands=function(e,t,n){var r=t?B:j;return r=r.filter((function(t){return t.type===e&&(!n||t.inputType===E.ApplicationCommandInputType.BUILT_IN_TEXT||t.inputType===E.ApplicationCommandInputType.BUILT_IN_INTEGRATION)}))}},484278:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.TRUE_OPTION_NAME=t.SUB_COMMAND_KEY_SEPARATOR=t.MAX_SUBCOMMAND_LEVEL=t.FALSE_OPTION_NAME=t.DISCOVERY_COMMAND_FRECENCY_GATEWAY_LIMIT=t.DISCOVERY_COMMANDS_QUERY_LIMIT_WEB=t.DISCOVERY_COMMANDS_QUERY_LIMIT_MOBILE=t.DISCOVERY_COMMANDS_QUERY_LIMIT=t.DISCOVERY_COMMANDS_FRECENCY_LIMIT=t.CONTEXT_MENU_PLACEHOLDER_COUNT=t.CONTEXT_MENU_COMMANDS_QUERY_LIMIT=t.BuiltInSectionId=t.BOOLEAN_CHOICES=t.APPLICATION_COMMAND_PERMISSIONS_LIMIT=void 0;t.getValidationErrorText=function(e){if(null!=e.choices)return i.default.Messages.COMMAND_VALIDATION_CHOICE_ERROR;switch(e.type){case a.ApplicationCommandOptionType.BOOLEAN:return i.default.Messages.COMMAND_VALIDATION_BOOLEAN_ERROR;case a.ApplicationCommandOptionType.CHANNEL:return i.default.Messages.COMMAND_VALIDATION_CHANNEL_ERROR;case a.ApplicationCommandOptionType.INTEGER:return i.default.Messages.COMMAND_VALIDATION_INTEGER_ERROR;case a.ApplicationCommandOptionType.NUMBER:return i.default.Messages.COMMAND_VALIDATION_NUMBER_ERROR
;case a.ApplicationCommandOptionType.ROLE:return i.default.Messages.COMMAND_VALIDATION_ROLE_ERROR;case a.ApplicationCommandOptionType.USER:return i.default.Messages.COMMAND_VALIDATION_USER_ERROR;case a.ApplicationCommandOptionType.MENTIONABLE:return i.default.Messages.COMMAND_VALIDATION_MENTIONABLE_ERROR;default:return i.default.Messages.COMMAND_VALIDATION_GENERAL_ERROR}};var r,a=n(81069),i=(r=n(247001))&&r.__esModule?r:{default:r};var o="True";t.TRUE_OPTION_NAME=o;var u="False";t.FALSE_OPTION_NAME=u;var l,s=[{name:o,displayName:o,value:"true"},{name:u,displayName:u,value:"false"}];t.BOOLEAN_CHOICES=s;t.BuiltInSectionId=l;!function(e){e.BUILT_IN="-1";e.FRECENCY="-2"}(l||(t.BuiltInSectionId=l={}));t.DISCOVERY_COMMANDS_QUERY_LIMIT_WEB=10;t.DISCOVERY_COMMANDS_QUERY_LIMIT_MOBILE=5;t.DISCOVERY_COMMANDS_QUERY_LIMIT=10;t.DISCOVERY_COMMANDS_FRECENCY_LIMIT=5;t.DISCOVERY_COMMAND_FRECENCY_GATEWAY_LIMIT=25;t.SUB_COMMAND_KEY_SEPARATOR="\0";t.APPLICATION_COMMAND_PERMISSIONS_LIMIT=100
;t.MAX_SUBCOMMAND_LEVEL=3;t.CONTEXT_MENU_COMMANDS_QUERY_LIMIT=10;t.CONTEXT_MENU_PLACEHOLDER_COUNT=1},117883:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a,i,o,u=m(n(536211)),l=m(n(636602)),s=m(n(644263)),d=m(n(211136)),c=m(n(728429)),p=n(153823),f=n(770348);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}function A(e){var t=s.default.getChannel(e),n=null!=t&&t.type===f.ChannelTypes.DM?t.getRecipientId():null,r=c.default.getUser(n);null!=r&&r.bot||(n=null);if(a===n)return!1;a=n;i=null;o=null}var T=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(s.default)};n.getCommands=function(e,t){return a===e&&t===o?i:null};return t}(u.default.Store);T.displayName="ApplicationCommandDmStore"
;var _=new T(l.default,((r={})[f.ActionTypes.LOGOUT]=function(){a=null;i=null;o=null},r[f.ActionTypes.CONNECTION_OPEN]=function(){var e=d.default.getChannelId();null!=e&&A(e)},r[f.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.channelId;null!=t&&A(t)},r[f.ActionTypes.DM_APPLICATION_COMMANDS_UPDATE]=function(e){var t=e.botUserId,n=e.applicationCommands,r=e.commandType;if(t!==a)return!1;i=(0,p.buildApplicationCommands)(n).filter((function(e){return e.type===r}));o=r},r));t.default=_},166806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useTopCommands=function(e){r.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,a.useStateFromStores)([o.default],(function(){return o.default.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){return(0,o.getFilteredTopCommands)(t,e)}),[t,e])};t.useTopRealCommands=function(e){r.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,
a.useStateFromStores)([o.default],(function(){return o.default.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){var n=(0,o.getFilteredTopCommands)(t,e);return(0,o.getTopRealCommands)(n)}),[t,e])};var r=l(n(667294)),a=n(536211),i=n(828593),o=l(n(290760));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}},290760:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;t.getFilteredTopCommands=function(e,t){return e.filter((function(e){
return!e.includes(":")||null!=t.guild&&t.guild.id===e.split(":")[1]})).map((function(e){return e.split(":")[0]}))};t.getTopRealCommands=function(e){for(var t,n=new Set,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(t=r()).done;){var a=t.value.split(d.SUB_COMMAND_KEY_SEPARATOR)[0];Number(a)>0&&n.add(a);if(n.size>=d.DISCOVERY_COMMAND_FRECENCY_GATEWAY_LIMIT)break}return i=n,function(e){if(Array.isArray(e))return T(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||A(i)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var i};var r,a=f(n(496486)),i=f(n(536211)),o=f(n(636602)),u=n(81069),l=f(n(71319)),s=f(n(960441)),d=n(484278),c=n(770348),p=n(840433);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return m(e,t)}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return y.apply(this,arguments)}function A(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _={pendingUsages:[]},I=new l.default({computeBonus:function(){return 1},computeWeight:function(e){return e<=3?100:e<=15?70:e<=30?50:e<=45?30:e<=80?10:0},lookupKey:function(e){return e},afterCompute:function(){},numFrequentlyItems:500});function v(e,t){return Number(t.id)<0?t.id:null!=e.guild&&null!=t.guildId?t.id+":"+e.guild.id:t.id}function C(){var e,t,n=null!==(e=null===(t=s.default.frecencyWithoutFetchingLatest.applicationCommandFrecency)||void 0===t?void 0:t.applicationCommands)&&void 0!==e?e:{};I.overwriteHistory(a.default.mapValues(n,(function(e){return y({},e,{recentUses:e.recentUses.map(Number)})})),_.pendingUsages)}var E=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;m(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(e){null!=e&&(_=e);this.syncWith([s.default],C)};n.getState=function(){return _}
;n.hasPendingUsage=function(){return _.pendingUsages.length>0};n.getCommandFrecencyWithoutLoadingLatest=function(){return I};n.getScoreWithoutLoadingLatest=function(e,t){var n;return null!==(n=I.getScore(v(e,t)))&&void 0!==n?n:0};n.getTopCommandsWithoutLoadingLatest=function(){return I.frequently};return t}(i.default.PersistedStore);E.displayName="ApplicationCommandFrecencyStore";E.persistKey="ApplicationCommandFrecencyV2";var O=new E(o.default,((r={})[c.ActionTypes.APPLICATION_COMMAND_USED]=function(e){var t=e.command,n=e.context;if(t.type!==u.ApplicationCommandType.CHAT)return!1;var r=v(n,t);_.pendingUsages.push({key:r,timestamp:Date.now()});I.track(r);I.compute()},r[c.ActionTypes.USER_SETTINGS_PROTO_UPDATE]=function(e){var t=e.settings.type,n=e.wasSaved;if(t!==p.UserSettingsTypes.FRECENCY_AND_FAVORITES_SETTINGS||!n)return!1;_.pendingUsages=[]},r));t.default=O},632184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var r,a,i,o,u,l,s=m(n(536211)),d=m(n(636602)),c=m(n(473517)),p=m(n(892083)),f=n(770348);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}function A(){i=null;a=null;u=null;l=null}function T(e){var t=e.guildId;if(o!==t)return!1;_()}function _(){var e;i=null===(e=i)||void 0===e?void 0:e.markStale()}var I=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(c.default)};n.getGuildCommands=function(e,t){var n,r;return(null===(n=i)||void 0===n?void 0:n.guildId)===e&&(null===(r=i)||void 0===r?void 0:r.commandType)===t?i:null};n.getFilteredApplicationId=function(e){var t;return(null===(t=i)||void 0===t?void 0:t.guildId)===e?l:null};return t}(s.default.Store);I.displayName="ApplicationCommandDiscoveryStore"
;var v=new I(d.default,((r={})[f.ActionTypes.LOGOUT]=function(){o=null;l=null;A()},r[f.ActionTypes.CLEAR_GUILD_DISCOVERY_COMMANDS]=A,r[f.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.guildId;if(o===t)return!1;o=t;i=null;a=null;u=null;l=null},r[f.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE]=function(e){var t=e.nonce,n=e.applications,r=e.applicationCommands;if(t===a&&null!=u){var o;i=null===(o=i)||void 0===o?void 0:o.loadComplete({commands:r,prepend:u.isBefore,offset:u.offset,commandType:u.commandType,jumpDescriptor:u.jumpDescriptor,applications:n});u=null}},r[f.ActionTypes.INTEGRATION_DELETE]=function(e){var t=e.guildId,n=e.applicationId;if(o!==t)return!1;null!=n&&_()},r[f.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST]=function(e){var t,n=e.guildId,r=e.offset,o=e.isBefore,s=e.jumpDescriptor,d=e.nonce,c=e.commandType;c!==(null===(t=i)||void 0===t?void 0:t.commandType)&&A();l=null;a=d;u={guildId:n,offset:r,isBefore:o,jumpDescriptor:s,commandType:c}
;null!=i&&i.guildId===n||(i=new p.default(n));i=i.loadStart()},r[f.ActionTypes.APPLICATION_COMMAND_QUERY_LIST_REQUEST]=function(e){var t=e.guildId,n=e.applicationId,r=e.commandType,o=e.nonce;if("discovery"===e.scope){a=o;u={guildId:t,offset:0,isBefore:!1,commandType:r,jumpDescriptor:{sectionId:n}};l=n;null!=i&&i.guildId===t||(i=new p.default(t));i=i.loadStart()}},r[f.ActionTypes.APPLICATIONS_REQUEST]=function(e){var t,n=e.nonce,r=e.guildId,o=e.commandType;o!==(null===(t=i)||void 0===t?void 0:t.commandType)&&A();l=null;a=n;u={guildId:r,offset:0,isBefore:!1,commandType:o};(null==i||i.guildId!==r||i.isStale)&&(i=new p.default(r))},r[f.ActionTypes.APPLICATION_COMMAND_CREATE]=T,r[f.ActionTypes.APPLICATION_COMMAND_DELETE]=T,r[f.ActionTypes.APPLICATION_COMMAND_UPDATE]=T,r));t.default=v},400704:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.NO_COMMANDS=void 0;var r,a=l(n(536211)),i=l(n(636602)),o=n(153823),u=n(770348);function l(e){return e&&e.__esModule?e:{default:e}}
function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}var d,c,p,f,m,y=Object.freeze([]);t.NO_COMMANDS=y;var A,T=[];var _=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getResultCommands=function(e){return e===m?T:y};n.hasResults=function(e,t){if(t!==m)return!1;e=e.trimEnd().split(" ")[0].toLocaleLowerCase();return!(null==f||0!==T.length||!e.startsWith(f))||f===e};return t}(a.default.Store);_.displayName="ApplicationCommandGuildQueryStore";var I=new _(i.default,((r={})[u.ActionTypes.LOGOUT]=function(){A=void 0;T=[];d=void 0;c=void 0;f=void 0;p=void 0;m=void 0},r[u.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.guildId;if(A===t)return!1;A=t;T=[];d=void 0;c=void 0;f=void 0;p=void 0;m=void 0},r[u.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE]=function(e){var t,n=e.applicationCommands,r=e.applications;if(e.nonce!==d)return!1
;var a=null!=r?(0,o.applicationPermissionsList)(r):void 0;T=(0,o.buildApplicationCommands)(n,a);f=null===(t=c)||void 0===t?void 0:t.toLocaleLowerCase();m=p},r[u.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST]=function(e){var t=e.nonce,n=e.query,r=e.commandType;d=t;c=n;p=r},r));t.default=I},473517:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=f(n(536211)),i=f(n(636602)),o=n(81069),u=f(n(759027)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(536487)),s=n(65621),d=n(484278),c=n(770348);function p(e){if("function"!=typeof WeakMap)return null
;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return m(e,t)}function y(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
var _=null,I=null,v=null,C={},E=[];function O(){_=null;I=null;v=null;C={}}function M(e,t,n,r){var a,i=C[e];if(null==i)return!1;var o=i.find((function(e){return e.id===t}));if(null==o||void 0===o.commandCountByType)return!1;var u=null!==(a=o.commandCountByType[r])&&void 0!==a?a:0;o.commandCountByType[r]=u+n;C[e]=y(i)}var g=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;m(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getRemoteGuildApplications=function(e){return null==e?null:C[e]};n.getGuildSections=function(e){if(null==e)return E;var t=C[e];return null==t?E:t};n.getGuildSection=function(e,t){if(null==e)return null;var n=C[e];if(null!=n){var r;return null!==(r=n.find((function(e){return e.id===t})))&&void 0!==r?r:null}return null};n.getTotalGuildCommands=function(e,t){for(var n,r=0,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n)
;if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.getGuildSections(e));!(n=a()).done;){var i,o;r+=null!==(i=null===(o=n.value.commandCountByType)||void 0===o?void 0:o[t])&&void 0!==i?i:0}return r};return t}(a.default.Store);g.displayName="ApplicationGuildCommandSectionStore";var N=new g(i.default,((r={})[c.ActionTypes.CONNECTION_OPEN]=O,r[c.ActionTypes.LOGOUT]=O,r[c.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE]=function(e){var t,n=e.applications;if(e.nonce!==_||null==I||null==n||null==v)return!1;var r={};null===(t=C[I])||void 0===t||t.forEach((function(e){r[e.id]=e}));C[I]=n.sort((function(e,t){var n=e.name,r=t.name;return n===r?0:n<r?-1:1})).map((function(e){
var t,n,a=null!==(t=null===(n=r[e.id])||void 0===n?void 0:n.commandCountByType)&&void 0!==t?t:{};a[v]=e.command_count;return{type:s.ApplicationCommandSectionType.GUILD,id:e.id,name:e.name,icon:e.icon,bot:null!=e.bot?new u.default(e.bot):void 0,applicationCommandPermissions:e.application_command_permissions,commandCountByType:a}}))},r[c.ActionTypes.APPLICATIONS_REQUEST]=function(e){var t=e.nonce,n=e.guildId,r=e.commandType;_=t;I=n;v=r},r[c.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST]=function(e){var t=e.nonce,n=e.guildId,r=e.commandType;if(e.includeApplications){_=t;I=n;v=r}},r[c.ActionTypes.INTEGRATION_CREATE]=function(e){var t=e.guildId;if(null==e.integration.application)return!1;I===t&&null!=v&&l.queryGuildApplications(t,d.DISCOVERY_COMMANDS_QUERY_LIMIT,v);return!1},r[c.ActionTypes.INTEGRATION_DELETE]=function(e){var t=e.guildId,n=e.applicationId,r=C[t];if(null==n||null==r)return!1;var a=r.findIndex((function(e){return e.id===n}));if(a<0)return!1;r.splice(a,1);C[t]=y(r)},
r[c.ActionTypes.APPLICATION_COMMAND_CREATE]=function(e){var t;M(e.guildId,e.applicationId,1,null!==(t=e.command.type)&&void 0!==t?t:o.ApplicationCommandType.CHAT)},r[c.ActionTypes.APPLICATION_COMMAND_DELETE]=function(e){var t;M(e.guildId,e.applicationId,-1,null!==(t=e.command.type)&&void 0!==t?t:o.ApplicationCommandType.CHAT)},r));t.default=N},905043:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getCommandSection=E;t.getContextCommands=C;t.useCommandSection=function(e,t){return(0,a.useStateFromStores)([p.default,o.default],(function(){return E({sectionId:t,applicationCommandGuildSectionStore:p.default,userStore:o.default,channel:e})}),[t,e])};t.useContextCommands=function(e,t,n){return(0,a.useStateFromStores)([d.default,c.default,i.default,f.SearchManagerStore],(function(){return C({query:e,channel:t,commandType:n,dmStore:d.default,guildQueryStore:c.default,permissionStore:i.default,searchStore:f.SearchManagerStore})}),[t,n,e])};t.useContextMenuCommandState=function(e){
var t=e.commandType,n=e.commandsLimit,a=e.placeholdersCount,i=e.channel,l=e.guild,s=e.fetchCommandsOnStart,c=void 0===s||s;r.useEffect((function(){var e;if(c)if(null!=(null==l?void 0:l.id)&&(null==l||null===(e=l.applicationCommandCounts)||void 0===e?void 0:e[t])>0)u.queryGuildApplications(null==l?void 0:l.id,n,t);else if((null==i?void 0:i.type)===T.ChannelTypes.DM){var r=o.default.getUser(i.getRecipientId());!0===(null==r?void 0:r.bot)&&null==d.default.getCommands(r.id,t)&&u.queryDmApplicationCommands(r.id,t)}}),[i,t,l,n,c]);var p=(0,A.useApplicationCommandsDiscoveryState)({channel:i,guild:l},a,t),f=p.discoveryCommands,m=p.hasMoreAfter,_=p.guildCommands;return{visible:r.useMemo((function(){return(0,y.canUseContextMenuCommand)(f.length,t,null==l?void 0:l.applicationCommandCounts,i)}),[i,t,null==l?void 0:l.applicationCommandCounts,f.length]),discoveryCommands:f,hasMoreAfter:m,guildCommands:_}}
;var r=v(n(667294)),a=n(536211),i=_(n(689389)),o=_(n(728429)),u=v(n(536487)),l=n(724833),s=n(481414),d=_(n(117883)),c=v(n(400704)),p=_(n(473517)),f=n(375543),m=n(65621),y=n(153823),A=n(807149),T=n(770348);function _(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}function C(e){var t=e.query,n=e.channel,r=e.commandType,a=e.dmStore,i=e.guildQueryStore,o=e.permissionStore,u=e.searchStore;if(null!=t&&(0,l.shouldUseBackendV2)(n)){var s
;return null!==(s=u.getQueryCommands(n.id,r,t))&&void 0!==s?s:c.NO_COMMANDS}if(n.type===T.ChannelTypes.DM){var d,p=n.getRecipientId();return null!==(d=a.getCommands(p,r))&&void 0!==d?d:c.NO_COMMANDS}if(null!=n.guild_id){return o.can(T.Permissions.USE_APPLICATION_COMMANDS,n)?i.getResultCommands(r):c.NO_COMMANDS}return c.NO_COMMANDS}function E(e){var t=e.sectionId,n=e.applicationCommandGuildSectionStore,r=e.userStore,a=e.channel,i=e.guildId,o=s.BUILT_IN_SECTIONS[t];if(null!=o)return o;if(null!=i)return n.getGuildSection(i,t);if(null!=(null==a?void 0:a.guild_id))return n.getGuildSection(null==a?void 0:a.guild_id,t);if((null==a?void 0:a.type)===T.ChannelTypes.DM){var u=r.getUser(a.getRecipientId());return null==u?null:{id:t,type:m.ApplicationCommandSectionType.DM,name:u.username,icon:u.avatar}}return null}},375543:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.SearchManagerStore=void 0;t.scoreCommand=z;t.useSearchManager=function(e,t,n,r,i){
var u=void 0===i?{}:i,s=u.canOnlyUseTextCommands,c=u.canUseFrecency,p=(0,o.useStateFromStores)([x],(function(){return x.getChannelState(e.id,t)}),[e.id,t]),f=p.initialized,m=p.topCursor,A=p.scrollDownCursor,T=p.applicationSections,E=p.applicationCommands,O=p.filteredSectionId,N=a.useCallback((function(n){l.default.dirtyDispatch({type:g.ActionTypes.APPLICATION_COMMAND_SEARCH_MANAGER_UPDATE,channelId:e.id,commandType:t,state:n})}),[e.id,t]),S=a.useRef(!1),h=(0,d.default)(),R=a.useCallback((function(n,r,a){void 0===a&&(a=!0);if(!S.current){S.current=!0;B(e.id,D({type:t},n),a?h:void 0).then((function(e){S.current=!1;r(e)}))}}),[e.id,t,h]),b=a.useMemo((function(){return{channel:e,guild:null!=e.guild_id?y.default.getGuild(e.guild_id):null}}),[e]),L=(0,v.useTopRealCommands)(b);a.useEffect((function(){if(!f&&!s){N({initialized:!0});if(k(e)){var t=_.default.fromTimestamp(Date.now());q(t,"http","discovery");var n=e.isDM()?{applicationId:e.getRecipientId()}:{limit:r,includeApplications:null==m,
commandIds:f?void 0:L,cursor:m};R(n,(function(n){K(t);if(null!=n){var r={applicationCommands:G([],n.applicationCommands),topCursor:n.prevCursor,scrollDownCursor:n.nextCursor};if(e.isDM()||null!=n.applications){var a;r.applicationSections=H(e,null!==(a=n.applications)&&void 0!==a?a:[])}N(r)}}),!1)}}}),[e,r,s,f,m,R,L,N]);var U=a.useCallback((function(){if(null!=A){var e=_.default.fromTimestamp(Date.now());S.current||q(e,"http","discovery-scroll");R({limit:r,cursor:A},(function(t){K(e);if(null!=t){var n=!1===t.repaired?G([],t.applicationCommands):G(null!=E?E:[],t.applicationCommands);N({applicationCommands:n,scrollDownCursor:t.nextCursor})}}))}}),[r,R,A,E,N]),w=a.useCallback((function(t){if(!S.current)if(null!=t){N({filteredSectionId:t,scrollDownCursor:null});t in I.BUILT_IN_SECTIONS||e.isDM()||R({applicationId:t},(function(e){null!=e&&N({applicationCommands:G([],e.applicationCommands)})}))}else N({filteredSectionId:null,initialized:e.isDM()})}),[e,R,N]);a.useEffect((function(){
return function(){var n;null!=(null===(n=x.channelStates.get(e.id))||void 0===n?void 0:n[t].filteredSectionId)&&w(null)}}),[]);var Y=a.useMemo((function(){return j(b,t,s)}),[b,t,s]),V=(0,v.useTopCommands)(b),W=a.useMemo((function(){return c?(null!=E?E:[]).concat(Y).filter((function(e){return V.includes(e.id)})).sort((function(e,t){var n=C.default.getScoreWithoutLoadingLatest(b,e);return C.default.getScoreWithoutLoadingLatest(b,t)-n})).slice(0,M.DISCOVERY_COMMANDS_FRECENCY_LIMIT):[]}),[c,Y,b,V,E]),Q=a.useMemo((function(){if(s)return[I.BUILT_IN_SECTIONS[M.BuiltInSectionId.BUILT_IN]];var e=W.length>0?[I.BUILT_IN_SECTIONS[M.BuiltInSectionId.FRECENCY]]:[],t=[I.BUILT_IN_SECTIONS[M.BuiltInSectionId.BUILT_IN]];return[].concat(e,P(null!=T?T:[]),t)}),[s,T,W]),z=!s&&(!f||S.current||null!=A),X=a.useMemo((function(){if(!z)return[];for(var e=[],r=0;r<n;r++)e.push(F(r,t));return e}),[z,n,t]),$=a.useMemo((function(){var e=[],t=[];Q.forEach((function(n){if(null==O||n.id===O){var r
;if((r=n.id===M.BuiltInSectionId.BUILT_IN?z?[]:P(Y):n.id===M.BuiltInSectionId.FRECENCY?P(W):(null!=E?E:[]).filter((function(e){return e.applicationId===n.id}))).length>0||n.id===O){e.push(n);t.push({section:n,data:r})}}}));if(t.length>0&&X.length>0){var n;(n=t[t.length-1].data).push.apply(n,P(X))}return{activeSections:e,commandsByActiveSection:t}}),[Q,W,E,Y,X,z,O]),Z=$.activeSections,J=$.commandsByActiveSection,ee=a.useMemo((function(){return s?Y:[].concat(P(W),P(null!=E?E:[]),P(Y))}),[s,W,E,Y]);return{filterSection:w,scrollDown:U,loading:S,filteredSectionId:O,hasMoreAfter:z,commands:ee,sectionDescriptors:Q,activeSections:Z,commandsByActiveSection:J,placeholders:X}};var r,a=h(n(667294)),i=N(n(23279)),o=h(n(536211)),u=N(n(118915)),l=N(n(636602)),s=n(81069),d=N(n(169549)),c=N(n(177230)),p=N(n(359342)),f=n(828593),m=N(n(759027)),y=N(n(30098)),A=N(n(728429)),T=N(n(308920)),_=N(n(71636)),I=n(481414),v=n(166806),C=N(n(290760)),E=n(65621),O=n(153823),M=n(484278),g=n(770348);function N(e){
return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}function D(){D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return D.apply(this,arguments)}function R(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;b(e,t)}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}
function P(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function B(e,t,n){if(null==n?void 0:n.aborted)return Promise.resolve(null);var r={type:t.type};if("query"in t){r.query=t.query
;r.limit=t.limit;r.include_applications=t.includeApplications}else if("applicationId"in t)r.application_id=t.applicationId;else{r.limit=t.limit;r.cursor=t.cursor;r.command_ids=t.commandIds;r.include_applications=t.includeApplications}var a=function(){var r,a=(r=regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return new Promise((function(e){setTimeout(e,a)}));case 2:return r.abrupt("return",B(e,t,n));case 3:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){w(i,n,a,o,u,"next",e)}function u(e){w(i,n,a,o,u,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}();return u.default.get({url:g.Endpoints.APPLICATION_COMMANDS_SEARCH(e),query:r,signal:n}).then((function(e){var t,n,r;return 202===e.status?a(5e3):{applicationCommands:e.body.application_commands,applications:e.body.applications,
nextCursor:null===(t=e.body.cursor)||void 0===t?void 0:t.next,prevCursor:null===(n=e.body.cursor)||void 0===n?void 0:n.previous,repaired:null===(r=e.body.cursor)||void 0===r?void 0:r.repaired}}),(function(e){return(null==n?void 0:n.aborted)?null:429===e.status?a(1e3*e.body.retry_after):null}))}var j=function(e,t,n){var r=e.channel,a=e.guild;return null!=r?(0,I.getBuiltInCommands)(t,!0,n).filter((function(e){return null==e.predicate||e.predicate({channel:r,guild:a})})):[]};function G(e,t){if(0===t.length)return e;var n=P(e),r=(0,O.buildApplicationCommands)(t).filter((function(e){var t=n.findIndex((function(t){return t.id===e.id}));if(t>=0){n[t]=e;return!1}return!0}));return[].concat(P(n),P(r))}function H(e,t){if(e.isDM()){var n=A.default.getUser(e.getRecipientId());return[{type:E.ApplicationCommandSectionType.DM,id:n.id,name:n.username,icon:n.avatar,bot:n}]}return t.map((function(e){return{type:E.ApplicationCommandSectionType.GUILD,id:e.id,name:e.name,icon:e.icon,
bot:null!=e.bot?new m.default(e.bot):void 0}}))}var F=function(e,t){return{type:t,inputType:E.ApplicationCommandInputType.PLACEHOLDER,id:"placeholder-"+e,name:"",displayName:"",description:"",displayDescription:"",applicationId:""}},x=new(function(e){R(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e.call.apply(e,[this].concat(r))||this).displayName="SearchManagerStore";t.channelStates=new Map;return t}var n=t.prototype;n.getChannelState=function(e,t){if(!x.channelStates.has(e)){var n,r=function(){return{initialized:!1,topCursor:null,scrollDownCursor:null,applicationSections:null,applicationCommands:null,filteredSectionId:null,pendingQueries:new Map,queries:new Map}};x.channelStates.set(e,((n={})[s.ApplicationCommandType.CHAT]=r(),n[s.ApplicationCommandType.MESSAGE]=r(),n[s.ApplicationCommandType.USER]=r(),n))}return x.channelStates.get(e)[t]};n.getApplicationSections=function(e,t){return this.getChannelState(e,t).applicationSections}
;n.getQueryCommands=function(e,t,n){var r,a,i=this.getChannelState(e,t),o=i.queries,u=i.pendingQueries;return null!==(r=o.get(n))&&void 0!==r?r:null===(a=u.get(n))||void 0===a?void 0:a.commands};return t}(o.default.Store))(l.default,((r={})[g.ActionTypes.LOGOUT]=function(){x.channelStates.clear()},r[g.ActionTypes.CHANNEL_SELECT]=function(e){if(null==e.channelId)return!1;x.channelStates.clear()},r[g.ActionTypes.APPLICATION_COMMAND_SEARCH_MANAGER_UPDATE]=function(e){var t=e.channelId,n=e.commandType,r=e.state,a=x.channelStates.get(t);if(null!=a){var i=a[n],o=D({},i,{},r);a[n]=o;null==i.applicationCommands&&null!=o.applicationCommands&&o.pendingQueries.forEach((function(e,t){X({context:e.context,commandType:e.commandType,query:t,limit:e.limit,canOnlyUseTextCommands:!1})}))}},r[g.ActionTypes.CREATE_PENDING_REPLY]=function(e){var t=e.channel;if(!x.channelStates.delete(t.id))return!1},r[g.ActionTypes.DELETE_PENDING_REPLY]=function(e){var t=e.channelId;if(!x.channelStates.delete(t))return!1},
r[g.ActionTypes.CHANNEL_UPDATES]=function(e){var t=!1;e.updates.forEach((function(e){x.channelStates.delete(e.channel.id)&&(t=!0)}));return t},r));t.SearchManagerStore=x;var k=function(e){return!e.isMultiUserDM()&&!e.isSystemDM()&&(!e.isDM()||null!=e.rawRecipients.find((function(e){return e.bot})))};var Y,V,W,Q=0,q=function(e,t,n){Q=Date.now();Y=e;V=t;W=n},K=function(e){if(null!=e&&e===Y){var t=Date.now()-Q;T.default.track(g.AnalyticEvents.APPLICATION_COMMAND_LOAD_TIMING,{duration_ms:t,method:V,area:W});Q=0;Y=null;V=null;W=null}};function z(e,t){var n=t.name,r=t.serverLocalizedName;if(n.startsWith(e))return 4;if(null==r?void 0:r.startsWith(e))return 4;if(n.includes(e))return 3;if(null==r?void 0:r.includes(e))return 3;for(var a,i=!1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=L(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{
done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(null!==(u=t.options)&&void 0!==u?u:[]);!(a=o()).done;){var u,l=a.value,s=l.name,d=l.serverLocalizedName;if(s.startsWith(e))return 2;if((n+" "+s).startsWith(e))return 2;if(null!=r&&(r+" "+s).startsWith(e))return 2;if(null!=d){if(d.startsWith(e))return 2;if((n+" "+d).startsWith(e))return 2;if(null!=r&&(r+" "+d).startsWith(e))return 2}(s.includes(e)||(null==d?void 0:d.includes(e)))&&(i=!0)}return i?1:0}function X(e){var t,n=e.context,r=e.commandType,a=e.query,i=e.limit,o=e.canOnlyUseTextCommands,u=e.applicationCommands,l=e.applications,s=x.getChannelState(n.channel.id,r);null!=l&&(s.applicationSections=H(n.channel,l));if(o)t=[];else{var d;t=n.channel.isDM()?null!==(d=s.applicationCommands)&&void 0!==d?d:[]:G([],null!=u?u:[])}
var c=j(n,r,o),p=!o&&k(n.channel)&&(n.channel.isDM()?null==s.applicationCommands:null==u),m=[];if(p)for(var y=a.length-1;y>0;y-=1){var A=a.slice(0,y),T=s.queries.get(A);if(null!=T){T.forEach((function(e){null==t.find((function(t){return t.id===e.id}))&&null==c.find((function(t){return t.id===e.id}))&&m.push(e)}));break}}var _=[];[].concat(P(t),m,P(c)).forEach((function(e){var t=z(a,e);t>0&&_.push(D({},e,{score:t}))}));f.FrecencyUserSettingsActionCreators.loadIfNecessary();_.sort((function(e,t){if(e.score!==t.score)return t.score-e.score;var r=C.default.getScoreWithoutLoadingLatest(n,e);return C.default.getScoreWithoutLoadingLatest(n,t)-r}));if(p)for(var I=_.length;I<i;I+=1)_.push(D({},F(I,r),{score:0}));if(p){s.pendingQueries.set(a,{context:n,commandType:r,limit:i,commands:_.slice(0,i)});s.queries.delete(a)}else{s.pendingQueries.delete(a);s.queries.set(a,_.slice(0,i))}}var $=(0,i.default)((function(e){var t=e.context,n=e.commandType,r=e.query,a=e.limit,i=e.nonce;if(k(t.channel)){
var o=x.getChannelState(t.channel.id,n);if(t.channel.isDM())o.initialized||null!=o.applicationCommands||B(t.channel.id,{type:n,applicationId:t.channel.getRecipientId()}).then((function(e){var r;null!=e&&l.default.dispatch({type:g.ActionTypes.APPLICATION_COMMAND_SEARCH_MANAGER_UPDATE,channelId:t.channel.id,commandType:n,state:{applicationCommands:G([],null!==(r=e.applicationCommands)&&void 0!==r?r:[])}})}));else{q(i,"http","query");B(t.channel.id,{type:n,query:r,limit:a,includeApplications:!o.initialized&&null==o.applicationSections}).then((function(e){K(i);if(null!=e&&x.channelStates.has(t.channel.id)){X({context:t,commandType:n,query:r,limit:a,canOnlyUseTextCommands:!1,applicationCommands:e.applicationCommands,applications:e.applications});x.emitChange()}}))}}}),250,{leading:!0,trailing:!0,maxWait:750});function Z(e){var t,n=e.context,r=e.commandType,a=e.query,i=e.limit,o=e.nonce;if(!(null===(t=x.channelStates.get(n.channel.id))||void 0===t?void 0:t[r].queries.has(a))){
var u=null!=p.default.getPendingReply(n.channel.id);X({context:n,commandType:r,query:a,limit:i,canOnlyUseTextCommands:u});x.emitChange();u||$({context:n,commandType:r,query:a,limit:i,nonce:o})}}function J(e){var t=e.nonce;q(t,"gateway","query")}function ee(e){var t=e.nonce;q(t,"gateway","discovery")}function te(e){var t=e.nonce;q(t,"gateway","discovery-scroll")}function ne(e){var t=e.nonce;K(t)}var re=new(function(e){R(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n._initialize=function(){l.default.subscribe(g.ActionTypes.APPLICATION_COMMAND_QUERY_SEARCH_MANAGER,Z);l.default.subscribe(g.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST,J);l.default.subscribe(g.ActionTypes.APPLICATIONS_REQUEST,ee);l.default.subscribe(g.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST,te);l.default.subscribe(g.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE,ne)};n._terminate=function(){l.default.unsubscribe(g.ActionTypes.APPLICATION_COMMAND_QUERY_SEARCH_MANAGER,Z)
;l.default.unsubscribe(g.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST,J);l.default.unsubscribe(g.ActionTypes.APPLICATIONS_REQUEST,ee);l.default.unsubscribe(g.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST,te);l.default.unsubscribe(g.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE,ne)};return t}(c.default));t.default=re},572935:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=d(n(536211)),i=d(n(636602)),o=n(844784),u=d(n(502546)),l=d(n(211136)),s=n(770348);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()
}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return m.apply(this,arguments)}var y={};function A(){y={};return!0}function T(e){e in y||(y[e]={activeCommand:null,activeOptionName:null,preferredCommandId:null,optionStates:{}});return y[e]}
function _(e){var t,n=e.channelId,r=e.command,a=e.location,i=T(n);if((null==r?void 0:r.id)===(null===(t=i.activeCommand)||void 0===t?void 0:t.id))return!1;i.activeCommand=r;i.activeOptionName=null;i.preferredCommandId=null;var u={};null!=(null==r?void 0:r.options)&&r.options.forEach((function(e){u[e.name]={isActive:!1,hasValue:!1,lastValidationResult:null,optionValue:null}}));i.optionStates=u;if(null!=r){var l,d;(0,o.trackWithMetadata)(s.AnalyticEvents.APPLICATION_COMMAND_SELECTED,{command_id:null!==(l=null===(d=r.rootCommand)||void 0===d?void 0:d.id)&&void 0!==l?l:r.id,application_id:r.applicationId,location:a})}return!0}function I(e){var t,n,r=e.channelId,a=e.commandId,i=T(r);if(a===i.preferredCommandId||null===i.preferredCommandId&&a===(null!==(t=null===(n=i.activeCommand)||void 0===n?void 0:n.id)&&void 0!==t?t:null))return!1;i.activeCommand=null;i.activeOptionName=null;i.preferredCommandId=a;i.optionStates={};return!0}function v(e){
for(var t=e.channelId,n=e.changedOptionStates,r=T(t),a=m({},r.optionStates),i=0,o=Object.entries(n);i<o.length;i++){var u,l,s,d=p(o[i],2),c=d[0],f=d[1];if(c in r.optionStates){if(void 0!==f.hasValue?f.hasValue:a[c].hasValue){var y=a[c];a[c]={hasValue:!0,isActive:void 0!==f.isActive?f.isActive:y.isActive,lastValidationResult:void 0!==f.lastValidationResult?f.lastValidationResult:y.lastValidationResult,optionValue:null!==(u=f.optionValue)&&void 0!==u?u:y.optionValue,location:null!==(l=f.location)&&void 0!==l?l:y.location,length:null!==(s=f.length)&&void 0!==s?s:y.length};if(void 0!==f.isActive)if(f.isActive){if(null!=r.activeOptionName&&r.activeOptionName!==c){a[r.activeOptionName]=m({},a[r.activeOptionName]);a[r.activeOptionName].isActive=!1}r.activeOptionName=c}else c===r.activeOptionName&&(r.activeOptionName=null)}else{a[c]={hasValue:!1,isActive:!1,lastValidationResult:null,optionValue:null,location:void 0,length:void 0};r.activeOptionName===c&&(r.activeOptionName=null)}}}
r.optionStates=a;return!0}var C=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;c(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){u.default.addChangeListener((function(){var e=l.default.getChannelId();if(null==e){y={};return!0}var t=u.default.getCurrentSidebarChannelId(e);if(null!=t&&t in y)return!1;if(e in y){var n;y=((n={})[e]=y[e],n)}else y={}}))};n.getActiveCommand=function(e){return T(e).activeCommand};n.getActiveOptionName=function(e){return T(e).activeOptionName};n.getActiveOption=function(e){var t,n,r,a=T(e);return null!==(t=null===(n=a.activeCommand)||void 0===n||null===(r=n.options)||void 0===r?void 0:r.find((function(e){return e.name===a.activeOptionName})))&&void 0!==t?t:null};n.getPreferredCommandId=function(e){return T(e).preferredCommandId};n.getOptionStates=function(e){return T(e).optionStates};n.getOptionState=function(e,t){return T(e).optionStates[t]}
;n.getOption=function(e,t){var n,r;return null===(n=T(e).activeCommand)||void 0===n||null===(r=n.options)||void 0===r?void 0:r.find((function(e){return e.name===t}))};return t}(a.default.Store);C.displayName="ApplicationCommandStore";var E=new C(i.default,((r={})[s.ActionTypes.CONNECTION_OPEN]=A,r[s.ActionTypes.CHANNEL_SELECT]=A,r[s.ActionTypes.LOGOUT]=A,r[s.ActionTypes.APPLICATION_COMMAND_SET_ACTIVE_COMMAND]=_,r[s.ActionTypes.APPLICATION_COMMAND_SET_PREFERRED_COMMAND]=I,r[s.ActionTypes.APPLICATION_COMMAND_UPDATE_OPTIONS]=v,r[s.ActionTypes.APPLICATION_COMMAND_UPDATE_CHANNEL_STATE]=function(e){var t=e.channelId,n=e.preferredCommandId,r=e.command,a=e.changedOptionStates,i=_({type:"APPLICATION_COMMAND_SET_ACTIVE_COMMAND",channelId:t,command:r}),o=I({type:"APPLICATION_COMMAND_SET_PREFERRED_COMMAND",channelId:t,commandId:n}),u=v({type:"APPLICATION_COMMAND_UPDATE_OPTIONS",channelId:t,changedOptionStates:a});return i||o||u},r));t.default=E},65621:(e,t)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.ApplicationCommandSectionType=t.ApplicationCommandPermissionType=t.ApplicationCommandInputType=void 0;var n,r,a;t.ApplicationCommandSectionType=n;!function(e){e[e.BUILT_IN=0]="BUILT_IN";e[e.GUILD=1]="GUILD";e[e.DM=2]="DM"}(n||(t.ApplicationCommandSectionType=n={}));t.ApplicationCommandInputType=r;!function(e){e[e.BUILT_IN=0]="BUILT_IN";e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT";e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION";e[e.BOT=3]="BOT";e[e.PLACEHOLDER=4]="PLACEHOLDER"}(r||(t.ApplicationCommandInputType=r={}));t.ApplicationCommandPermissionType=a;!function(e){e[e.ROLE=1]="ROLE";e[e.USER=2]="USER";e[e.CHANNEL=3]="CHANNEL"}(a||(t.ApplicationCommandPermissionType=a={}))},153823:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.allChannelsSentinel=Y;t.applicationPermissionsList=function(e){return null==e?void 0:e.reduce((function(e,t){null!=t.applicationCommandPermissions&&e.push({id:t.id,permissions:t.applicationCommandPermissions});return e}),[])}
;t.buildApplicationCommands=function(e,t){return i.default.flatMap(e,(function(e){(0,a.default)(null!=e.id,"Missing command id");return H(e,e,e.application_id,void 0,t)}))};t.buildCommand=j;t.canUseContextMenuCommand=function(e,t,n,r){var a,i=(null==r?void 0:r.type)===o.ChannelTypes.DM;return null!=r&&(i||y.default.can(R.Permissions.USE_APPLICATION_COMMANDS,r))&&(0,c.isTextChannel)(r.type)&&!r.isArchivedThread()&&(i&&e>0||(null!==(a=null==n?void 0:n[t])&&void 0!==a?a:0)>0)};t.getApplicationCommandOptionQueryOptions=function(e){var t=e.type===l.ApplicationCommandOptionType.STRING,n=e.type===l.ApplicationCommandOptionType.CHANNEL,r=e.type===l.ApplicationCommandOptionType.USER||e.type===l.ApplicationCommandOptionType.MENTIONABLE,a=e.type===l.ApplicationCommandOptionType.ROLE||e.type===l.ApplicationCommandOptionType.MENTIONABLE;return{canMentionEveryone:t||a,canMentionHere:t,canMentionChannels:t||n,canMentionUsers:t||r,canMentionRoles:t||a,canMentionAnyGuildUser:r,
canMentionNonMentionableRoles:a}};t.getApplicationCommandSectionName=function(e){return null!=e.bot?e.bot.username:e.name};t.getInteractionAuthor=function(e,t){if(null!=e.guild){var n=M.default.getGuildSection(e.guild.id,t);if(null!=n){var r;if(null!=n.bot)return[n.bot,null];var a={id:n.id,username:n.name,discriminator:"0000",avatar:null,bot:!0},i={id:n.id,name:n.name,icon:null!==(r=n.icon)&&void 0!==r?r:void 0};return[a,i]}}var o=_.default.getUser(t);if(null!=o)return[o,null];return[null,null]};t.hasAccess=k;t.isSnowflake=function(e){return h.ID_REGEX.test(e.trim())};t.queryCommands=function(e){var t=e.context,n=e.contextCommands,r=e.query,a=e.type,i=e.exact,o=e.limit,u=void 0===o?10:o,l=e.useNewApplicationCommands,d=void 0===l||l,c=e.canOnlyUseTextCommands,p=void 0!==c&&c,f=e.selectableOnly,m=void 0!==f&&f,y=[],A=i?new RegExp("^"+v.default.escape(r)+"\\s*$","i"):new RegExp("^"+v.default.escape(r),"i");p||(y=y.concat(F(n,A,t,u)));var T=(0,E.getBuiltInCommands)(a,d,p)
;y=y.concat(F(T,A,t,u));m&&(y=y.filter((function(e){return k(e)})));s.FrecencyUserSettingsActionCreators.loadIfNecessary();y.sort((function(e,n){var r=O.default.getScoreWithoutLoadingLatest(t,e);return O.default.getScoreWithoutLoadingLatest(t,n)-r}));return y.slice(0,u)};var r=b(n(224736)),a=b(n(441143)),i=b(n(496486)),o=n(723360),u=b(n(267258)),l=n(81069),s=n(828593),d=b(n(686305)),c=n(567186),p=b(n(502546)),f=b(n(644263)),m=b(n(876874)),y=b(n(689389)),A=b(n(211136)),T=b(n(790597)),_=b(n(728429)),I=b(n(656016)),v=b(n(827513)),C=n(724833),E=n(481414),O=b(n(290760)),M=b(n(473517)),g=n(65621),N=b(n(682404)),S=n(484278),h=n(770348),D=n(173652),R=n(478036);function b(e){return e&&e.__esModule?e:{default:e}}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(){L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return L.apply(this,arguments)}function U(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,a){var i,o,s,d,c=null!=e.permissions&&e.permissions.length>0?e.permissions:a;if(null!=c&&c.length>0){d={};c.forEach((function(e){d[e.id]=e}))}var p=(null!=r?r:[]).map((function(e){return e.name})),f=(null!=r?r:[]).map((function(e){return e.displayName}));return{version:e.version,guildId:e.guild_id,id:[e.id].concat(U(p)).join(S.SUB_COMMAND_KEY_SEPARATOR),name:[e.name].concat(U(p)).join(" "),serverLocalizedName:t.name_localized,applicationId:n,type:null!==(i=e.type)&&void 0!==i?i:l.ApplicationCommandType.CHAT,inputType:g.ApplicationCommandInputType.BOT,description:t.description,options:G(t.options),rootCommand:e,subCommandPath:r,
defaultMemberPermissions:null==e.default_member_permissions?void 0:u.default.deserialize(e.default_member_permissions),defaultPermission:e.default_permission,dmPermission:e.dm_permission,permissions:d,listed:!1!==e.listed,displayName:[null!==(o=e.name_localized)&&void 0!==o?o:e.name].concat(U(f)).join(" "),displayDescription:null!==(s=t.description_localized)&&void 0!==s?s:t.description}}function G(e){return null==e?void 0:e.map((function(e){var t,n,r,a=L({},e,{choices:(r=e.choices,null==r?void 0:r.map((function(e){var t;return L({},e,{displayName:null!==(t=e.name_localized)&&void 0!==t?t:e.name})}))),options:G(e.options),serverLocalizedName:e.name_localized,displayName:null!==(t=e.name_localized)&&void 0!==t?t:e.name,displayDescription:null!==(n=e.description_localized)&&void 0!==n?n:e.description});return e.type===l.ApplicationCommandOptionType.CHANNEL&&null!=e.channel_types?L({},a,{channelTypes:e.channel_types
}):e.type!==l.ApplicationCommandOptionType.NUMBER&&e.type!==l.ApplicationCommandOptionType.INTEGER||null==e.min_value&&null==e.max_value?a:L({},a,{minValue:e.min_value,maxValue:e.max_value})}))}function H(e,t,n,r,a){var i=null==a?void 0:a.find((function(e){return e.id===n}));if(t.hasOwnProperty("id")){if(null==(t=t).options||0===t.options.length)return[j(e,t,n,r,null==i?void 0:i.permissions)]}else if((t=t).type!==l.ApplicationCommandOptionType.SUB_COMMAND&&t.type!==l.ApplicationCommandOptionType.SUB_COMMAND_GROUP&&(null==t.options||0===t.options.length))return[j(e,t,n,r,null==i?void 0:i.permissions)];var o=[];if(null==t.options)return o;for(var u=t.options.filter((function(e){return e.type===l.ApplicationCommandOptionType.SUB_COMMAND_GROUP})),s=0;s<u.length;s++){var d;o.push.apply(o,U(H(e,u[s],n,(null!=r?r:[]).concat([{name:u[s].name,type:l.ApplicationCommandOptionType.SUB_COMMAND_GROUP,displayName:null!==(d=u[s].name_localized)&&void 0!==d?d:u[s].name}]),a)))}
for(var c=t.options.filter((function(e){return e.type===l.ApplicationCommandOptionType.SUB_COMMAND})),p=0;p<c.length;p++){var f;o.push(j(e,c[p],n,(null!=r?r:[]).concat([{name:c[p].name,type:l.ApplicationCommandOptionType.SUB_COMMAND,displayName:null!==(f=c[p].name_localized)&&void 0!==f?f:c[p].name}]),null==i?void 0:i.permissions))}0===u.length&&0===c.length&&o.push(j(e,t,n,r,null==i?void 0:i.permissions));return o}function F(e,t,n,r){var a=[];(0,i.default)(e).forEach((function(e){t.test(e.displayName)&&(null==e.predicate||e.predicate(n))&&a.push(e)}));return a.slice(0,r)}function x(e,t){var n,r=_.default.getCurrentUser();(0,a.default)(null!=r,"hasAccess: user cannot be undefined");var i=m.default.getMember(t,r.id);if(null==i){var o;return null===(o=e.dmPermission)||void 0===o||o}var l=A.default.getChannelId(),s=f.default.getChannel(l),c=p.default.getSidebarState(l),T=null!=c&&"channelId"in c?c.channelId:null,v=f.default.getChannel(T),C=(0,D.isGuildHomeChannel)(l)?T:l;(0,
a.default)(null!=C,"hasAccess: channelId cannot be undefined");var E=(0,D.isGuildHomeChannel)(l)?v:s;(0,a.default)(null!=E,"hasAccess: channel cannot be undefined");if(h.ChannelTypesSets.THREADS.has(E.type)&&null==(E=f.default.getChannel(E.parent_id)))return!1;var O,M,N=d.default.getViewingRoles(t),S=y.default.computePermissions(E,void 0,null==N?void 0:N);if(u.default.has(S,R.Permissions.ADMINISTRATOR))return!0;if(!u.default.has(S,R.Permissions.VIEW_CHANNEL))return!1;if(null!=N)O=Object.values(N).map((function(e){return e.id}));else{O=i.roles;M=i.userId}var b,L=e.defaultMemberPermissions;null!=L&&(b=!u.default.equals(L,I.default.NONE)&&u.default.has(S,L));return function(e){var t=e.guildId,n=e.channelId,r=e.configuredPermissions,a=e.roleIds,i=e.userId,o=e.memberHasDefaultPermission,u=t,l=!0,s=r[Y(t)];null!=s&&(l=s.permission);var d=r[n];null!=d&&(l=d.permission);if(!l)return l;if(null!=o){var c=[g.ApplicationCommandPermissionType.ROLE,g.ApplicationCommandPermissionType.USER]
;if(!Object.values(r).some((function(e){return c.includes(e.type)})))return o}var p=r[u];null!=p&&(l=p.permission);for(var f,m=null,y=P(a);!(f=y()).done;){var A=r[f.value];if(null!=A&&(m=A.permission))break}m&&(l=m);if(null!=i){var T=r[i];null!=T&&(l=T.permission)}return l}({guildId:t,channelId:C,configuredPermissions:null!==(n=e.permissions)&&void 0!==n?n:{},roleIds:O,userId:M,memberHasDefaultPermission:b})}function k(e){if(null==e.defaultPermission)return!0;var t=A.default.getChannelId(),n=f.default.getChannel(t);if(null!=n&&(0,C.shouldUseBackendV2)(n))return!0;var r=T.default.getGuildId();if(null==r){var i;return null!==(i=e.dmPermission)&&void 0!==i?i:e.defaultPermission}return N.default.getCurrentConfig({guildId:r}).enable?x(e,r):function(e,t){if(null!=e){var n=_.default.getCurrentUser();(0,a.default)(null!=n,"hasAccess: currentUser cannot be undefined");var r=e[n.id];if(null!=r)return r.permission;var i=T.default.getGuildId(),o=null!=i?m.default.getMember(i,n.id):null
;if(null!=o){var u=null,l=U(o.roles);null!=i&&l.push(i);for(var s,d=P(l);!(s=d()).done;){var c=e[s.value];if(null!=c&&(u=c.permission))break}if(null!==u)return u}}return t}(e.permissions,e.defaultPermission)}function Y(e){return(0,r.default)(e).subtract(1).toString()}},682404:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=(0,n(373505).createExperiment)({kind:"guild",id:"2021-09_command_permissions_v2",label:"Command Permissions V2",defaultConfig:{enable:!1},treatments:[{id:1,label:"Enables command permissions v2.",config:{enable:!0}}]});t.default=r},892083:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=n(153823);function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function e(t){var n=this;this.commandType=null;this.commandsArray=[];this._map={};this._commandIds=new Set;this.topOffset=-1;this.bottomOffset=-1;this.jumpDescriptor=null;this.jumpSequenceId=1;this.loadingMore=!1;this.isStale=!1;this.mutate=function(t){var r=new e(n.guildId);r.commandType=n.commandType;r.commandsArray=n.commandsArray;r._map=n._map;r._commandIds=n._commandIds;r.topOffset=n.topOffset;r.bottomOffset=n.bottomOffset;r.jumpDescriptor=n.jumpDescriptor;r.loadingMore=n.loadingMore
;r.jumpSequenceId=n.jumpSequenceId;r.isStale=n.isStale;t(r);return r};this.loadStart=function(){return n.mutate((function(e){e.loadingMore=!0;e.jumpDescriptor=null}))};this.loadComplete=function(e){var t=e.commands,r=e.prepend,a=e.offset,i=e.commandType,o=e.jumpDescriptor,u=e.applications;return(null!=o?n.reset(t,a,u):n.merge(t,r,u)).mutate((function(e){e.jumpDescriptor=o;e.loadingMore=!1;e.commandType=i;null!=o&&(e.jumpSequenceId=n.jumpSequenceId+1)}))};this.reset=function(e,t,a){var i=e.filter((function(e){return null!=e.id&&!1!==e.listed})).length,o=null==a?void 0:(0,r.applicationPermissionsList)(a);return n.mutate((function(n){n.commandsArray=(0,r.buildApplicationCommands)(e,o);n._map={};n.commandsArray.forEach((function(e){return n._map[e.id]=e}));n._commandIds.clear();e.forEach((function(e){null!=e.id&&""!==e.id&&n._commandIds.add(e.id)}));n.topOffset=t;n.bottomOffset=Math.max(t+i-1,t);n.isStale=!1}))};this.merge=function(e,t,i){var o=null==i?void 0:i.map((function(e){return{
applicationCommandPermissions:e.application_command_permissions,id:e.id}})),u=null!=o?(0,r.applicationPermissionsList)(o):void 0;return n.mutate((function(n){var i=e.filter((function(e){if(null==e.id||!1===e.listed)return!1;if(n._commandIds.has(e.id))return!1;n._commandIds.add(e.id);return!0})).length,o=(0,r.buildApplicationCommands)(e,u).filter((function(e){var t=n._map[e.id];n._map[e.id]=e;if(null!=t){n.commandsArray[n.commandsArray.indexOf(t)]=e;return!1}return!0}));n.commandsArray=t?[].concat(a(o),a(n.commandsArray)):[].concat(a(n.commandsArray),a(o));if(i>0){t?n.topOffset-=i:n.bottomOffset+=i;n.topOffset=-1===n.topOffset?0:n.topOffset;n.bottomOffset=-1===n.bottomOffset?0:n.bottomOffset;n.isStale=!1}}))};this.markStale=function(){return n.mutate((function(e){e.isStale=!0}))};this.guildId=t}},807149:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useApplicationCommandsDiscoveryState=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),a=_(n(496486)),i=n(536211),o=_(n(689389)),u=_(n(728429)),l=n(481414),s=_(n(117883)),d=n(166806),c=_(n(290760)),p=_(n(632184)),f=_(n(473517)),m=n(65621),y=n(153823),A=n(484278),T=n(770348);function _(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function v(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M={guildCommandSections:null,guildCommands:null,filteredApplicationId:null},g=function(e,t,n){return{type:n,inputType:m.ApplicationCommandInputType.PLACEHOLDER,id:"placeholder-"+e+"-"+t,name:"",displayName:"",description:"",displayDescription:"",applicationId:""}};t.useApplicationCommandsDiscoveryState=function(e,t,n,_){var I=(0,i.useStateFromStoresObject)([f.default,p.default,o.default],(function(){if(null==e.guild)return M;if(!o.default.can(T.Permissions.USE_APPLICATION_COMMANDS,e.channel))return M;var t=e.guild.id;return{guildCommandSections:f.default.getGuildSections(t),guildCommands:p.default.getGuildCommands(t,n),filteredApplicationId:p.default.getFilteredApplicationId(t)}
}),[e,n]),E=I.guildCommandSections,O=I.guildCommands,N=I.filteredApplicationId,S=r.useMemo((function(){return null==E?void 0:E.filter((function(e){var t,r;return(null!==(t=null===(r=e.commandCountByType)||void 0===r?void 0:r[n])&&void 0!==t?t:0)>0}))}),[E,n]),h=(0,i.useStateFromStoresObject)([s.default,u.default],(function(){var t,r;if((null===(t=e.channel)||void 0===t?void 0:t.type)!==T.ChannelTypes.DM)return{dmCommandSections:null,dmCommands:null};var a=null===(r=e.channel)||void 0===r?void 0:r.getRecipientId(),i=u.default.getUser(a);return null==i||!0!==i.bot?{dmUser:null,dmCommands:null}:{dmCommands:s.default.getCommands(a,n),dmUser:i}})),D=h.dmCommands,R=h.dmUser,b=r.useMemo((function(){var e;return null!=R&&null!=D&&D.length>0?[{id:D[0].applicationId,type:m.ApplicationCommandSectionType.DM,name:R.username,commandCountByType:(e={},e[n]=D.length,e),icon:R.avatar}]:[]}),[n,R,D]),P=r.useMemo((function(){return function(e,t,n){var r=e.channel,a=e.guild;return null!=r?(0,
l.getBuiltInCommands)(t,!0,n).filter((function(e){return null==e.predicate||e.predicate({channel:r,guild:a})})):[]}(e,n,_)}),[_,e,n]),L=(0,d.useTopCommands)(e),U=C(r.useState(!1),2),w=U[0],B=U[1];r.useEffect((function(){B(!1)}),[e,n]);var j=r.useMemo((function(){var t,n=(null!==(t=null!=e.guild?null==O?void 0:O.commandsArray:D)&&void 0!==t?t:[]).concat(P).filter((function(e){return!!L.includes(e.id)&&!!(0,y.hasAccess)(e)})).sort((function(t,n){var r=c.default.getScoreWithoutLoadingLatest(e,t);return c.default.getScoreWithoutLoadingLatest(e,n)-r})).slice(0,A.DISCOVERY_COMMANDS_FRECENCY_LIMIT);n.length>0&&B(!0);return n}),[P,e,L,D,null==O?void 0:O.commandsArray]),G=r.useMemo((function(){var t;if(_)return[l.BUILT_IN_SECTIONS[A.BuiltInSectionId.BUILT_IN]];var n=w?[l.BUILT_IN_SECTIONS[A.BuiltInSectionId.FRECENCY]]:[],r=null!==(t=null!=e.guild?S:b)&&void 0!==t?t:[],a=[l.BUILT_IN_SECTIONS[A.BuiltInSectionId.BUILT_IN]];return[].concat(n,v(r),a)}),[_,e.guild,b,S,w]),H=r.useMemo((function(){
if(null!=N)return{hasMoreBefore:!1,hasMoreAfter:!1};var e=G.reduce((function(e,t){var r;return e+(null!=t.commandCountByType&&null!==(r=t.commandCountByType[n])&&void 0!==r?r:0)}),0);return{hasMoreBefore:null!=O&&O.topOffset>0&&e>0,hasMoreAfter:null!=O&&O.bottomOffset<e-1}}),[O,G,n,N]),F=H.hasMoreBefore,x=H.hasMoreAfter,k=r.useMemo((function(){if(!F)return[];for(var e=[],r=0;r<t;r++)e.push(g("before",r,n));return e}),[F,t,n]),Y=r.useMemo((function(){if(!x)return[];for(var e=[],r=0;r<t;r++)e.push(g("after",r,n));return e}),[x,t,n]),V=r.useMemo((function(){var t;if(_)return P;var n=null!==(t=null!=e.guild?null==O?void 0:O.commandsArray:D)&&void 0!==t?t:[];x||(n=n.concat(P));return n}),[P,_,e.guild,D,O,x]),W=r.useMemo((function(){return F?V:j.concat(V)}),[V,j,F]),Q=r.useMemo((function(){var e={},t=a.default.chain(V).filter((function(e){
return!!e.listed||e.inputType===m.ApplicationCommandInputType.BUILT_IN||e.inputType===m.ApplicationCommandInputType.BUILT_IN_TEXT||e.inputType===m.ApplicationCommandInputType.BUILT_IN_INTEGRATION})).groupBy((function(e){return e.applicationId})).value();!F&&j.length>0&&(t[A.BuiltInSectionId.FRECENCY]=j);var r=G.map((function(n){var r,a=null!==(r=t[n.id])&&void 0!==r?r:[];n.type===m.ApplicationCommandSectionType.BUILT_IN&&(e[n.id]=a.length);return{data:a,section:n,key:n.id}})).filter((function(e){return(null==N||e.section.id===N)&&e.data.length>0}));if(r.length>0){var i,o;(i=r[0].data).unshift.apply(i,v(k));(o=r[r.length-1].data).push.apply(o,v(Y))}var u=r.reduce((function(e,t){return e.concat(t.data)}),[]),l=[],s=0;G.forEach((function(t){var r,a;l.push(s);var i=null!=t.commandCountByType&&null!==(r=t.commandCountByType[n])&&void 0!==r?r:0;s+=t.type===m.ApplicationCommandSectionType.BUILT_IN?null!==(a=e[t.id])&&void 0!==a?a:0:i}));return{discoverySections:r,sectionsOffset:l,
discoveryCommands:u,builtInSectionCommandCount:e}}),[V,j,k,Y,G,F,n,N]),q=Q.discoverySections,K=Q.sectionsOffset,z=Q.discoveryCommands;return{filteredApplicationId:N,discoverySections:q,applicationCommandSections:G,discoveryCommands:z,commands:W,guildCommands:O,sectionsOffset:K,hasMoreBefore:F,hasMoreAfter:x}}},258938:(e,t,n)=>{({value:!0});t.Z=void 0;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=_(n(496486)),o=_(n(709403)),u=_(n(786345)),l=n(81069),s=n(678928),d=_(n(290629)),c=_(n(728429)),p=n(194322),f=_(n(776360)),m=n(65621),y=n(484278),A=n(770348),T=_(n(247001))
;function _(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function v(){v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return v.apply(this,arguments)}function C(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function O(e){return function(){var t=this,n=arguments
;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){E(i,r,a,o,u,"next",e)}function u(e){E(i,r,a,o,u,"throw",e)}o(void 0)}))}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){switch(e){case A.ChannelTextAreaIntegrations.GIPHY.title:case A.ChannelTextAreaIntegrations.TENOR.title:return T.default.Messages.COMMAND_GIPHY_DESCRIPTION;default:return""}}var N,S=[].concat(function(e){if(Array.isArray(e))return M(e)}(N=(0,i.default)(A.ChannelTextAreaIntegrations).values().map((function(e){return{id:e.commandId,name:e.command,displayName:e.command,type:l.ApplicationCommandType.CHAT,inputType:m.ApplicationCommandInputType.BUILT_IN_INTEGRATION,applicationId:y.BuiltInSectionId.BUILT_IN,get description(){return g(e.title)},get displayDescription(){return g(e.title)},options:e.type===A.ChannelTextAreaIntegrationTypes.GIF?[{name:"query",displayName:"query",type:l.ApplicationCommandOptionType.STRING,get description(){
return T.default.Messages.COMMAND_GIPHY_QUERY_DESCRIPTION},get displayDescription(){return T.default.Messages.COMMAND_GIPHY_QUERY_DESCRIPTION},required:!0}]:[],integrationType:e.type,integrationTitle:e.title}})).value())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(N)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(N)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{id:"-15",name:"leave",displayName:"leave",type:l.ApplicationCommandType.CHAT,inputType:m.ApplicationCommandInputType.BUILT_IN,applicationId:y.BuiltInSectionId.BUILT_IN,get description(){
return T.default.Messages.LEAVE_GROUP_DM},get displayDescription(){return T.default.Messages.LEAVE_GROUP_DM},predicate:function(e){return e.channel.isGroupDM()},execute:function(e,t){var r=t.channel,i=(0,s.computeChannelName)(r,c.default,d.default),l=T.default.Messages.LEAVE_GROUP_DM_TITLE.format({name:i}),m=T.default.Messages.LEAVE_GROUP_DM_BODY.format({name:i});if(r.isManaged()){l=T.default.Messages.LEAVE_GROUP_DM_MANAGED_TITLE.format({name:i});m=T.default.Messages.LEAVE_GROUP_DM_MANAGED_BODY.format({name:i})}(0,p.openModalLazy)(O(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.resolve().then(n.bind(n,502197));case 2:t=e.sent;r=t.default;return e.abrupt("return",(function(e){return a.createElement(r,v({header:l,confirmText:T.default.Messages.LEAVE_GROUP_DM,cancelText:T.default.Messages.CANCEL,onConfirm:y},e),C(f.default,{size:f.default.Sizes.SIZE_16},void 0,m))}));case 5:case"end":
return e.stop()}}),e)}))));function y(){return A.apply(this,arguments)}function A(){return(A=O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return o.default.closePrivateChannel(r.id);case 3:e.next=8;break;case 5:e.prev=5;e.t0=e.catch(0);u.default.sendBotMessage(r.id,T.default.Messages.LEAVE_GROUP_DM_ERROR);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}}}]);t.Z=S},506309:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.canToggleCommunicationDisableOnUser=p;t.default=function(e,t){return(0,r.useStateFromStores)([o.default,a.default,i.default],(function(){return p(e,t,[o.default,a.default,i.default])}),[e,t])};var r=n(536211),a=s(n(30098)),i=s(n(689389)),o=s(n(728429)),u=s(n(656016)),l=n(770348);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){
var r=d(void 0===n?[o.default,a.default,i.default]:n,3),s=r[0],c=r[1],p=r[2],f=c.getGuild(e),m=s.getUser(t);return null!=f&&null!=m&&(!m.isNonUserBot()&&(!(f.isOwner(m)||u.default.can({permission:l.Permissions.ADMINISTRATOR,user:m,context:f}))&&p.canManageUser(l.Permissions.MODERATE_MEMBERS,m,f)))}},514756:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=l;t.useCurrentUserCommunicationDisabled=function(e){var t=(0,r.useStateFromStores)([i.default],(function(){return i.default.getCurrentUser()}));return l(null==t?void 0:t.id,e)};var r=n(536211),a=u(n(876874)),i=u(n(728429)),o=n(457676);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n,i=(0,r.useStateFromStores)([a.default],(function(){return null!=t&&null!=e?a.default.getMember(t,e):null}),[t,e]);return[null!==(n=null==i?void 0:i.communicationDisabledUntil)&&void 0!==n?n:null,(0,o.isMemberCommunicationDisabled)(i)]}},741464:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0})
;t.addQueued=function(e,t){var n=t.data,r=t.messageId,o=t.onCreate,u=t.onSuccess,l=t.onFailure;a.default.dirtyDispatch({type:i.ActionTypes.INTERACTION_QUEUE,data:n,nonce:e,messageId:r,onCreate:o,onSuccess:u,onFailure:l})};t.fetchMessageInteractionData=function(e,t){return s.apply(this,arguments)};t.queueInteractionComponentState=function(e,t,n,r){a.default.dirtyDispatch({type:i.ActionTypes.QUEUE_INTERACTION_COMPONENT_STATE,messageId:e,nonce:t,state:n,indices:r})};t.setFailed=function(e,t,n){a.default.dirtyDispatch({type:i.ActionTypes.INTERACTION_FAILURE,nonce:e,errorMessage:n,errorCode:t})};var r=o(n(118915)),a=o(n(636602)),i=n(770348);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,l,"next",e)}function l(e){u(i,r,a,o,l,"throw",e)}
o(void 0)}))}}function s(){return(s=l(regeneratorRuntime.mark((function e(t,n){var o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return r.default.get({url:i.Endpoints.MESSAGE_INTERACTION_DATA(t,n),oldFormErrors:!0});case 2:if((o=e.sent).ok){u=o.body;a.default.dirtyDispatch({type:i.ActionTypes.LOAD_MESSAGE_INTERACTION_DATA_SUCCESS,channelId:t,messageId:n,interactionData:u})}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},814142:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=d(n(536211)),i=d(n(636602)),o=n(81069),u=d(n(644263)),l=n(190900),s=n(770348);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return
;var r,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}
;return m.apply(this,arguments)}var y={},A={},T={};function _(e){delete y[e];var t=T[e];null!=t&&delete A[t];delete T[e]}var I=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;c(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.getInteraction=function(e){var t=A[e.id];return null!=t?y[t]:null};n.getMessageInteractionStates=function(){for(var e={},t=0,n=Object.entries(y);t<n.length;t++){var r=p(n[t],2),a=r[0],i=r[1],o=T[a];null!=o&&(e[o]=i.state)}return e};n.canQueueInteraction=function(e,t){var n=A[e];return!(null!=n&&null!=y[n]&&y[n].state!==l.InteractionState.FAILED||null!=y[t]&&y[t].state!==l.InteractionState.FAILED)};return t}(a.default.Store);I.displayName="InteractionStore";var v=new I(i.default,((r={})[s.ActionTypes.LOGOUT]=function(){y={};A={};T={}},r[s.ActionTypes.INTERACTION_QUEUE]=function(e){var t=e.nonce,n=e.messageId,r=e.data,a=e.onCreate,i=e.onCancel,o=e.onSuccess,u=e.onFailure;if(null!=n){A[n]=t
;T[t]=n}y[t]={state:l.InteractionState.QUEUED,data:r,onCreate:a,onCancel:i,onSuccess:o,onFailure:u}},r[s.ActionTypes.INTERACTION_CREATE]=function(e){var t,n=e.nonce,r=e.interactionId;if(null==n)return!1;var a=y[n];if(null==a||a.state!==l.InteractionState.QUEUED)return!1;a.state=l.InteractionState.CREATED;null===(t=a.onCreate)||void 0===t||t.call(a,r)},r[s.ActionTypes.INTERACTION_SUCCESS]=function(e){var t,n=e.nonce;if(null==n)return!1;var r=y[n];if(null==r)return!1;null===(t=r.onSuccess)||void 0===t||t.call(r);_(n)},r[s.ActionTypes.INTERACTION_FAILURE]=function(e){var t,n=e.nonce,r=e.errorCode,a=e.errorMessage;if(null==n)return!1;var i=y[n];if(null==i)return!1;null===(t=i.onFailure)||void 0===t||t.call(i,r,a);i.data.interactionType===o.InteractionTypes.APPLICATION_COMMAND?_(n):y[n]=m({},i,{state:l.InteractionState.FAILED,errorCode:r,errorMessage:a})},r[s.ActionTypes.MESSAGE_CREATE]=function(e){var t=e.message;if(null==t.nonce)return!1;var n,r=y[t.nonce];if(null==r)return!1
;null===(n=r.onSuccess)||void 0===n||n.call(r);_(t.nonce)},r[s.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.channelId;if(null==u.default.getChannel(t))return!1;for(var n=0,r=Object.entries(y);n<r.length;n++){var a=p(r[n],2),i=a[0];a[1].state===l.InteractionState.FAILED&&_(i)}},r));t.default=v},190900:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.InteractionState=void 0;var n;t.InteractionState=n;!function(e){e[e.QUEUED=0]="QUEUED";e[e.CREATED=1]="CREATED";e[e.FAILED=2]="FAILED"}(n||(t.InteractionState=n={}))},632341:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.InteractionStatusViewState=void 0;t.canRetryInteractionData=function(e){var t=e.options;for(;1===(null===(n=t)||void 0===n?void 0:n.length)&&(t[0].type===o.ApplicationCommandOptionType.SUB_COMMAND_GROUP||t[0].type===o.ApplicationCommandOptionType.SUB_COMMAND);){var n;t=t[0].options}for(var r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(null!==(i=t)&&void 0!==i?i:[]);!(r=a()).done;){var i;if(r.value.type===o.ApplicationCommandOptionType.ATTACHMENT)return!1}return!0};t.getFirstSkemaErrorMessage=t.executeMessageComponentInteraction=void 0;t.getInteractionInitialResponseDeadlineTimestamp=A;t.getInteractionStatusViewState=void 0;t.getInteractionTimeoutTimestamp=y
;t.handleInteractionResponse=void 0;var r=p(n(795715)),a=p(n(118915)),i=p(n(786345)),o=n(81069),u=p(n(423046)),l=n(741464),s=p(n(814142)),d=n(190900),c=n(770348);function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return m.apply(this,arguments)}function y(e){return null==e||""===e||Number.isNaN(e)?Date.now():r.default.extractTimestamp(e)+9e5}function A(e){return null==e||""===e||Number.isNaN(e)?Date.now():r.default.extractTimestamp(e)+3e3}t.executeMessageComponentInteraction=function(e){var t=e.componentType,n=e.messageId,i=e.messageFlags,d=e.customId,p=e.indices,f=e.applicationId,y=e.channelId,A=e.guildId,I=e.localState,v=r.default.fromTimestamp(Date.now());if(s.default.canQueueInteraction(n,v)){(0,
l.addQueued)(v,{messageId:n,data:{interactionType:o.InteractionTypes.MESSAGE_COMPONENT,customId:d,indices:p},onFailure:function(e,t){return _(y,e,t)}});null!=I&&(0,l.queueInteractionComponentState)(n,v,I,p);var E={type:o.InteractionTypes.MESSAGE_COMPONENT,nonce:v,guild_id:A,channel_id:y,message_flags:i,message_id:n,application_id:f,session_id:u.default.getSessionId(),data:m({component_type:t,custom_id:d},T(I))};a.default.post({url:c.Endpoints.INTERACTIONS,body:E,timeout:3e3},(function(e){return C(v,e)}))}};function T(e){if(null==e)return null;if(e.type===o.ComponentType.STRING_SELECT||e.type===o.ComponentType.INPUT_TEXT)return e;var t=e.selectedOptions.map((function(e){return e.value}));return{type:e.type,values:t}}var _=function(e,t,n){null==n&&null!=t&&i.default.sendClydeError(e,t)},I=function e(t){for(var n in t){var r=t[n];if(null!=r){if("_errors"===n&&Array.isArray(r)){var a,i;return null!==(a=null===(i=r[0])||void 0===i?void 0:i.message)&&void 0!==a?a:null}
if("object"==typeof r)return e(r)}}return null};t.getFirstSkemaErrorMessage=I;var v,C=function(e,t){if(!t.ok){if(!t.hasErr){if(t.status>=400&&t.status<500&&t.body){var n,r=null;if(t.body.code===c.AbortCodes.INVALID_FORM_BODY&&t.body.errors){r=I(t.body.errors);(0,l.setFailed)(e,void 0,r);return}(0,l.setFailed)(e,t.status,null===(n=t.body)||void 0===n?void 0:n.message);return}(0,l.setFailed)(e,t.body.code);return}(0,l.setFailed)(e)}};t.handleInteractionResponse=C;t.InteractionStatusViewState=v;!function(e){e[e.SENDING=0]="SENDING";e[e.CREATED=1]="CREATED";e[e.FAILED=2]="FAILED";e[e.TIMED_OUT=3]="TIMED_OUT"}(v||(t.InteractionStatusViewState=v={}));t.getInteractionStatusViewState=function(e,t){var n=null==t?void 0:t.state,r=e.state===c.MessageStates.SENT&&y(e.id)<Date.now(),a=e.state===c.MessageStates.SEND_FAILED&&A(e.id)<Date.now(),i=(null==t?void 0:t.data.interactionType)===o.InteractionTypes.APPLICATION_COMMAND,u=e.isCommandType()
;return i&&n===d.InteractionState.QUEUED||u&&e.state===c.MessageStates.SENDING?v.SENDING:i&&n===d.InteractionState.CREATED||e.hasFlag(c.MessageFlags.LOADING)&&!r?v.CREATED:null!=e.interaction&&e.hasFlag(c.MessageFlags.LOADING)&&r||null!=e.interaction&&!e.hasFlag(c.MessageFlags.LOADING)&&a?v.TIMED_OUT:u&&e.state===c.MessageStates.SEND_FAILED?v.FAILED:void 0}},359342:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,a=u(n(536211)),i=u(n(636602)),o=n(770348);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return s.apply(this,arguments)}var d={};function c(){d={}}var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;l(e,t)}(t,e);function t(){
return e.apply(this,arguments)||this}t.prototype.getPendingReply=function(e){return d[e]};return t}(a.default.Store);p.displayName="PendingReplyStore";var f=new p(i.default,((r={})[o.ActionTypes.CREATE_PENDING_REPLY]=function(e){var t=e.channel,n=e.message,r=e.shouldMention,a=void 0===r||r,i=e.showMentionToggle,o=void 0===i||i;d[t.id]={channel:t,message:n,shouldMention:a,showMentionToggle:o}},r[o.ActionTypes.SET_PENDING_REPLY_SHOULD_MENTION]=function(e){var t=e.channelId,n=e.shouldMention;if(!(t in d))return!1;d[t]=s({},d[t],{shouldMention:n})},r[o.ActionTypes.DELETE_PENDING_REPLY]=function(e){var t=e.channelId;delete d[t]},r[o.ActionTypes.CONNECTION_OPEN]=c,r[o.ActionTypes.LOGOUT]=c,r[o.ActionTypes.MESSAGE_DELETE]=function(e){var t,n,r=e.id,a=e.channelId;if((null===(t=d[a])||void 0===t||null===(n=t.message)||void 0===n?void 0:n.id)!==r)return!1;delete d[a]},r));t.default=f},192751:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.THREE_DAYS=void 0
;t.getAutoArchiveDuration=function(e,t){var n;return null!==(n=null!=t?t:null==e?void 0:e.defaultAutoArchiveDuration)&&void 0!==n?n:i.DEFAULT_AUTO_ARCHIVE_DURATION};t.getAutoArchiveDurationText=function(e){var t,n=l().find((function(t){return t.value===e}));return null!==(t=null==n?void 0:n.label)&&void 0!==t?t:a.default.duration(e,"minutes").humanize()};t.getAutoArchiveDurations=void 0;t.getAutoArchiveOptions=l;var r=u(n(288306)),a=u(n(730381)),i=n(64072),o=u(n(247001));function u(e){return e&&e.__esModule?e:{default:e}}t.THREE_DAYS=4320;function l(){return[{label:o.default.Messages.AUTO_ARCHIVE_DURATION_1_HOUR,value:60},{label:o.default.Messages.AUTO_ARCHIVE_DURATION_24_HOURS,value:1440},{label:o.default.Messages.AUTO_ARCHIVE_DURATION_3_DAYS,value:4320},{label:o.default.Messages.AUTO_ARCHIVE_DURATION_1_WEEK,value:10080}]}var s=(0,r.default)((function(){return l().map((function(e){return e.value}))}));t.getAutoArchiveDurations=s},192110:(e,t,n)=>{Object.defineProperty(t,"__esModule",{
value:!0});t.PrivateThreadMode=void 0;t.createThread=function(e,t,n,r,a){return h(e,(function(){return i.default.post({url:I.Endpoints.CHANNEL_THREADS(e.id),body:{name:t,type:n,auto_archive_duration:r,location:a}})}))};t.getDefaultThreadName=N;t.getIsPrivate=g;t.useCreateForumPostCommon=function(e){var t=e.parentChannel,n=e.threadSettings,r=e.appliedTags,o=e.onThreadCreated,u=e.upload;return a.useCallback(function(){var e=M(regeneratorRuntime.mark((function e(a,s,c){var p,m,y,T,_,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m=null!==(p=n.name)&&void 0!==p?p:"";y=(0,A.getAutoArchiveDuration)(t,null);T=I.Endpoints.CHANNEL_THREADS(t.id)+"?has_message=true";_={name:m,content:a,auto_archive_duration:y,applied_tags:r,sticker_ids:s};e.next=6;return h(t,(function(){return null!=c&&c.length>0?u(T,_,c):i.default.post({url:T,body:_})}));case 6:v=e.sent;l.default.clearDraft(t.id,f.DraftType.ThreadSettings)
;l.default.clearDraft(t.id,f.DraftType.FirstThreadMessage);d.default.clearAll(t.id,f.DraftType.FirstThreadMessage);null==o||o(v);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,o,r,u])};t.useCreateThreadCommon=function(e){var t=e.parentChannel,n=e.parentMessageId,r=e.threadSettings,o=e.privateThreadMode,u=e.location,s=e.onThreadCreated,c=e.useDefaultThreadName,m=e.uploadHandler;return a.useCallback(function(){var e=M(regeneratorRuntime.mark((function e(a,y,T){var _,C,E,O,M,D,R,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C=null==n||!1;E=g(r,o);if(""===(O=null!==(_=r.name)&&void 0!==_?_:"")&&c){M=N(t,n);O=""!==M?M:v.default.Messages.THREAD}D=(0,A.getAutoArchiveDuration)(t,r.autoArchiveDuration);R=p.default.getChannel(n);e.next=8;return h(t,(function(){var e=null!=n?I.Endpoints.CHANNEL_MESSAGE_THREADS(t.id,n):I.Endpoints.CHANNEL_THREADS(t.id);return i.default.post({url:e,body:{name:O,
type:E?I.ChannelTypes.PRIVATE_THREAD:t.type===I.ChannelTypes.GUILD_ANNOUNCEMENT?I.ChannelTypes.ANNOUNCEMENT_THREAD:I.ChannelTypes.PUBLIC_THREAD,auto_archive_duration:D,location:u}})}));case 8:if((b=e.sent)!==R){l.default.clearDraft(t.id,f.DraftType.ThreadSettings);l.default.clearDraft(t.id,f.DraftType.FirstThreadMessage);d.default.clearAll(t.id,f.DraftType.FirstThreadMessage);null==s||s(b);(C||a.length>0||null!=y&&y.length>0||null!=T&&T.length>0)&&S(b,a,y,T,m)}case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,r,s,o,u,c,m])};t.usePrivateThreadMode=function(e){var t=(0,T.useCanStartPublicThread)(e),n=(0,T.useCanStartPrivateThread)(e),a=(0,T.useCouldStartPrivateThreadWithFeature)(e);return n?t?r.Enabled:r.PrivateOnly:a?r.DisabledWithUpsell:r.Disabled};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e)
;var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=C(n(118915)),o=C(n(636602)),u=C(n(190040)),l=C(n(186705)),s=C(n(786345)),d=C(n(413546)),c=C(n(614293)),p=C(n(644263)),f=n(687549),m=C(n(201292)),y=n(249875),A=n(192751),T=n(819235),_=C(n(521595)),I=n(770348),v=C(n(247001));function C(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function O(e,t,n,r,a,i,o){try{var u=e[i](o),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){O(i,r,a,o,u,"next",e)}function u(e){O(i,r,a,o,u,"throw",e)}
o(void 0)}))}}t.PrivateThreadMode=r;!function(e){e[e.Disabled=1]="Disabled";e[e.Enabled=2]="Enabled";e[e.PrivateOnly=3]="PrivateOnly";e[e.DisabledWithUpsell=4]="DisabledWithUpsell"}(r||(t.PrivateThreadMode=r={}));function g(e,t){return t===r.PrivateOnly||null!==(n=e.isPrivate)&&void 0!==n&&n;var n}function N(e,t){var n,r,a,i=null==t?null:m.default.getMessage(e.id,t),o=null!==(n=null==i||null===(r=i.embeds)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.rawTitle)&&void 0!==n?n:"";if(""!==o)return o.length>40?o.substring(0,40)+"...":o;for(var u,l=c.default.unparse(null!==(u=null==i?void 0:i.content)&&void 0!==u?u:"",e.id,!0),s=(0,_.default)(l.split("\n")[0],!0).split(/(?:\s|[!@#$%^&*()_\-+={}[\]:";'<>?,./])+/),d=s[0],p=1;p<s.length;p++){var f=d+" "+s[p];if(f.length>40)break;d=f}d.length>40&&(d=d.substring(0,40)+"...");return d}function S(e,t,n,r,a){
if(!(null!=a&&null!=r&&r.length>0))return null!=n&&n.length>0?s.default.sendStickers(e.id,n,t):s.default.sendMessage(e.id,c.default.parse(e,t));a(e,r,t,n)}function h(e,t){return D.apply(this,arguments)}function D(){return(D=M(regeneratorRuntime.mark((function e(t,n){var r,a,i,l,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return n();case 3:if(null==(r=e.sent).body)u.default.show({title:v.default.Messages.ERROR,body:v.default.Messages.ERROR_OCCURRED_TRY_AGAIN});else{o.default.dispatch({type:I.ActionTypes.SLOWMODE_RESET_COOLDOWN,slowmodeType:y.SlowmodeType.CreateThread,channelId:t.id});o.default.dispatch({type:I.ActionTypes.THREAD_CREATE_LOCAL,channelId:r.body.id})}e.next=11;break;case 7:e.prev=7;e.t0=e.catch(0);(null===(a=e.t0.body)||void 0===a?void 0:a.code)===I.AbortCodes.TOO_MANY_THREADS?u.default.show({title:v.default.Messages.CANNOT_CREATE_THREAD,body:v.default.Messages.TOO_MANY_THREADS_MESSAGE
}):(null===(i=e.t0.body)||void 0===i?void 0:i.code)===I.AbortCodes.TOO_MANY_ANNOUNCEMENT_THREADS?u.default.show({title:v.default.Messages.CANNOT_CREATE_THREAD,body:v.default.Messages.TOO_MANY_ANNOUNCEMENT_THREADS_MESSAGE}):(null===(l=e.t0.body)||void 0===l?void 0:l.code)===I.AbortCodes.SLOWMODE_RATE_LIMITED?(d=null!==(s=e.t0.body.retry_after)&&void 0!==s?s:0)>0&&o.default.dispatch({type:I.ActionTypes.SLOWMODE_SET_COOLDOWN,channelId:t.id,slowmodeType:y.SlowmodeType.CreateThread,cooldownMs:1e3*d}):429===e.t0.status?u.default.show({title:v.default.Messages.CANNOT_CREATE_THREAD,body:v.default.Messages.RATE_LIMITED}):u.default.show({title:v.default.Messages.ERROR,body:v.default.Messages.ERROR_OCCURRED_TRY_AGAIN});throw e.t0;case 11:return e.abrupt("return",new Promise((function(e,t){null==r.body&&t();p.default.addConditionalChangeListener((function(){var t=p.default.getChannel(r.body.id);if(null!=t){o.default.wait((function(){e(t)}));return!1}}))})));case 12:case"end":return e.stop()}
}),e,null,[[0,7]])})))).apply(this,arguments)}},819235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.computeCanStartPublicThread=function(e,t){var n=e.isForumChannel()?f.Permissions.SEND_MESSAGES:a.default.combine(f.Permissions.CREATE_PUBLIC_THREADS,f.Permissions.READ_MESSAGE_HISTORY);return _(c.default.can(n,e),e,t)};t.computeIsReadonlyThread=function(e){var t,n=e.isArchivedThread()&&!0===(null===(t=e.threadMetadata)||void 0===t?void 0:t.locked),r=c.default.can(f.Permissions.MANAGE_THREADS,e);return n&&!r};t.useCanManageThread=function(e){var t=(0,i.useStateFromStores)([s.default],(function(){return s.default.getChannel(null==e?void 0:e.parent_id)})),n=(0,i.useStateFromStores)([c.default],(function(){return null!=t&&c.default.can(f.Permissions.MANAGE_THREADS,t)}),[t]),r=(0,i.useStateFromStores)([l.default],(function(){return l.default.getId()}));return null!=e&&null!=t&&(!!e.isThread()&&(e.ownerId===r||!!n))};t.useCanStartPrivateThread=A;t.useCanStartPublicThread=y
;t.useCanStartThread=function(e){var t=y(e),n=A(e);return t||n};t.useCanUnarchiveThread=function(e){var t,n=(0,i.useStateFromStores)([c.default],(function(){return null!=e&&c.default.can(f.Permissions.SEND_MESSAGES_IN_THREADS,e)})),r=I(e);return!(null==e||!e.isThread())&&((null===(t=e.threadMetadata)||void 0===t?void 0:t.locked)?r:n)};t.useCouldStartPrivateThreadWithFeature=T;t.useHasActiveThreads=function(e){return(0,i.useStateFromStoresObject)([p.default,c.default],(function(){var t=(0,r.default)(p.default.getActiveJoinedThreadsForParent(e.guild_id,e.id)).some((function(e){return c.default.can(f.Permissions.VIEW_CHANNEL,e.channel)})),n=(0,r.default)(p.default.getActiveUnjoinedThreadsForParent(e.guild_id,e.id)).some((function(e){return c.default.can(f.Permissions.VIEW_CHANNEL,e)}));return{hasActiveThreads:t||n,hasActiveUnjoinedThreads:n}}))};t.useIsThreadModerator=I
;var r=m(n(496486)),a=m(n(267258)),i=n(536211),o=m(n(477072)),u=n(567186),l=m(n(423046)),s=m(n(644263)),d=m(n(30098)),c=m(n(689389)),p=m(n(19566)),f=n(770348);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return _((0,i.useStateFromStores)([c.default],(function(){var t=e.isForumChannel()?f.Permissions.SEND_MESSAGES:a.default.combine(f.Permissions.CREATE_PUBLIC_THREADS,f.Permissions.READ_MESSAGE_HISTORY);return c.default.can(t,e)}),[e]),e,t)}function A(e){var t=(0,i.useStateFromStores)([d.default],(function(){return d.default.getGuild(e.guild_id)})),n=T(e);return null!=t&&t.hasFeature(f.GuildFeatures.PRIVATE_THREADS)&&n}function T(e){var t=(0,i.useStateFromStores)([c.default],(function(){return c.default.can(a.default.combine(f.Permissions.CREATE_PRIVATE_THREADS),e)}),[e]);return e.type===f.ChannelTypes.GUILD_TEXT&&_(t,e)}function _(e,t,n){if(__OVERLAY__)return!1;if(!e)return!1;if(!u.THREADED_CHANNEL_TYPES.has(t.type))return!1;if(null!=n){
if(n.hasFlag(f.MessageFlags.HAS_THREAD))return!1;if((0,o.default)(n))return!1}return!0}function I(e){return(0,i.useStateFromStores)([c.default],(function(){return null!=e&&c.default.can(f.Permissions.MANAGE_THREADS,e)}))}},521595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){e=e.replace(/[\\"#:/@<>]/g,"");t&&(e=e.trim());return e}},338641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=v;t.mentionUser=I;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}r.default=e;n&&n.set(e,r)}(n(667294))
;var r,a=n(536211),i=m(n(55189)),o=n(145122),u=m(n(644263)),l=m(n(689389)),s=m(n(211136)),d=m(n(663303)),c=n(956506),p=n(770348),f=m(n(247001));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),l=0;l<o;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,u=!1;try{
for(n=n.call(e);!(o=(r=n.next()).done);o=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=e.id,r=e.username,a=e.tag,o="@"+(d.default.hidePersonalInformation?r:a),u="<@!"+n+">";c.ComponentDispatch.dispatchToLastSubscribed(p.ComponentActions.INSERT_TEXT,{plainText:o,rawText:u})
;null!=t&&i.default.startTyping(t)}function v(e,t,n){var r=(0,a.useStateFromStoresArray)([s.default,u.default,l.default],(function(){var e=s.default.getChannelId(t),n=u.default.getChannel(e);return[e,null!=n&&(n.isMultiUserDM()||l.default.can(p.Permissions.SEND_MESSAGES,n))]}),[t]),i=T(r,2),d=i[0],c=i[1],m=n===p.AppContext.POPOUT;if(!c||m)return null;return A(o.MenuItem,{id:"mention",label:f.default.Messages.MENTION,action:function(){I(e,d)}})}v.displayName="useMentionUserItem"}}]);
//# sourceMappingURL=10344333d6d1a55c8ffb.js.map