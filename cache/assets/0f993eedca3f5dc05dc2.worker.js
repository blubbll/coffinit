(()=>{var e={978:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=function(e,r){if(e.score===r.score){var t=(e.comparator||"").toLocaleLowerCase(),n=(r.comparator||"").toLocaleLowerCase();if(t<n)return-1;if(t>n)return 1}return r.score-e.score}},513:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=void 0;r.default={escape:function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}}},916:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});Object.defineProperty(r,"cssValueToNumber",{enumerable:!0,get:function(){return n.cssValueToNumber}});Object.defineProperty(r,"getAcronym",{enumerable:!0,get:function(){return n.getAcronym}});Object.defineProperty(r,"stripDiacritics",{enumerable:!0,get:function(){return n.stripDiacritics}});Object.defineProperty(r,"truncateText",{enumerable:!0,get:function(){return n.truncateText}});Object.defineProperty(r,"upperCaseFirstChar",{enumerable:!0,get:function(){
return n.upperCaseFirstChar}});var n=t(537)},537:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.cssValueToNumber=function(e){var r=parseInt(e,10);return isNaN(r)?0:r};r.getAcronym=function(e){return null!=e?e.replace(/'s /g," ").replace(/\w+/g,(function(e){return e[0]})).replace(/\s/g,""):""};r.truncateText=r.stripDiacritics=void 0;r.upperCaseFirstChar=function(e){if(null==e)return"";return""+e.charAt(0).toUpperCase()+e.slice(1)};var t=/[\u0300-\u036f]/g;r.truncateText=function(e,r,t){void 0===t&&(t="â€¦");return null==e||null==r?"":e.length>r?""+e.substring(0,r-t.length).replace(/[\s.]+$/,"")+t:e};var n=null==String.prototype.normalize?function(e){return e}:function(e){return e.normalize("NFD").replace(t,"").normalize("NFC")};r.stripDiacritics=n},390:e=>{"use strict";e.exports=function(e,r){var t=r.length,n=e.length;if(n>t)return!1;if(n===t)return e===r;e:for(var i=0,o=0;i<n;i++){for(var u=e.charCodeAt(i);o<t;)if(r.charCodeAt(o++)===u)continue e;return!1}
return!0}},705:(e,r,t)=>{var n=t(639).Symbol;e.exports=n},239:(e,r,t)=>{var n=t(705),i=t(607),o=t(333),u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?i(e):o(e)}},957:(e,r,t)=>{var n="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;e.exports=n},607:(e,r,t)=>{var n=t(705),i=Object.prototype,o=i.hasOwnProperty,u=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var r=o.call(e,a),t=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=u.call(e);n&&(r?e[a]=t:delete e[a]);return i}},333:e=>{var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},639:(e,r,t)=>{var n=t(957),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},279:(e,r,t)=>{var n=t(218),i=t(771),o=t(841),u=Math.max,a=Math.min;e.exports=function(e,r,t){var c,l,s,f,p,d,v=0,g=!1,b=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");r=o(r)||0;if(n(t)){
g=!!t.leading;s=(b="maxWait"in t)?u(o(t.maxWait)||0,r):s;y="trailing"in t?!!t.trailing:y}function m(r){var t=c,n=l;c=l=void 0;v=r;return f=e.apply(n,t)}function h(e){v=e;p=setTimeout(j,r);return g?m(e):f}function x(e){var t=e-d;return void 0===d||t>=r||t<0||b&&e-v>=s}function j(){var e=i();if(x(e))return O(e);p=setTimeout(j,function(e){var t=r-(e-d);return b?a(t,s-(e-v)):t}(e))}function O(e){p=void 0;if(y&&c)return m(e);c=l=void 0;return f}function w(){var e=i(),t=x(e);c=arguments;l=this;d=e;if(t){if(void 0===p)return h(d);if(b){clearTimeout(p);p=setTimeout(j,r);return m(d)}}void 0===p&&(p=setTimeout(j,r));return f}w.cancel=function(){void 0!==p&&clearTimeout(p);v=0;c=d=l=p=void 0};w.flush=function(){return void 0===p?f:O(i())};return w}},218:e=>{e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},5:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},448:(e,r,t)=>{var n=t(239),i=t(5);e.exports=function(e){
return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},771:(e,r,t)=>{var n=t(639);e.exports=function(){return n.Date.now()}},841:(e,r,t)=>{var n=t(218),i=t(448),o=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(n(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=n(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var t=a.test(e);return t||c.test(e)?l(e.slice(2),t?2:8):u.test(e)?NaN:+e}}},r={};function t(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};e[n](o,o.exports,t);return o.exports}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();(()=>{"use strict";var e=a(t(390)),r=a(t(279)),n=a(t(513)),i=t(916),o=a(t(978)),u=["id"];function a(e){return e&&e.__esModule?e:{default:e}}function c(){c=Object.assign||function(e){
for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e};return c.apply(this,arguments)}var l="UPDATE_USERS",s="USER_RESULTS",f="QUERY_SET",p="QUERY_CLEAR",d=new Map,v=new Map,g=new Set,b="username",y="friendNickname";function m(e){var r=e.payload,t=!1,n=new Set;r.forEach((function(e){var r,i=e.id,o=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++){t=o[n];r.indexOf(t)>=0||(i[t]=e[t])}return i}(e,u),a=null!==(r=d.get(i))&&void 0!==r?r:null,l=c({},a,{},o);d.set(i,l);if(v.size>0){l.isFriend===(null==a?void 0:a.isFriend)&&l.friendNickname===(null==a?void 0:a.friendNickname)||(t=!0);Object.keys(l).forEach((function(e){"isBot"!==e&&"isFriend"!==e&&e!==b&&e!==y&&n.add(e)}))}}));v.forEach((function(e,r){var i=e.filters;(null==i||i.friends===t||n.has(i.guild))&&g.add(r)}));h()}var h=(0,r.default)((function(){if(0!==g.size){g.forEach((function(e){var r=v.get(e);null!=r&&j(e,r)}))
;g.clear()}}),100,{leading:!0,trailing:!0});function x(e,r){return e*(null!=r?r:1)}function j(r,t){var u,a,c=t.query,l=t.limit,s=t.filters,f=t.blacklist,p=t.whitelist,v=null!=s&&s.strict&&null!==(u=s.guild)&&void 0!==u?u:null,g=null!==(a=t.boosters)&&void 0!==a?a:{},m=new RegExp("^"+n.default.escape(c),"i"),h=new RegExp(n.default.escape(c),"i"),j=[];if(""===c)return O(c,j,r);var w=c.toLocaleLowerCase();d.forEach((function(r,t){if(function(e,r,t,n,i){if(null!=n&&n.indexOf(e)>=0)return!1;if(null!=i&&i.indexOf(e)>=0)return!0;if(null!=t){var o=t.friends,u=t.guild;return!0===o&&!0===r.isFriend||null!=u&&(null!=r[u]||null===r[u])}return!0}(t,r,s,f,p)){var n,o=r.username;t===c?n={id:t,username:o,comparator:t,score:x(10,g[t])}:Object.keys(r).forEach((function(u){var a=r[u];if("boolean"!=typeof a&&null!=a&&(null==v||u===b||u===y||v===u)){var c;m.test(a)?c={comparator:a,score:x(10,g[t])}:h.test(a)?c={comparator:a,score:x(5,g[t])}:(0,e.default)(w,(0,
i.stripDiacritics)(a.toLocaleLowerCase()))&&(c={comparator:a,score:x(1,g[t])});if(null!=c){(null==n||n.score<c.score)&&(n=c);n.id=t;n.username=o}}}));null!=n&&j.push(n)}}));j.sort(o.default);j.length>l&&(j.length=l);O(c,j,r)}function O(e,r,t){var n={type:s,uuid:t,payload:{query:e,results:r}};self.postMessage(n)}self.addEventListener("message",(function(e){var r=e.data;if(null==r||null==r.type)throw new Error("Invalid data");switch(r.type){case l:return m(r);case f:return function(e){var r=e.uuid,t=e.payload;v.set(r,t);j(r,t)}(r);case p:return function(e){var r=e.uuid;v.delete(r);g.delete(r);0===g.size&&h.cancel()}(r)}}))})()})();
//# sourceMappingURL=0f993eedca3f5dc05dc2.worker.js.map