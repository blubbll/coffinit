"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[24956],{74978:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){if(e.score===t.score){var r=(e.comparator||"").toLocaleLowerCase(),n=(t.comparator||"").toLocaleLowerCase();if(r<n)return-1;if(r>n)return 1}return t.score-e.score}},648530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r,n;if(e.score!==t.score)return t.score-e.score;var i=u(e.channel),a=u(t.channel);if(i!==a)return i-a;var l=(null!==(r=e.comparator)&&void 0!==r?r:"").toLocaleLowerCase(),o=(null!==(n=t.comparator)&&void 0!==n?n:"").toLocaleLowerCase();if(l<o)return-1;if(l>o)return 1;return 0};var n,i=(n=r(644263))&&n.__esModule?n:{default:n},a=r(770348);function u(e){if(null==e.parent_id)return e.type===a.ChannelTypes.GUILD_CATEGORY?1e3*(e.position+1):e.position
;var t,r,n=1e3*((null!==(t=null===(r=i.default.getChannel(e.parent_id))||void 0===r?void 0:r.position)&&void 0!==t?t:0)+1);return e.isVocal()?n+e.position+500:n+e.position}},872243:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.isSendableSticker=t.getStickerSendability=t.StickerSendability=void 0;var n,i=o(r(656016)),a=o(r(838583)),u=r(851757),l=r(770348);function o(e){return e&&e.__esModule?e:{default:e}}t.StickerSendability=n;!function(e){e[e.SENDABLE=0]="SENDABLE";e[e.SENDABLE_WITH_PREMIUM=1]="SENDABLE_WITH_PREMIUM";e[e.NONSENDABLE=2]="NONSENDABLE";e[e.SENDABLE_WITH_BOOSTED_GUILD=3]="SENDABLE_WITH_BOOSTED_GUILD"}(n||(t.StickerSendability=n={}));var c=function(e,t,r){if(null==t)return n.NONSENDABLE;var o=a.default.isPremium(t,l.PremiumTypes.TIER_2);return(0,u.isStandardSticker)(e)?o?n.SENDABLE:n.SENDABLE_WITH_PREMIUM:(0,u.isGuildSticker)(e)&&null!=r?e.available?null!=r.guild_id&&""!==r.guild_id&&r.guild_id===e.guild_id?n.SENDABLE:null==r.guild_id||i.default.can({
permission:l.Permissions.USE_EXTERNAL_STICKERS,user:t,context:r})?o?n.SENDABLE:n.SENDABLE_WITH_PREMIUM:n.NONSENDABLE:n.SENDABLE_WITH_BOOSTED_GUILD:n.NONSENDABLE};t.getStickerSendability=c;t.isSendableSticker=function(e,t,r){return c(e,t,r)===n.SENDABLE}},371732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.STICKER_PACK_NEW_TIMESTAMP_THRESHOLD=void 0;var n,i=d(r(496486)),a=d(r(536211)),u=d(r(636602)),l=d(r(71319)),o=d(r(960441)),c=d(r(82572)),s=r(770348),f=r(840433);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}function v(){v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}
;return v.apply(this,arguments)}var h={pendingUsages:[]},E=1e3*s.Durations.DAY;t.STICKER_PACK_NEW_TIMESTAMP_THRESHOLD=E;var m=new l.default({computeBonus:function(){return 100},computeWeight:function(e){var t=0;e<=3?t=100:e<=15?t=70:e<=30?t=50:e<=45?t=30:e<=80&&(t=10);return t},lookupKey:function(e){return c.default.getStickerById(e)},afterCompute:function(){},numFrequentlyItems:20}),A=function(){m.compute()};function g(){var e,t=null===(e=o.default.frecencyWithoutFetchingLatest.stickerFrecency)||void 0===e?void 0:e.stickers;if(null==t)return!1;m.overwriteHistory(i.default.mapValues(t,(function(e){return v({},e,{recentUses:e.recentUses.map(Number)})})),h.pendingUsages)}var L=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.initialize=function(e){this.waitFor(c.default);null!=e&&(h=e);this.syncWith([c.default],A);this.syncWith([o.default],g)}
;r.getState=function(){return h};r.hasPendingUsage=function(){return h.pendingUsages.length>0};!function(e,t,r){t&&p(e.prototype,t);r&&p(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"stickerFrecencyWithoutFetchingLatest",get:function(){return m}}]);return t}(a.default.PersistedStore);L.displayName="StickersPersistedStore";L.persistKey="StickersPersistedStoreV2";var S=new L(u.default,((n={})[s.ActionTypes.STICKER_TRACK_USAGE]=function(e){var t=e.stickerIds;null==t||t.forEach((function(e){m.track(e);h.pendingUsages.push({key:e,timestamp:Date.now()})}));m.compute()},n[s.ActionTypes.USER_SETTINGS_PROTO_UPDATE]=function(e){var t=e.settings.type,r=e.wasSaved;if(t!==f.UserSettingsTypes.FRECENCY_AND_FAVORITES_SETTINGS||!r)return!1;h.pendingUsages=[]},n));t.default=S},191013:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,i,a=M(r(824390)),u=M(r(496486)),l=M(r(730381)),o=M(r(536211)),c=M(r(636602)),s=M(r(703124)),f=M(r(504762)),d=M(r(288356)),p=M(r(191839)),y=M(r(834162)),v=M(r(663303)),h=M(r(871778)),E=M(r(194198)),m=M(r(37679)),A=M(r(432310)),g=M(r(693399)),L=r(862728),S=r(71246),_=r(811076),b=r(864489),T=M(r(922629)),N=r(539331),I=r(440815),C=r(770348);function M(e){return e&&e.__esModule?e:{default:e}}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}function P(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=(0,l.default)().subtract(1,"week"),R=[],k="",G=!1;function q(e,t){return e.application.name.localeCompare(t.application.name,h.default.locale,{sensitivity:"base"})}function z(e,t){return null!=e&&((0,l.default)(e.createdAt).isAfter(U)&&0===t)}var j=((n={})[C.GameTableListKeys.NAME]=q,n[C.GameTableListKeys.PLATFORM]=function(e,t,r){var n=e.libraryApplication.getDistributor(),i=t.libraryApplication.getDistributor();return n===i?(r===C.TableSortDirections.DESCENDING?-1:1)*q(e,t):null==n?1:null==i?-1:n.localeCompare(i)},
n[C.GameTableListKeys.LAST_PLAYED]=function(e,t){return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1},n[C.GameTableListKeys.ACTIONS]=null,n),B=(0,L.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.shouldShowInLibrary}))})),Q=(0,L.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&A.default.isLaunchable(e.libraryApplication.id,e.libraryApplication.branchId)}))})),K=(0,L.cachedFunction)((function(e,t){return e.filter((function(e){return(0,a.default)(t.toLowerCase(),e.application.name.toLowerCase())}))})),F=(0,L.cachedFunction)((function(e,t,r,n){var i=j[t];if(null==i)return e;var a=P(e).sort(i);return r===C.TableSortDirections.DESCENDING?a.reverse():a})),x=(0,L.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.libraryApplication.isHidden()}))}));function H(e,t){
var r=E.default.getCurrentUserStatisticsForApplication(e.id);if(null!=r)return new Date(r.last_played_at).getTime();var n=t[e.id];return null!=n?n:0}function V(){var e=new Set(y.default.getRunningVerifiedApplicationIds()),t={},r=new Set,n=y.default.getGamesSeen(!1,!1).map((function(e){var r=d.default.getGameBySettingGame(e);if(null!=r){t[r.id]=1e3*e.lastFocused;return r.id}return null})),i=Object.values(p.default.getAllLibraryApplications()).map((function(n){return function(e,t,r,n,i){if(!i&&t.has(e.id))return null;var a=d.default.getGame(e.id);if(null==a)return null;var u=H(a,r);t.add(e.id);return(0,_.isUserEntitledToLibraryApplication)(e)||A.default.isInstalled(e.id,e.branchId)?{key:e.id+"-"+e.branchId,application:a,libraryApplication:e,lastPlayed:u,supportsCloudSync:null!=e&&A.default.supportsCloudSync(e.id,e.branchId),isNew:z(e,u),isLaunching:s.default.launchingGames.has(e.id),isRunning:n.has(e.id),isLaunchable:(0,N.isLaunchable)({LibraryApplicationStore:p.default,
LaunchableGameStore:s.default,DispatchApplicationStore:A.default,ConnectedAppsStore:f.default,applicationId:e.id,branchId:e.branchId}),isUpdatingFlags:p.default.isUpdatingFlags(e.id,e.branchId),shouldShowInLibrary:(0,_.shouldShowGameInLibrary)(a,e,v.default),defaultAction:(0,I.getDefaultLibraryApplicationAction)(e,A.default,g.default)}:null}(n,r,t,e,!0)})).filter(S.isNotNullish),a=n.map((function(n){return function(e,t,r,n){var i=null!=e?d.default.getGame(e):null;if(null==i||null==e||t.has(e))return null;var a=H(i,r);t.add(e);return{key:e,application:i,lastPlayed:a,supportsCloudSync:!1,isNew:!1,isLaunching:s.default.launchingGames.has(e),isRunning:n.has(e),isLaunchable:(0,N.isLaunchable)({LibraryApplicationStore:p.default,LaunchableGameStore:s.default,DispatchApplicationStore:A.default,ConnectedAppsStore:f.default,applicationId:e,branchId:null}),isUpdatingFlags:!1,shouldShowInLibrary:!1,libraryApplication:null,defaultAction:null}}(n,r,t,e)
})).filter(S.isNotNullish),l=[].concat(P(a),P(i)).sort((function(e,t){return e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1}));G=null!=d.default.lastFetched&&p.default.fetched;if(u.default.isEqual(l,R))return!1;R=l;b.isPlatformEmbedded&&T.default.setSystemTrayApplications(Q(R).map((function(e){return e.application})).slice(0,5));return!0}var W=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;O(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.initialize=function(){this.syncWith([d.default,s.default,y.default,A.default,g.default,p.default,E.default,v.default,f.default],V,200);this.syncWith([m.default,h.default],(function(){return!0}))};!function(e,t,r){t&&w(e.prototype,t);r&&w(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"applicationFilterQuery",get:function(){return k}},{key:"applicationViewItems",get:function(){return R}},{key:"launchableApplicationViewItems",get:function(){return Q(R)}
},{key:"libraryApplicationViewItems",get:function(){return B(R)}},{key:"filteredLibraryApplicationViewItems",get:function(){return K(this.libraryApplicationViewItems,k)}},{key:"sortedFilteredLibraryApplicationViewItems",get:function(){return F(this.filteredLibraryApplicationViewItems,m.default.sortKey,m.default.sortDirection,h.default.locale)}},{key:"hiddenLibraryApplicationViewItems",get:function(){return x(R)}},{key:"hasFetchedApplications",get:function(){return G}}]);return t}(o.default.Store);W.displayName="ApplicationViewStore";var Y=new W(c.default,((i={})[C.ActionTypes.LIBRARY_APPLICATION_FILTER_UPDATE]=function(e){var t=e.query;k=t},i));t.default=Y},440815:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getDefaultLibraryApplicationAction=function(e,t,r){var a=t.getState(e.id,e.branchId),u=r.getQueuePosition(e.id,e.branchId),l=r.paused;if(null!=a){if(null==u||-1===u)switch(a.type){case i.LocalDispatchApplicationStates.INSTALLING:
return i.LibraryApplicationActions.INSTALL;case i.LocalDispatchApplicationStates.UPDATING:case i.LocalDispatchApplicationStates.UPDATE_REQUIRED:return i.LibraryApplicationActions.UPDATE}switch(a.type){case i.LocalDispatchApplicationStates.INSTALLING:case i.LocalDispatchApplicationStates.UPDATING:case i.LocalDispatchApplicationStates.UPDATE_REQUIRED:case i.LocalDispatchApplicationStates.REPAIRING:return u>0?i.LibraryApplicationActions.MOVE_UP:l?i.LibraryApplicationActions.RESUME:i.LibraryApplicationActions.PAUSE;case i.LocalDispatchApplicationStates.UP_TO_DATE:return i.LibraryApplicationActions.PLAY;case i.LocalDispatchApplicationStates.UNINSTALLING:return null}}if(null!=u&&u>0)return i.LibraryApplicationActions.MOVE_UP;if((0,n.isSupportedPlatform)())return i.LibraryApplicationActions.INSTALL;return null};var n=r(539331),i=r(770348)},37679:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,i=c(r(496486)),a=c(r(536211)),u=c(r(972247)),l=c(r(636602)),o=r(770348);function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var d,p="GameLibraryViewStore",y=o.TableSortDirections.ASCENDING,v=o.GameTableListKeys.LAST_PLAYED,h=!1,E=i.default.debounce((function(){h=!1;A.emitChange()}),200);var m=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;f(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.initialize=function(){var e,t=null!==(e=u.default.get(p))&&void 0!==e?e:{};if(null!=t.sortDirection&&null!=t.sortKey){y=t.sortDirection;v=t.sortKey}};!function(e,t,r){t&&s(e.prototype,t);r&&s(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"sortDirection",
get:function(){return y}},{key:"sortKey",get:function(){return v}},{key:"activeRowKey",get:function(){return d}},{key:"isNavigatingByKeyboard",get:function(){return h}}]);return t}(a.default.Store);m.displayName="GameLibraryViewStore";var A=new m(l.default,((n={})[o.ActionTypes.LIBRARY_TABLE_SORT_UPDATE]=function(e){var t=e.direction,r=e.key;y=t;v=r;u.default.set(p,{sortDirection:y,sortKey:v})},n[o.ActionTypes.LIBRARY_TABLE_ACTIVE_ROW_ID_UPDATE]=function(e){var t=e.key;if(e.isKeyboardEvent){h=!0;E()}d=t},n)),g=A;t.default=g},424956:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.WHITESPACE_REGEX=t.COMMAND_SUPPORTED_CHANNEL_TYPE_KEYS=void 0;var n=q(r(824390)),i=q(r(496486)),a=q(r(74978)),u=r(678928),l=q(r(648530)),o=q(r(791548)),c=r(872243),s=q(r(371732)),f=q(r(82572)),d=r(783494),p=q(r(19566)),y=r(828593),v=r(567186),h=q(r(759027)),E=q(r(644263)),m=q(r(433385)),A=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=G(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}(r(517286)),g=q(r(876874)),L=q(r(30098)),S=q(r(201292)),_=q(r(689389)),b=q(r(788739)),T=q(r(290629)),N=q(r(211136)),I=q(r(790597)),C=q(r(728429)),M=q(r(399561)),w=q(r(417501)),O=r(71246),P=q(r(895201)),D=q(r(656016)),U=q(r(827513)),R=r(8916),k=r(770348);function G(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(G=function(e){return e?r:t})(e)}function q(e){return e&&e.__esModule?e:{default:e}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]
;if(null==r)return;var n,i,a=[],u=!0,l=!1;try{for(r=r.call(e);!(u=(n=r.next()).done);u=!0){a.push(n.value);if(t&&a.length===t)break}}catch(e){l=!0;i=e}finally{try{u||null==r.return||r.return()}finally{if(l)throw i}}return a}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(){j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return j.apply(this,arguments)}function B(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function Q(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=K(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=new o.default("AutocompleteUtils"),H=function(){return!0},V=/(\t|\s)/;t.WHITESPACE_REGEX=V
;var W,Y=[],X=(W=r(675240).Z).MENTION_EVERYONE,J=W.MENTION_HERE,Z=W.LAUNCHABLE_APPLICATIONS,$=[A.GUILD_SELECTABLE_CHANNELS_KEY,A.GUILD_VOCAL_CHANNELS_KEY,k.ChannelTypes.GUILD_CATEGORY];t.COMMAND_SUPPORTED_CHANNEL_TYPE_KEYS=$;function ee(e){var t=e.name,r=e.exactQuery,i=e.containQuery,a=e.fuzzyQuery,u=e.fuzzy,l=void 0===u||u;try{if(r.test(t))return 10}catch(e){x.error(e)}try{if(i.test(t))return 5}catch(e){x.error(e)}return l&&(0,n.default)(a,t)?1:0}function te(e){return null!=(null==e?void 0:e.joinedAt)&&!e.isPending}function re(e){for(var t=e.query,r=e.members,i=e.limit,u=e.filter,l=C.default.getUsers(),o=I.default.getGuildId(),c=t.toLocaleLowerCase(),s=c.length,f=[],d=[],p=r.length,y=0,v=0;y<p;){var E=r[y],m=void 0,A=void 0;if(E instanceof h.default){A=E;m=g.default.getNick(o,A.id)}else{m=E.nick;A=l[E.userId]}if(null==u||u(A)){var L=A,S=L.usernameNormalized,_=L.username,b=null!=m&&""!==m?m.toLocaleLowerCase():null;if(S.substring(0,s)===c||null!=b&&(0,
R.stripDiacritics)(b.substring(0,s))===c||_.substring(0,s)===c||null!=b&&b.substring(0,s)===c)f.push({comparator:null!=b?b:S,score:10,nick:m,user:A});else if(v<50&&((0,n.default)(c,S)||null!=b&&(0,n.default)(c,b))){d.push({comparator:null!=b?b:S,score:1,nick:m,user:A});v+=1}}y+=1}f.sort(a.default);if(f.length<i){d.sort(a.default);f=f.concat(d.slice(0,Math.max(0,i-f.length)))}f.length>i&&(f.length=i);return f}function ne(e){switch(e){case d.StickerMetadataTypes.STICKER_NAME:return 11;case d.StickerMetadataTypes.CORRELATED_EMOJI:return 6;case d.StickerMetadataTypes.TAG:return 1;case d.StickerMetadataTypes.GUILD_NAME:case d.StickerMetadataTypes.PACK_NAME:return 8;default:return 1}}function ie(e,t,r){for(var n,i=0,a=null,u=Q(t);!(n=u()).done;){var l=n.value,o=ee({name:e,exactQuery:l.exactQuery,containQuery:l.containQuery,fuzzyQuery:l.queryLower,fuzzy:r});if(o>i){i=o;a=l}}null!=a&&(a.isFullMatch?t.length=0:t.splice(t.indexOf(a),1));return i}function ae(e,t){var r=E.default.getChannel(e)
;return null==e||null==r?[]:(0,i.default)(S.default.getMessages(e).toArray()).reverse().map((function(e){return e.author})).reject((function(e){return e.isNonUserBot()})).uniqBy((function(e){return e.id})).filter((function(e){var t=r.getGuildId();return null==t||te(g.default.getMember(t,e.id))})).map((function(e){var t=r.getGuildId(),n=null!=t&&g.default.getMember(t,e.id)||{};return{nick:n.nick||null,score:0,comparator:n.nick||e.username,user:e}})).take(t).value()}var ue={queryFriends:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=(e._fuzzy,e.filter);return re({query:t,members:T.default.getFriendIDs().map((function(e){return C.default.getUser(e)})).filter(O.isNotNullish),limit:n,filter:i})},queryDMUsers:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,i=(e._fuzzy,e.filter);return re({query:t,members:E.default.getDMUserIds().map((function(e){return C.default.getUser(e)})).filter(O.isNotNullish),limit:n,filter:i})},queryChannelUsers:function(e){
var t=e.channelId,r=e.query,n=e.limit,i=void 0===n?10:n,a=e.request,u=void 0===a||a,l=e.checkRecentlyTalkedOnEmptyQuery,o=void 0===l||l,c=E.default.getChannel(t);if(null==c)return[];var s,f=c.isThread()?E.default.getChannel(c.parent_id):null,d=null!=f?f:c;if(null==d)return[];if(d.isPrivate()){s=d.recipients.map((function(e){var t;return{userId:e,nick:null!==(t=T.default.getNickname(e))&&void 0!==t?t:null}}));var p=C.default.getCurrentUser();null!=p&&s.push({userId:p.id,nick:null})}else{if(0===r.length&&o){var y=ae(c.id,i);if(y.length>0)return y}s=g.default.getMembers(d.guild_id).filter(te);u&&P.default.requestMembers(d.guild_id,r,i)}return re({query:r,members:s,limit:i,filter:function(e){return d.isPrivate()||D.default.can({permission:k.Permissions.VIEW_CHANNEL,user:e,context:d})}})},queryGuildUsers:function(e){var t=e.guildId,r=e.query,n=e.limit,i=void 0===n?10:n,a=e.request,u=void 0===a||a,l=e.checkRecentlyTalkedOnEmptyQuery,o=void 0===l||l,c=e.filter
;if(null==L.default.getGuild(t))return[];if(0===r.length&&o){var s=ae(N.default.getChannelId(t),i);if(s.length>0)return s}var f=g.default.getMembers(t).filter(te);u&&r.length>0&&P.default.requestMembers(t,r,i);return re({query:r,members:f,limit:i,filter:c})},queryUsers:function(e,t,r,n,a){void 0===t&&(t=10);void 0===r&&(r=!0);void 0===n&&(n=!0);n&&e.length>0&&P.default.requestMembers(null,e,t);return re({query:e,members:(0,i.default)(C.default.getUsers()).values().value(),limit:t,filter:a})},queryChannels:function(e){var t=e.query,r=e.guildId,n=e.limit,l=void 0===n?k.MAX_AUTOCOMPLETE_RESULTS:n,o=e.fuzzy,c=void 0===o||o,s=e.filter,f=void 0===s?H:s,d=e.type,y=void 0===d?A.GUILD_SELECTABLE_CHANNELS_KEY:d,h=e.allowEmptyQueries,m=function(e,t){void 0===t&&(t=!1);var r=e.split(" ").filter((function(e){return""!==e||t})).map((function(e){var t=e.toLocaleLowerCase();return{queryLower:t,exactQuery:new RegExp("^"+U.default.escape(t),"i"),containQuery:new RegExp(U.default.escape(t),"i"),
isFullMatch:!1}}));if(e.includes(" ")){var n=e.toLocaleLowerCase();r.unshift({queryLower:n,exactQuery:new RegExp("^"+U.default.escape(n),"i"),containQuery:new RegExp(U.default.escape(n),"i"),isFullMatch:!0})}return r}(t,void 0!==h&&h);return(null!=r?(0,i.default)(A.default.getChannels(r)[y]).map((function(e){return e.channel})).concat(p.default.computeAllActiveJoinedThreads(r)):(0,i.default)(E.default.loadAllGuildAndPrivateChannelsFromDisk()).values().concat(p.default.computeAllActiveJoinedThreads())).map((function(e){var t,r;if(y!==e.type&&(y!==A.GUILD_SELECTABLE_CHANNELS_KEY||!(0,v.isGuildSelectableChannelType)(e.type))&&(y!==A.GUILD_VOCAL_CHANNELS_KEY||!(0,v.isGuildVocalChannelType)(e.type))||(0,v.isGuildSelectableChannelType)(e.type)&&!_.default.can(k.Permissions.VIEW_CHANNEL,e)||e.isVocal()&&!_.default.can(e.accessPermissions,e)||!f(e))return null;var n=B(m),i=ie(e.name.toLocaleLowerCase(),n,c);if(0===i)return null
;[null===(t=L.default.getGuild(e.guild_id))||void 0===t?void 0:t.toString().toLocaleLowerCase(),null===(r=E.default.getChannel(e.parent_id))||void 0===r?void 0:r.name.toLocaleLowerCase(),e.name.toLocaleLowerCase()].forEach((function(e){if(null==e||""===e)return null;var t=ie(e,n,!1);0!==t&&(i+=.5*t)}));1===n.length&&n[0].isFullMatch&&(n.length=0);return i>0&&0===n.length?{channel:e,score:i,comparator:(0,u.computeChannelName)(e,C.default,T.default)}:null})).filter(O.isNotNullish).sortBy((function(e){return e.channel.name})).sort(a.default).take(l).value()},queryGuilds:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,u=e.fuzzy,l=void 0===u||u,o=e.filter,c=void 0===o?H:o,s=""===t?"":t.toLocaleLowerCase(),f=new RegExp("^"+U.default.escape(s),"i"),d=new RegExp(U.default.escape(s),"i");return(0,i.default)(L.default.getGuilds()).values().map((function(e){if(c(e)){var t=ee({name:e.name.toLocaleLowerCase(),exactQuery:f,containQuery:d,fuzzyQuery:s,fuzzy:l});if(t>0)return{guild:e,score:t,
comparator:e.toString()}}return null})).filter(O.isNotNullish).sortBy((function(e){return e.guild.name})).sort(a.default).take(n).value()},queryGroupDMs:function(e){var t=e.query,r=(e._limit,e.fuzzy),n=void 0===r||r,l=e.filter,o=void 0===l?H:l,c=t.toLocaleLowerCase(),s=new RegExp("^"+U.default.escape(c),"i"),f=new RegExp(U.default.escape(c),"i"),d=w.default.getPrivateChannelIds(),p=E.default.getMutablePrivateChannels();return(0,i.default)(d).map((function(e){return p[e]})).map((function(e){if(!e.isMultiUserDM()||!o(e))return null;var t=ee({name:(0,u.computeChannelName)(e,C.default,T.default).toLocaleLowerCase(),exactQuery:s,containQuery:f,fuzzyQuery:c,fuzzy:n});return t>0?{channel:e,score:t,comparator:(0,u.computeChannelName)(e,C.default,T.default)}:null})).filter(O.isNotNullish).sort(a.default).value()},queryApplications:function(e){
var t=e.query,r=e.limit,n=void 0===r?10:r,u=e.fuzzy,l=void 0===u||u,o=e.filter,c=void 0===o?H:o,s=t.toLocaleLowerCase(),f=new RegExp("^"+U.default.escape(s),"i"),d=new RegExp(U.default.escape(s),"i"),p=Z();return(0,i.default)(p).map((function(e){var t=e.application;if(c(t)){var r=t.name.toLocaleLowerCase(),n=ee({name:r,exactQuery:f,containQuery:d,fuzzyQuery:s,fuzzy:l});if(n>0)return{application:t,score:n,comparator:r}}return null})).filter(O.isNotNullish).sort(a.default).take(n).value()},querySKUs:function(e){var t=e.query,r=e.limit,n=void 0===r?10:r,u=e.fuzzy,l=void 0===u||u,o=e.filter,c=void 0===o?H:o,s=t.toLocaleLowerCase(),f=new RegExp("^"+U.default.escape(s),"i"),d=new RegExp(U.default.escape(s),"i"),p=M.default.getSKUs();return(0,i.default)(p).values().map((function(e){if(e.type===k.SKUTypes.DURABLE_PRIMARY&&c(e)){var t=e.name.toLocaleLowerCase(),r=ee({name:t,exactQuery:f,containQuery:d,fuzzyQuery:s,fuzzy:l});if(r>0)return{sku:e,score:r,comparator:t}}return null
})).filter(O.isNotNullish).sort(a.default).take(n).value()},getRecentlyTalked:ae,queryMentionResults:function(e){var t=e.query,r=e.channel,a=e.canMentionEveryone,u=void 0!==a&&a,l=e.canMentionHere,o=void 0===l||l,c=e.canMentionUsers,s=void 0===c||c,f=e.canMentionRoles,d=void 0===f||f,p=e.includeAllGuildUsers,y=void 0!==p&&p,v=e.includeNonMentionableRoles,h=void 0!==v&&v,E=e.checkRecentlyTalkedOnEmptyQuery,m=void 0===E||E,A=e.limit,g=void 0===A?k.MAX_AUTOCOMPLETE_RESULTS:A,S=s?(y&&null!=r.guild_id?this.queryGuildUsers({guildId:r.guild_id,query:t,limit:g,checkRecentlyTalkedOnEmptyQuery:m}):this.queryChannelUsers({channelId:r.id,query:t,limit:g,checkRecentlyTalkedOnEmptyQuery:m})).map((function(e){return j({},e,{status:b.default.getStatus(e.user.id)})})):[],_=S.length,T=t.toLowerCase(),N=[];if(_<g&&d){var I=r.getGuildId(),C=L.default.getGuild(I);if(null!=C){(0,i.default)(C.roles).filter((function(e){var t=e.mentionable,r=e.name,i=e.id;return(t||u||h)&&(0,
n.default)(T,r.toLowerCase())&&i!==I})).take(g-_).forEach((function(e){N.push(e)}));_+=N.length}}var M=[];if(!r.isPrivate()&&u&&d){if(_<g&&(0,n.default)(T,X().test)){M.push(X());_+=1}o&&_<g&&(0,n.default)(T,J().test)&&M.push(J())}return{users:S,globals:M,roles:N}},queryGuildMentionResults:function(e){var t=e.query,r=e.guildId,a=e.canMentionEveryone,u=void 0!==a&&a,l=e.canMentionUsers,o=void 0===l||l,c=e.canMentionRoles,s=void 0===c||c,f=e.canMentionNonMentionableRoles,d=void 0!==f&&f,p=o?this.queryGuildUsers({guildId:r,query:t}).map((function(e){return j({},e,{status:b.default.getStatus(e.user.id)})})):[],y=p.length,v=t.toLowerCase(),h=[];if(y<k.MAX_AUTOCOMPLETE_RESULTS&&s){var E=L.default.getGuild(r);if(null!=E){(0,i.default)(E.roles).filter((function(e){var t=e.mentionable,i=e.name,a=e.id;return(t||u||d)&&(0,n.default)(v,i.toLowerCase())&&a!==r})).take(k.MAX_AUTOCOMPLETE_RESULTS-y).forEach((function(e){h.push(e)}));y+=h.length}}var m=[];if(u&&s){if(y<k.MAX_AUTOCOMPLETE_RESULTS&&(0,
n.default)(v,X().test)){m.push(X());y+=1}y<k.MAX_AUTOCOMPLETE_RESULTS&&(0,n.default)(v,J().test)&&m.push(J())}return{users:p,globals:m,roles:h}},queryChoice:function(e){var t=e.query,r=e.choices,n=e.limit,a=void 0===n?10:n,u=e.fuzzy,l=void 0===u||u,o=t.toLocaleLowerCase(),c=new RegExp("^"+U.default.escape(o),"i"),s=new RegExp(U.default.escape(o),"i"),f=(0,i.default)(r).map((function(e){var t=ee({name:e.displayName.toLocaleLowerCase(),exactQuery:c,containQuery:s,fuzzyQuery:o,fuzzy:l});return t>0?{choice:e,score:t}:null})).filter(O.isNotNullish).sortBy((function(e){return-1*e.score}));null!==a&&(f=f.take(a));return f.value()},queryChannelResults:function(e){var t=e.query,r=e.channel,n=e.type,i=void 0===n?A.GUILD_SELECTABLE_CHANNELS_KEY:n,a=e.channelTypes;return{channels:this.queryChannels({query:t,guildId:r.getGuildId(),limit:void 0,fuzzy:void 0,filter:function(e){return null==a||a.includes(e.type)},type:i,allowEmptyQueries:!0}).map((function(e){return e.channel}))}},
queryApplicationCommandChannelResults:function(e){var t=e.query,r=e.channel,n=e.channelTypes,i=e.limit,a=void 0===i?k.MAX_AUTOCOMPLETE_RESULTS:i;if(null==r.guild_id){var u=[];(null==n||n.includes(r.type))&&u.push(r);return{channels:u}}for(var o,c=[],s=Q($);!(o=s()).done;){var f=o.value;c=c.concat(this.queryChannels({query:t,guildId:r.guild_id,limit:a,fuzzy:!0,filter:function(e){return null==n||n.includes(e.type)},type:f,allowEmptyQueries:!0}))}c=c.filter((function(e){return"null"!==e.channel.id})).sort(l.default);c.length>a&&(c=c.slice(0,a));return{channels:c.map((function(e){return e.channel}))}},queryChoiceResults:function(e){var t=e.query,r=e.choices;return{choices:this.queryChoice({query:t,choices:r,limit:null}).map((function(e){return e.choice}))}},queryEmojiResults:function(e){var t=e.query,r=e.channel,n=e.intention,i=e.matchComparator;y.FrecencyUserSettingsActionCreators.loadIfNecessary();return{emojis:m.default.searchWithoutFetchingLatest(r,t,k.MAX_AUTOCOMPLETE_RESULTS,n,i)}},
queryStickers:function(e,t,r){void 0===t&&(t=!0);var n=z(void 0===r?[null,H]:r,2),a=n[0],u=n[1],l=f.default.stickerMetadata,o=C.default.getCurrentUser(),p=new Set,v=[];y.FrecencyUserSettingsActionCreators.loadIfNecessary();for(var h,E=function(){var e=h.value;if(""===e)return"continue";var r=e.toLocaleLowerCase(),n=(0,R.stripDiacritics)(r),i=new RegExp("^"+U.default.escape(n),"i"),y=new RegExp(""+U.default.escape(n),"i");l.forEach((function(e,n){var l=0,h=null,E=f.default.getStickerById(n);if(null!=E&&u(E,(0,c.getStickerSendability)(E,o,a))){for(var m,A=Q(e);!(m=A()).done;){var g=m.value,L=g.type,S=g.value,_=ne(L),b=0;if(t)S===r?b=10*_:i.test(S)?b=7*_:L!==d.StickerMetadataTypes.GUILD_NAME&&L!==d.StickerMetadataTypes.PACK_NAME&&L!==d.StickerMetadataTypes.STICKER_NAME||!y.test(S)||(b=5*_);else if(S===r){b=10*_;h=S}if(b>l){l=b;h=S}}var T=s.default.stickerFrecencyWithoutFetchingLatest.getScore(n);null!=T&&(l*=T/100);if(l>0&&null!=h&&!p.has(E.id)){p.add(E.id);v.push({sticker:E,comparator:h,
score:l})}}}))},m=Q(e);!(h=m()).done;)E();0===(v=(0,i.default)(v).sortBy((function(e){return-1*e.score})).value()).length&&(v=Y);return{stickers:v}},matchSentinel:function(e,t,r){return!V.test(t)&&e===r}};t.default=ue},895201:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=l(r(496486)),i=l(r(5387)),a=l(r(415275)),u=l(r(30098));function l(e){return e&&e.__esModule?e:{default:e}}var o,c=new i.default({maxAge:6e4});var s={requestMembers:function(e,t,r){void 0===r&&(r=10);var i=(null!=e?e:"")+":"+t;if(null==c.get(i)){c.set(i,!0);!function(e,t,r){null!=o&&clearTimeout(o);o=setTimeout((function(){var i=[],l=function(e){i.push(e.id)};if(null==e)n.default.forEach(u.default.getGuilds(),l);else{var o=u.default.getGuild(e);null!=o&&l(o)}i.length>0&&a.default.requestMembers(i,t.toLocaleLowerCase(),r)}),200)}(e,t,r)}}};t.default=s},675240:(e,t,r)=>{({value:!0});t.Z=void 0;var n=a(r(191013)),i=a(r(247001));function a(e){return e&&e.__esModule?e:{default:e}}var u={
MENTION_EVERYONE:function(){return{test:"everyone",text:"@everyone",description:i.default.Messages.MENTION_EVERYONE_AUTOCOMPLETE_DESCRIPTION}},MENTION_HERE:function(){return{test:"here",text:"@here",description:i.default.Messages.MENTION_HERE_AUTOCOMPLETE_DESCRIPTION}},LAUNCHABLE_APPLICATIONS:function(){return n.default.launchableApplicationViewItems}};t.Z=u}}]);
//# sourceMappingURL=7de5542d4f1e19577c5c.js.map