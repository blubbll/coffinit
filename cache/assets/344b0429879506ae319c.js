(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[46422],{997847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=c(n(496486)),l=c(n(795715)),u=c(n(536211)),o=c(n(636602)),i=c(n(191391)),s=c(n(408643)),d=n(770348),f=n(64072);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var v=null,m=null,h=f.SortOrder.LastMessage,g=[],S=[];function y(e,t,n){v=e;m=n;var a=s.default.getThreadIds(e,n),u=!1;if(a!==g){g=a;u=!0}if(h!==t){h=t;u=!0}if(!u)return!1;S=(0,r.default)(a).map((function(e){var t,n=e.channelId;return{channelId:n,pinned:e.pinned,lastMessageId:null!==(t=i.default.lastMessageId(n))&&void 0!==t?t:n}})).sort((function(e,t){return e.pinned&&!t.pinned?-1:!e.pinned&&t.pinned?1:h===f.SortOrder.LastMessage?l.default.compare(t.lastMessageId,e.lastMessageId):l.default.compare(t.channelId,e.channelId)})).value()}function _(){
return null!=v&&y(v,h,m)}var C=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(i.default);this.syncWith([s.default],_)};n.getThreadIds=function(e,t,n){y(e,t,n);return S};return t}(u.default.Store);C.displayName="ActiveForumPostSortStore";var E=new C(o.default,((a={})[d.ActionTypes.THREAD_DELETE]=_,a));t.default=E},316294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=o(n(536211)),l=o(n(636602)),u=n(770348);function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){i=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return i(e,t)}var s=new Set;var d=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;i(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(e){
null!=e&&(s=new Set(e))};n.hasDismissed=function(e){return s.has(e)};n.getState=function(){return s};return t}(r.default.PersistedStore);d.displayName="ForumChannelAdminOnboardingGuideStore";d.persistKey="ForumChannelAdminOnboardingGuideStore";var f=new d(l.default,((a={})[u.ActionTypes.ADMIN_ONBOARDING_GUIDE_DISMISS]=function(e){var t=e.channelId;s.add(t)},a));t.default=f},294296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getAllRolesRows=t.getAllExistingRolesWithPermission=t.doesRoleHavePermission=void 0;var a=u(n(267258)),r=n(289371),l=u(n(656016));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,n){var r;if(null==e.id)return!1;var u=l.default.computePermissionsForRoles({forceRoles:(r={},r[e.id]=e,r),context:n});return a.default.has(u,t)};t.doesRoleHavePermission=o;t.getAllRolesRows=function(e){return null==e.roles?[]:Object.values(e.roles).sort(r.sortRoles).map((function(e){return(0,r.getRoleRowData)(e)}))}
;t.getAllExistingRolesWithPermission=function(e,t,n){return Object.values(e.roles).filter((function(e){return(0,r.isAdmin)(e)||o(e,n,t)}))}},299565:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=S;m(n(667294));var a,r=p(n(824390)),l=n(536211),u=p(n(498773)),o=p(n(433385)),i=m(n(373970)),s=p(n(899068)),d=p(n(776360)),f=p(n(247001)),c=p(n(752992));function p(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a)
;return a}function h(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var g=function(e){var t=e.tag,n=t.id,a=t.name,r=t.emojiId,f=t.emojiName,p=(0,l.useStateFromStores)([o.default],(function(){return null!=r?o.default.getUsableCustomEmojiById(r):null})),v=null!=r||null!=f;return h(i.ComboboxItem,{value:t},n,h(i.ComboboxItem.Label,{},void 0,h("div",{className:c.default.inline},void 0,v?h(u.default,{className:c.default.emoji,emojiId:r,emojiName:f,animated:Boolean(null==p?void 0:p.animated)}):h(s.default,{className:c.default.emoji}),h(d.default,{strong:!0,size:d.default.Sizes.SIZE_16,color:d.default.Colors.HEADER_SECONDARY
},void 0,a))))};g.displayName="PopoutItem";function S(e){var t=e.parentChannel,n=e.appliedTags,a=e.onSelectTag,l=e.onClose;return h(i.default,{showScrollbar:!0,value:n,onChange:function(e){a(e);l()},placeholder:f.default.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER,"aria-label":f.default.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER},void 0,(function(e){return(n=e,t.availableTags.filter((function(e){return(0,r.default)(n.toLowerCase(),e.name.toLowerCase())}))).map((function(e){return h(g,{tag:e},e.id)}));var n}))}S.displayName="AddTagsPopout"},646422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=W;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null
;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=L(n(294184)),u=L(n(781629)),o=n(536211),i=L(n(822350)),s=n(391869),d=L(n(887174)),f=n(651510),c=n(819235),p=L(n(502546)),v=L(n(16941)),m=L(n(98633)),h=L(n(971639)),g=n(967965),S=L(n(776360)),y=n(521358),_=n(993442),C=L(n(997847)),E=L(n(408643)),N=L(n(649563)),O=n(973523),M=L(n(58385)),b=L(n(396805)),A=L(n(134875)),R=L(n(927510)),T=L(n(255940)),I=L(n(821264)),P=L(n(613558)),w=L(n(214160)),F=L(n(831294)),D=n(770348),k=n(64072),j=L(n(247001)),x=L(n(831013));function L(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}function U(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){
for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(a=n.next()).done);u=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){o=!0;r=e}finally{try{u||null==n.return||n.return()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var G=(0,i.default)({id:"2022-02_forum_stuff",label:"forum stuff",kind:"user",defaultConfig:{card:P.default,fixedWidth:!1},treatments:[{id:1,label:"original variant",config:{card:R.default,fixedWidth:!0}},{id:2,label:"new variant, no message",config:{card:T.default,fixedWidth:!0}},{id:3,label:"new variant, with message",config:{card:I.default,fixedWidth:!0}},{id:4,label:"latest variant",config:{card:P.default,fixedWidth:!1}}]});function W(e){var t,n=e.channel,a=z(r.useState(k.SortOrder.LastMessage),2),u=a[0],i=a[1],s=r.useRef(null),d=z(r.useState(null),2),v=d[0],m=d[1],g=function(e,t,n){var a=(0,o.useStateFromStores)([C.default],(function(){return C.default.getThreadIds(e.id,t,n)})),r=(0,
f.useArchivedThreads)(e,k.SortOrder.LastMessage,n),l=r.threadIds,u=r.canLoadMore,i=r.loadMore,s=r.loading;(0,O.useLoadForumUnreadCounts)(e,n);return{activeThreadIds:a,archivedThreadIds:l,canLoadMore:u,loadMore:i,loading:s}}(n,u,v),S=g.activeThreadIds,_=g.archivedThreadIds,E=g.canLoadMore,N=g.loadMore,R=g.loading,T=function(){var e=r.useRef(64),t=z(r.useState({}),2),n=(t[0],t[1]),a=r.useCallback((function(t){if(t!==e.current){e.current=t;n({})}}),[]);return{editorHeight:e,setEditorHeight:a}}(),I=T.editorHeight,P=T.setEditorHeight,w=function(){var e=r.useRef({}),t=z(r.useState({}),2),n=(t[0],t[1]),a=r.useCallback((function(t,a){if(a!==e.current[t]){e.current[t]=a;n({})}}),[]);return{cardHeights:e,setCardHeight:a}}(),L=w.cardHeights,H=w.setCardHeight,B=function(e,t,n){var a=U(F.default,{channel:e,tagFilter:t,setTagFilter:n}),l=function(e){var t=(0,c.useIsThreadModerator)(e),n=(0,o.useStateFromStores)([p.default],(function(){
return p.default.getSection(e.id)===D.ChannelSections.SEARCH||null!=p.default.getSidebarState(e.id)})),a=null!=e.topic&&e.topic.length>0;return!n&&(a||t)}(e),u=function(e){var t=(0,O.useCanManageChannel)(e),n=(0,o.useStateFromStores)([p.default],(function(){return p.default.getSection(e.id)===D.ChannelSections.SEARCH||null!=p.default.getSidebarState(e.id)})),a=e.availableTags.length>0;return!n&&(a||t)}(e),i=r.useRef(null),s=z(r.useState(!1),2),d=s[0],f=s[1],v=z(r.useState(1),2),m=v[0],h=v[1];r.useLayoutEffect((function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.offsetHeight;null!=t&&0!==t&&h(t)}),[h,d]);var g=r.useCallback((function(e){f(e)}),[]),S=r.useCallback((function(t,n){if(!n)return U("div",{className:x.default.sidebarContainer,style:{width:344}});var o=r.createElement("div",{className:x.default.sidebarContainer,ref:i},l&&U(A.default,{expanded:d,channel:e,className:x.default.sidebarCard,onExpandClick:g}),u&&a);return t?o:U("div",{className:x.default.noListContainer
},void 0,U("div",{"aria-hidden":!0,className:x.default.sidebarContentSpacer},"---list-sidebar-spacer"),o)}),[d,e,l,u,g,t,n]);return l||u?{sidebarHeight:m,renderSidebar:S}:{}}(n,v,m),W=B.sidebarHeight,$=B.renderSidebar,K=G.useExperiment({}),X=K.card,q=K.fixedWidth,Q=S.length>0,J=Q||_.length>0,ee=(0,O.useCanManageChannel)(n),te=r.useCallback((function(e){return 2===e.section&&Q?U("div",{className:(0,l.default)(x.default.row,x.default.archivedDividerRow)},"section-divider",U("div",{className:x.default.emptyMainCard},void 0,U(h.default,{size:h.default.Sizes.SIZE_12,className:x.default.archivedDivider,uppercase:!0},void 0,j.default.Messages.FORUM_SECTION_ARCHIVED))):null}),[Q]),ne=U(M.default,{channel:n,hasAnyThread:J}),ae=r.useCallback((function(e){if(0===e.section)return U(Y,{channel:n,setHeight:P,sortOrder:u,setSortOrder:i,isEmpty:0===S.length},e.section,!R&&(ee?ne:!J&&U(b.default,{channelName:n.name,guildId:n.guild_id})));var t=1===e.section?S[e.row].channelId:_[e.row];return U("div",{
className:x.default.row},e.section+"-"+t,U(X,{className:x.default.mainCard,threadId:t,gotoThread:Z,sortOrder:u,setHeight:H}))}),[n,S,_,u,P,H,X,R,ee,J]),re=r.useCallback((function(){var e,t=null===(e=s.current)||void 0===e?void 0:e.getScrollerState();if(null!=t){var n=t.scrollTop+t.offsetHeight;t.scrollHeight-n<200&&N()}}),[N]);return U("div",{className:(0,l.default)(x.default.container,(t={},t[x.default.fixedWidth]=q,t))},void 0,U(V,{channel:n}),r.createElement(y.ListAuto,{ref:s,className:x.default.list,sections:[1,S.length,_.length],sectionHeight:function(e){return 2===e&&S.length>0?48:0},rowHeight:function(e,t){if(0===e)return I.current;var n=1===e?S[t].channelId:_[t],a=L.current[n];return null==a?104:a+8},sidebarHeight:W,renderRow:ae,renderSection:te,renderSidebar:$,chunkSize:15,onScroll:E?re:void 0,paddingBottom:24}))}W.displayName="ForumChannel";function Z(e,t){t?(0,s.transitionToThread)(e,k.OpenThreadAnalyticsLocations.BROWSER):d.default.openThreadSidebarForViewing(e)}
function V(e){var t=e.channel,n=r.useCallback((function(){N.default.resort(t.id)}),[t.id]),a=(0,o.useStateFromStores)([E.default],(function(){return E.default.newThreadCount()}));return 0===a?null:U(v.default,{className:x.default.newPostsButton,onClick:n},void 0,U(S.default,{className:x.default.newPostsButtonText,color:S.default.Colors.BRAND,size:S.default.Sizes.SIZE_16},void 0,j.default.Messages.NEW_FORUM_POST_COUNT.format({count:a})))}V.displayName="NewPostsButton";var $=U(m.default,{});function Y(e){var t,n=e.channel,a=e.setHeight,o=e.sortOrder,i=e.setSortOrder,s=e.isEmpty,d=e.children,f=(0,c.useCanStartThread)(n),p=r.useRef(null),v=r.useCallback((function(){(0,u.default)((function(){null!=p.current&&a(p.current.offsetHeight)}))}),[a]);r.useLayoutEffect(v,[v,s,f]);(0,_.useComponentAction)({event:D.ComponentActions.REMEASURE_TARGET,handler:v});return r.createElement("div",{className:(0,l.default)(x.default.row,x.default.headerRow,(t={},t[x.default.noForm]=!f,t)),key:"create-form",
ref:p},U(_.ComponentDispatchGroupProvider,{},void 0,U("div",{className:(0,l.default)(x.default.mainCard,x.default.header)},void 0,f?U(w.default,{parentChannel:n,onChange:v}):null),s||null==o||null==i?null:U("div",{className:x.default.sortContainer},void 0,$,U(g.SingleSelect,{className:x.default.sort,popoutClassName:x.default.sortPopout,value:o,onChange:function(e){return i(e)},options:[{value:k.SortOrder.LastMessage,label:j.default.Messages.FORUM_SORT_ACTIVITY},{value:k.SortOrder.Creation,label:j.default.Messages.FORUM_SORT_CREATION}]})),U("div",{className:x.default.headerCard},void 0,d)))}Y.displayName="ForumChannelHeader"},58385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=D(n(730381)),u=n(248088),o=D(n(200755)),i=D(n(267258)),s=D(n(795715)),d=n(536211),f=D(n(636602)),c=D(n(968494)),p=n(555929),v=D(n(235879)),m=D(n(250490)),h=n(289371),g=D(n(30098)),S=D(n(16941)),y=D(n(992193)),_=D(n(259530)),C=D(n(700113)),E=D(n(863771)),N=n(194322),O=n(598671),M=D(n(971639)),b=D(n(776360)),A=n(956506),R=D(n(316294)),T=n(294296),I=n(973523),P=n(770348),w=D(n(247001)),F=D(n(487171));function D(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return
;var a,r,l=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(a=n.next()).done);u=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){o=!0;r=e}finally{try{u||null==n.return||n.return()}finally{if(o)throw r}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function L(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function H(e){return function(){var t=this,n=arguments
;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){L(l,a,r,u,o,"next",e)}function o(e){L(l,a,r,u,o,"throw",e)}u(void 0)}))}}function U(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function z(){z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return z.apply(this,arguments)}var B={width:20,height:20},G={width:20,height:20,borderRadius:10},W=function(){function e(){this.currentIndex=0;this.steps=[]}var t=e.prototype;t.addStep=function(e){++this.currentIndex;this.steps.push(z({
index:this.currentIndex},e))};t.getSteps=function(){return this.steps};t.isAllDone=function(){return this.steps.every((function(e){return e.isDone}))};return e}(),Z=function(e,t,a){return r.useMemo((function(){var l=new W;null!=e&&null!=t&&l.addStep(function(e,t){var a=(0,m.default)(t)?i.default.combine(P.Permissions.VIEW_CHANNEL,P.Permissions.SEND_MESSAGES):P.Permissions.SEND_MESSAGES,l=null!=e?(0,T.getAllExistingRolesWithPermission)(e,t,a).filter((function(n){return t.permissionOverwrites.hasOwnProperty(n.id)||(0,h.isEveryoneRoleId)(e.id,n.id)})):[],u=l.length>0;return{name:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_TITLE,description:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_DESCRIPTION,isDone:u,children:u?U($,{guild:e,roles:l}):null,clickHandler:function(){(0,N.openModalLazy)(H(regeneratorRuntime.mark((function u(){var o,i;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:u.next=2
;return Promise.all([n.e(40532),n.e(36776)]).then(n.bind(n,836776));case 2:o=u.sent;i=o.default;return u.abrupt("return",(function(n){return r.createElement(i,z({},n,{channel:t,guild:e,permission:a,currentSelectedRoles:l}))}));case 5:case"end":return u.stop()}}),u)}))),{modalKey:"SEND_MESSAGE_ROLE_PERMISSION_FIX_MODAL_KEY",onCloseRequest:P.NOOP_NULL})}}}(e,t));l.addStep(function(e){var t=null!=e.topic&&e.topic.length>0;return{name:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_TITLE,description:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_DESCRIPTION,clickHandler:function(){c.default.open(e.id,void 0,P.ChannelSettingsSubsections.TOPIC)},isDone:t}}(t));l.addStep(function(e){return{name:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_TITLE,description:w.default.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_DESCRIPTION,clickHandler:function(){A.ComponentDispatch.dispatch(P.ComponentActions.FOCUS_COMPOSER_TITLE)},isDone:e}
}(a));return l}),[t,e,a])},V=function(e){var t=s.default.extractTimestamp(e);return(0,l.default)().isBefore((0,l.default)(t).add(l.default.duration(15,"days")))},$=function(e){var t=e.guild,n=e.roles;return U("div",{className:F.default.rolesList,"aria-label":w.default.Messages.ROLES_LIST.format({numRoles:n.length})},void 0,n.map((function(e){return U(p.MemberRole,{role:e,canRemove:!1,onRemove:P.NOOP_NULL,guildId:t.id,className:F.default.rolePill},e.id)})))};$.displayName="RolesList";var Y={mass:1,tension:250,friction:18,clamp:!0},K=function(e){var t=e.hasAnyThread,n=e.channel,a=(0,d.useStateFromStores)([g.default],(function(){return g.default.getGuild(n.getGuildId())})),l=(0,I.useCanManageChannel)(n),i=function(){var e=j(r.useState(!0),2),t=e[0],n=e[1],a=j(r.useState(!0),2),l=a[0],o=a[1],i=(0,d.useStateFromStores)([v.default],(function(){return v.default.useReducedMotion}));return{transitions:(0,u.useTransition)(t,{keys:function(e){return e?"shown":"hidden"},config:Y,from:{opacity:0},
enter:{opacity:1},leave:{opacity:0},unique:!0,immediate:i,onRest:function(){t||o(!1)}}),shouldMount:l,setVisible:n}}(),s=i.transitions,c=i.shouldMount,p=i.setVisible,m=R.default.hasDismissed(n.id)||!V(n.id),h=function(e,t){return r.useCallback((function(){t(!1);return f.default.dispatch({type:P.ActionTypes.ADMIN_ONBOARDING_GUIDE_DISMISS,channelId:e})}),[e,t])}(n.id,p),N=Z(a,n,t),T=N.isAllDone(),D=r.useCallback((function(e){var t;null===(t=e.clickHandler)||void 0===t||t.call(e)}),[]);!function(e,t,n){r.useEffect((function(){V(e)||t||f.default.wait((function(){n()}))}),[e,t,n])}(n.id,m,h);!function(e,t,n){var a=r.useRef(0);r.useEffect((function(){e&&!t?a.current=setTimeout((function(){n()}),6e4):clearTimeout(a.current);return function(){return clearTimeout(a.current)}}),[e,t,n])}(T,m,h);!function(e,t,n){r.useEffect((function(){return function(){e&&!t&&n()}}),[e,t,n])}(T,m,h);!function(e){
var t=e.isAllDone,n=e.isAlreadyDismissed,a=e.canManageChannel,l=e.shouldMount,u=e.guild,o=e.channel,i=r.useCallback((function(){A.ComponentDispatch.dispatch(P.ComponentActions.REMEASURE_TARGET)}),[]);r.useEffect((function(){i()}),[i,t,n,a,l,null==u?void 0:u.roles,o.id,o.permissionOverwrites])}({isAllDone:T,isAlreadyDismissed:m,canManageChannel:l,shouldMount:c,guild:a,channel:n});if(null==a)return null;if(m)return null;if(!l)return null;var k=U(S.default,{onClick:h,className:F.default.closeButton,"aria-label":w.default.Messages.DISMISS},void 0,U(_.default,{className:F.default.closeIcon}));return r.createElement(r.Fragment,null,s((function(e,t){return t?U(u.animated.div,{style:e,className:F.default.container},void 0,c?U("div",{className:F.default.wrapper},void 0,U("div",{className:F.default.headerRow},void 0,U(M.default,{tag:M.default.Tags.H3,size:M.default.Sizes.SIZE_16,className:F.default.header},void 0,w.default.Messages.GET_STARTED),U(b.default,{size:b.default.Sizes.SIZE_12,
className:F.default.visibilityInfo},void 0,U(C.default,{width:12,height:12,className:F.default.icon}),w.default.Messages.FORUM_CHANNEL_ONBOARDING_VISIBILITY),k),U("ol",{className:F.default.checklist},void 0,N.getSteps().map((function(e){return U(S.default,{tag:"li","aria-label":e.name,onClick:function(){return D(e)},className:F.default.stepContainer},"onboard-setp-"+e.index,e.isDone?U(O.IconBadge,{color:o.default.STATUS_POSITIVE_BACKGROUND,icon:y.default,style:G,className:F.default.stepStatus}):U(O.NumberBadge,{count:e.index,color:e.isDone?o.default.BACKGROUND_ACCENT:o.default.BUTTON_OUTLINE_BRAND_BACKGROUND_HOVER,style:B,className:F.default.stepNumber}),U("div",{className:F.default.step},void 0,U(b.default,{size:b.default.Sizes.SIZE_16,className:F.default.stepName},void 0,e.name),U(b.default,{size:b.default.Sizes.SIZE_14,className:F.default.stepDescription},void 0,e.description),e.children),U(E.default,{width:12,className:F.default.stepStatus}))})))):null):null})))};t.default=K},
396805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=E;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=v(n(956117)),u=v(n(547058)),o=v(n(571830)),i=v(n(863771)),s=n(194322),d=v(n(971639)),f=v(n(776360)),c=v(n(247001)),p=v(n(620771));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(){g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return g.apply(this,arguments)}function S(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){S(l,a,r,u,o,"next",e)}function o(e){S(l,a,r,u,o,"throw",e)}u(void 0)}))}}var _=h(u.default,{width:30,height:30}),C=h(i.default,{width:12});function E(e){var t=e.channelName,a=e.guildId;return h("div",{
className:p.default.container},void 0,h("div",{className:p.default.iconContainer},void 0,h("div",{className:p.default.icon},void 0,_),h(o.default,{className:p.default.stars})),h(d.default,{className:p.default.header,size:d.default.Sizes.SIZE_16},void 0,c.default.Messages.FORUM_EMPTY_STATE_TITLE),h(f.default,{color:f.default.Colors.HEADER_SECONDARY},void 0,c.default.Messages.FORUM_EMPTY_STATE_DESCRIPTION.format({channelName:t})),h(l.default,{look:l.default.Looks.BLANK,size:l.default.Sizes.MIN,color:l.default.Colors.GREEN,onClick:function(){(0,s.openModalLazy)(y(regeneratorRuntime.mark((function e(){var t,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([n.e(40532),n.e(83074)]).then(n.bind(n,583074));case 2:t=e.sent;l=t.default;return e.abrupt("return",(function(e){return r.createElement(l,g({},e,{guildId:a}))}));case 5:case"end":return e.stop()}}),e)}))))},className:p.default.cta,innerClassName:p.default.button
},void 0,c.default.Messages.FORUM_EMPTY_STATE_CTA,C))}E.displayName="ForumChannelEmptyState"},134875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.expanded,n=e.onExpandClick,a=e.channel,v=e.className,m=(C=r.useState(!1),E=2,function(e){if(Array.isArray(e))return e}(C)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(a=n.next()).done);u=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){o=!0;r=e}finally{try{u||null==n.return||n.return()}finally{if(o)throw r}}return l}}(C,E)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(C,E)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=m[0],y=m[1],_=r.useRef(null);var C,E;r.useLayoutEffect((function(){if(null!=_.current){var e=_.current.clientHeight>=232;e!==S&&y(e)}}),[t,S,a.topic]);var N=r.useCallback((function(){n(!0)}),[n]);return null!=a.topic&&a.topic.length>0?h("div",{className:v},void 0,h(d.default,{size:d.default.Sizes.SIZE_16},void 0,c.default.Messages.FORUM_CHANNEL_TOPIC_HEADING),h(f.default,{selectable:!0,size:f.default.Sizes.SIZE_14,color:f.default.Colors.HEADER_SECONDARY,className:p.default.guidelines,style:t?{}:{maxHeight:232}},void 0,r.createElement("div",{ref:_},u.default.parseTopic(a.topic,!0,{channelId:a.id}))),!t&&S?h(i.default,{className:p.default.showMore,onClick:N},void 0,h(f.default,{size:f.default.Sizes.SIZE_14,color:f.default.Colors.BRAND,className:p.default.showMoreText
},void 0,c.default.Messages.FORUM_CHANNEL_TOPIC_SHOW_MORE,h(s.default,{className:p.default.showMoreIcon,width:16,height:16}))):null):h("div",{className:v},void 0,h(d.default,{size:d.default.Sizes.SIZE_16},void 0,c.default.Messages.FORUM_CHANNEL_TOPIC_MISSING_HEADING),h(f.default,{size:f.default.Sizes.SIZE_14,color:f.default.Colors.HEADER_SECONDARY,className:p.default.description},void 0,c.default.Messages.FORUM_CHANNEL_TOPIC_MISSING_DESCRIPTION),h(o.default,{className:p.default.cta,onClick:function(){return l.default.open(a.id)}},void 0,c.default.Messages.FORUM_CHANNEL_TOPIC_MISSING_CTA))};var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null
;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),l=v(n(968494)),u=v(n(268389)),o=v(n(956117)),i=v(n(16941)),s=v(n(738133)),d=v(n(971639)),f=v(n(776360)),c=v(n(247001)),p=v(n(381900));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}},255940:(e,t,n)=>{"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=L(n(667294)),l=j(n(294184)),u=j(n(441143)),o=n(659779),i=n(536211),s=n(378158),d=j(n(498773)),f=j(n(786630)),c=L(n(538930)),p=j(n(235879)),v=j(n(916372)),m=n(894826),h=j(n(502546)),g=j(n(644263)),S=j(n(689389)),y=j(n(191391)),_=j(n(949898)),C=j(n(16941)),E=j(n(388742)),N=j(n(37985)),O=j(n(126344)),M=j(n(810919)),b=j(n(971639)),A=j(n(776360)),R=j(n(152731)),T=n(973523),I=n(988298),P=j(n(487213)),w=n(770348),F=n(173652),D=j(n(247001)),k=j(n(611338));function j(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function L(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}function H(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function U(){U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return U.apply(this,arguments)}function z(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function B(e){
return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){z(l,a,r,u,o,"next",e)}function o(e){z(l,a,r,u,o,"throw",e)}u(void 0)}))}}var G=r.memo((function(e){var t,a=e.threadId,d=e.gotoThread,f=e.className,c=e.sortOrder,p=e.setHeight,v=(0,i.useStateFromStores)([g.default],(function(){return g.default.getChannel(a)}));(0,u.default)(null!=v,"the thread should not be null here, a store must have missed an update");var m=r.useRef(null),S=(0,i.useStateFromStores)([h.default],(function(){return h.default.getCurrentSidebarChannelId(v.parent_id)===v.id})),_=(0,I.useFirstForumPostMessage)(v).firstMessage,E=(0,T.useFormumPostMarkup)(_).firstMedia,N=(0,T.useMessageCount)(v).renderedMessageCount,O=(0,i.useStateFromStores)([y.default],(function(){return y.default.isForumPostUnread(v.id)})),M=(0,i.useStateFromStores)([y.default],(function(){return y.default.hasSeenBefore(v.id,v.parent_id)})),b=r.useRef(null);r.useLayoutEffect((function(){
null!=m.current&&p(a,m.current.offsetHeight)}),[a,f,_,p,E]);return H(C.default,{innerRef:m,"aria-label":D.default.Messages.FORUM_POST_ARIA_LABEL.format({title:v.name,count:N}),className:(0,l.default)(k.default.container,f,(t={},t[k.default.isOpen]=S,t[k.default.isRead]=!O,t[k.default.neverSeenBefore]=!M,t)),onClick:function(e){var t;(0,o.isElement)(e.target)&&(null===(t=b.current)||void 0===t?void 0:t.contains(e.target))||d(v,e.shiftKey)},onContextMenu:function(e){return(0,s.openContextMenuLazy)(e,B(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return n.e(7699).then(n.bind(n,818228));case 2:t=e.sent;a=t.default;return e.abrupt("return",(function(e){return r.createElement(a,U({},e,{channel:v}))}));case 5:case"end":return e.stop()}}),e)}))))}},void 0,H("div",{className:k.default.left},void 0,H(W,{channel:v}),H(Z,{channel:v}),H($,{channel:v,firstMessage:_,facepileRef:b,sortOrder:c
})),null==E?null:H(J,{channel:v,firstMedia:E}))}));t.default=G;function W(e){var t,n,a=e.channel,r=(0,T.useForumPostCreator)(a),l=r.user,u=r.author,o=(0,T.useFirstAppliedTag)(a),i=null!=o,s=a.hasFlag(F.ChannelFlags.PINNED),d=i||s;return H("div",{className:k.default.header},void 0,null==l?H("div",{className:k.default.avatarPlaceholder}):H(c.default,{className:k.default.posterAvatar,user:l,size:c.Sizes.SIZE_16}),H(A.default,{size:A.default.Sizes.SIZE_14,color:A.default.Colors.HEADER_PRIMARY,className:k.default.authorName,style:{color:null==u?void 0:u.colorString}},void 0,null!==(t=null!==(n=null==u?void 0:u.nick)&&void 0!==n?n:null==l?void 0:l.username)&&void 0!==t?t:""),d?H("div",{className:k.default.tags},void 0,H("span",{className:k.default.bullet},void 0,"•"),i&&H(P.default,{tag:o,size:P.default.Sizes.SMALL}),s&&H(A.default,{size:A.default.Sizes.SIZE_12,color:A.default.Colors.BRAND},void 0,H(O.default,{className:k.default.pinIcon,width:20,height:20}))):null)}
W.displayName="ForumPostHeader";function Z(e){var t=e.channel;return H("div",{className:k.default.body},void 0,H(b.default,{className:k.default.title,size:b.default.Sizes.SIZE_20,color:A.default.Colors.HEADER_PRIMARY},void 0,t.name))}Z.displayName="ForumPostBody";var V=H(M.default,{themed:!0,dotRadius:2});function $(e){var t=e.channel,n=e.facepileRef,a=e.firstMessage,r=e.sortOrder,l=(0,T.useTypingUserIds)(t);return H("div",{className:k.default.footer},void 0,H(K,{channel:t}),H("span",{className:k.default.bullet},void 0,"•"),H(X,{firstMessage:a}),l.length>0?H("div",{className:k.default.typing},void 0,H(Q,{channel:t,userIds:l,facepileRef:n}),H("div",{className:k.default.dots},void 0,V),H(f.default,{channel:t,className:k.default.typingUsers,renderDots:!1})):H(q,{channel:t,sortOrder:r}))}$.displayName="ForumPostFooter";var Y=H(N.default,{width:16,height:16});function K(e){var t=e.channel,n=(0,T.useMessageCount)(t),a=n.renderedMessageCount,r=n.displayedUnreadCount;return H("div",{
className:k.default.messageCountBox},void 0,H("span",{className:k.default.messageCountIcon},void 0,Y),H(A.default,{className:k.default.messageCount,size:A.default.Sizes.SIZE_14,color:A.default.Colors.CUSTOM},void 0,a),null==r?null:H(A.default,{className:k.default.newMessageCount,size:A.default.Sizes.SIZE_14,color:A.default.Colors.BRAND},void 0,"(",D.default.Messages.FORUM_POST_MESSAGE_COUNT_SHORT.format({count:r}),")"))}K.displayName="MessageCount";function X(e){var t,n=e.firstMessage,a=(0,T.useMostUsedReaction)(n),l=a.emoji,u=a.count;return 0===u?null:r.createElement(r.Fragment,null,H(d.default,{className:k.default.reaction,emojiId:l.id,emojiName:l.name,animated:l.animated},null!==(t=l.id)&&void 0!==t?t:l.name),H(A.default,{className:k.default.reactionCount,size:A.default.Sizes.SIZE_14,color:A.default.Colors.HEADER_SECONDARY},void 0,u),H("span",{className:k.default.bullet},void 0,"•"))}function q(e){var t=e.sortOrder,n=e.channel,a=(0,T.useLastActiveTimestamp)(n,t);return H(A.default,{
className:k.default.activityText,size:A.default.Sizes.SIZE_14,color:A.default.Colors.HEADER_SECONDARY},void 0,a)}q.displayName="ActiveAgoTime";function Q(e){var t=e.channel,n=e.userIds,a=e.facepileRef,l=(0,T.useFacepileUsers)(t,n);return r.createElement("div",{ref:a},H(R.default,{className:k.default.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:l,max:5,size:16,hideMoreUsers:!0,showUserPopout:!0}))}Q.displayName="Facepile";function J(e){var t,n,a,r=e.channel,u=e.firstMedia,o=(0,i.useStateFromStores)([_.default],(function(){return _.default.isFocused()})),s=(0,i.useStateFromStores)([S.default],(function(){return S.default.can(w.Permissions.MANAGE_MESSAGES,r)})),d=(0,i.useStateFromStores)([p.default],(function(){return p.default.useReducedMotion})),f=m.GifAutoPlay.useSetting()&&!d,c=m.RenderSpoilers.useSetting(),h=u.src,g=u.width,y=u.height,C=u.spoiler,N=u.alt,O=C&&!(0,v.default)(c,s);y>g?a=80:n=80;return H("div",{className:k.default.bodyMedia},void 0,H(E.default,{
src:h,maxHeight:n,maxWidth:a,width:g,height:y,alt:null!=N&&O?D.default.Messages.SPOILER_HIDDEN_A11Y_LABEL:N,autoPlay:f,shouldAnimate:!O&&o,className:k.default.thumbnailContainer,imageClassName:(0,l.default)((t={},t[k.default.spoiler]=O,t))}))}J.displayName="ForumPostMediaPreview"},821264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var a,r=U(n(667294)),l=L(n(294184)),u=L(n(441143)),o=n(659779),i=n(536211),s=n(378158),d=L(n(498773)),f=L(n(786630)),c=U(n(538930)),p=L(n(235879)),v=L(n(916372)),m=n(894826),h=L(n(502546)),g=L(n(644263)),S=L(n(689389)),y=L(n(191391)),_=L(n(290629)),C=L(n(949898)),E=L(n(16941)),N=L(n(388742)),O=L(n(37985)),M=L(n(126344)),b=n(961365),A=L(n(810919)),R=L(n(971639)),T=L(n(776360)),I=L(n(152731)),P=n(973523),w=n(988298),F=L(n(487213)),D=n(770348),k=n(173652),j=L(n(247001)),x=L(n(991786));function L(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null
;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}function z(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function B(){B=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return B.apply(this,arguments)}function G(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){G(l,a,r,u,o,"next",e)}function o(e){G(l,a,r,u,o,"throw",e)}u(void 0)}))}}var Z=r.memo((function(e){var t,a=e.threadId,d=e.gotoThread,f=e.className,c=e.sortOrder,p=e.setHeight,v=(0,i.useStateFromStores)([g.default],(function(){return g.default.getChannel(a)}));(0,u.default)(null!=v,"the thread should not be null here, a store must have missed an update");var m=r.useRef(null),S=(0,i.useStateFromStores)([h.default],(function(){return h.default.getCurrentSidebarChannelId(v.parent_id)===v.id})),_=(0,w.useFirstForumPostMessage)(v).firstMessage,C=(0,
P.useFormumPostMarkup)(_),N=C.content,O=C.firstMedia,M=(0,P.useMessageCount)(v).renderedMessageCount,b=(0,i.useStateFromStores)([y.default],(function(){return y.default.isForumPostUnread(v.id)})),A=(0,i.useStateFromStores)([y.default],(function(){return y.default.hasSeenBefore(v.id,v.parent_id)})),R=r.useRef(null);r.useLayoutEffect((function(){null!=m.current&&p(a,m.current.offsetHeight)}),[a,f,_,p,O,N]);return z(E.default,{innerRef:m,"aria-label":j.default.Messages.FORUM_POST_ARIA_LABEL.format({title:v.name,count:M}),className:(0,l.default)(x.default.container,f,(t={},t[x.default.isOpen]=S,t[x.default.isRead]=!b,t[x.default.neverSeenBefore]=!A,t)),onClick:function(e){var t;(0,o.isElement)(e.target)&&(null===(t=R.current)||void 0===t?void 0:t.contains(e.target))||d(v,e.shiftKey)},onContextMenu:function(e){return(0,s.openContextMenuLazy)(e,W(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2
;return n.e(7699).then(n.bind(n,818228));case 2:t=e.sent;a=t.default;return e.abrupt("return",(function(e){return r.createElement(a,B({},e,{channel:v}))}));case 5:case"end":return e.stop()}}),e)}))))}},void 0,z("div",{className:x.default.left},void 0,z(V,{channel:v}),z($,{channel:v,firstMessage:_,content:N,hasMediaAttachment:null!=O}),z(X,{channel:v,firstMessage:_,facepileRef:R,sortOrder:c})),null==O?null:z(ne,{channel:v,firstMedia:O}))}));t.default=Z;function V(e){var t,n,a=e.channel,r=(0,P.useForumPostCreator)(a),l=r.user,u=r.author,o=(0,P.useFirstAppliedTag)(a),i=null!=o,s=a.hasFlag(k.ChannelFlags.PINNED),d=i||s;return z("div",{className:x.default.header},void 0,null==l?z("div",{className:x.default.avatarPlaceholder}):z(c.default,{className:x.default.posterAvatar,user:l,size:c.Sizes.SIZE_16}),z(T.default,{size:T.default.Sizes.SIZE_14,color:T.default.Colors.HEADER_PRIMARY,className:x.default.authorName,style:{color:null==u?void 0:u.colorString}
},void 0,null!==(t=null!==(n=null==u?void 0:u.nick)&&void 0!==n?n:null==l?void 0:l.username)&&void 0!==t?t:""),d?z("div",{className:x.default.tags},void 0,z("span",{className:x.default.bullet},void 0,"•"),i&&z(F.default,{tag:o,size:F.default.Sizes.SMALL}),s&&z(T.default,{size:T.default.Sizes.SIZE_12,color:T.default.Colors.BRAND},void 0,z(M.default,{className:x.default.pinIcon,width:20,height:20}))):null)}V.displayName="ForumPostHeader";function $(e){var t=e.channel,n=e.firstMessage,a=e.content,r=e.hasMediaAttachment;return z("div",{className:x.default.body},void 0,z(R.default,{className:x.default.title,size:R.default.Sizes.SIZE_20,color:T.default.Colors.HEADER_PRIMARY},void 0,t.name),z("div",{className:x.default.message},void 0,null==n?null:z(Y,{message:n,content:a,hasMediaAttachment:r})))}$.displayName="ForumPostBody";var Y=r.memo((function(e){var t=e.message,n=e.content,a=e.hasMediaAttachment,r=(0,i.useStateFromStores)([_.default],(function(){return _.default.isBlocked(t.author.id)
})),l=(0,b.renderSingleLineMessage)(t,n,r,x.default.messageContent,x.default.messageContentIcon),u=l.contentPlaceholder,o=l.renderedContent;return null!=o?o:a?null:z("span",{className:x.default.messageContent},void 0,u)})),K=z(A.default,{themed:!0,dotRadius:2});function X(e){var t=e.channel,n=e.facepileRef,a=e.firstMessage,r=e.sortOrder,l=(0,P.useTypingUserIds)(t);return z("div",{className:x.default.footer},void 0,z(Q,{channel:t}),z("span",{className:x.default.bullet},void 0,"•"),z(J,{firstMessage:a}),l.length>0?z("div",{className:x.default.typing},void 0,z(te,{channel:t,userIds:l,facepileRef:n}),z("div",{className:x.default.dots},void 0,K),z(f.default,{channel:t,className:x.default.typingUsers,renderDots:!1})):z(ee,{channel:t,sortOrder:r}))}X.displayName="ForumPostFooter";var q=z(O.default,{width:16,height:16});function Q(e){var t=e.channel,n=(0,P.useMessageCount)(t),a=n.renderedMessageCount,r=n.displayedUnreadCount;return z("div",{className:x.default.messageCountBox
},void 0,z("span",{className:x.default.messageCountIcon},void 0,q),z(T.default,{className:x.default.messageCount,size:T.default.Sizes.SIZE_14,color:T.default.Colors.CUSTOM},void 0,a),null==r?null:z(T.default,{className:x.default.newMessageCount,size:T.default.Sizes.SIZE_14,color:T.default.Colors.BRAND},void 0,"(",j.default.Messages.FORUM_POST_MESSAGE_COUNT_SHORT.format({count:r}),")"))}Q.displayName="MessageCount";function J(e){var t,n=e.firstMessage,a=(0,P.useMostUsedReaction)(n),l=a.emoji,u=a.count;return 0===u?null:r.createElement(r.Fragment,null,z(d.default,{className:x.default.reaction,emojiId:l.id,emojiName:l.name,animated:l.animated},null!==(t=l.id)&&void 0!==t?t:l.name),z(T.default,{className:x.default.reactionCount,size:T.default.Sizes.SIZE_14,color:T.default.Colors.HEADER_SECONDARY},void 0,u),z("span",{className:x.default.bullet},void 0,"•"))}function ee(e){var t=e.sortOrder,n=e.channel,a=(0,P.useLastActiveTimestamp)(n,t);return z(T.default,{className:x.default.activityText,
size:T.default.Sizes.SIZE_14,color:T.default.Colors.HEADER_SECONDARY},void 0,a)}ee.displayName="ActiveAgoTime";function te(e){var t=e.channel,n=e.userIds,a=e.facepileRef,l=(0,P.useFacepileUsers)(t,n);return r.createElement("div",{ref:a},z(I.default,{className:x.default.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:l,max:5,size:16,hideMoreUsers:!0,showUserPopout:!0}))}te.displayName="Facepile";function ne(e){var t,n,a,r=e.channel,u=e.firstMedia,o=(0,i.useStateFromStores)([C.default],(function(){return C.default.isFocused()})),s=(0,i.useStateFromStores)([S.default],(function(){return S.default.can(D.Permissions.MANAGE_MESSAGES,r)})),d=(0,i.useStateFromStores)([p.default],(function(){return p.default.useReducedMotion})),f=m.GifAutoPlay.useSetting()&&!d,c=m.RenderSpoilers.useSetting(),h=u.src,g=u.width,y=u.height,_=u.spoiler,E=u.alt,O=_&&!(0,v.default)(c,s);y>g?a=80:n=80;return z("div",{className:x.default.bodyMedia},void 0,z(N.default,{src:h,maxHeight:n,maxWidth:a,
width:g,height:y,alt:null!=E&&O?j.default.Messages.SPOILER_HIDDEN_A11Y_LABEL:E,autoPlay:f,shouldAnimate:!O&&o,className:x.default.thumbnailContainer,imageClassName:(0,l.default)((t={},t[x.default.spoiler]=O,t))}))}ne.displayName="ForumPostMediaPreview"},214160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,n,a,u=e.parentChannel,s=e.onChange,d=r.useContext(H.ComponentDispatchGroupContext),f=ae(r.useState(new Set),2),v=f[0],h=f[1],g=ae(r.useState(!1),2),S=g[0],y=g[1],N=r.useCallback((function(){d.bumpDispatchPriority()}),[d]),T=(0,o.useStateFromStores)([A.default],(function(){return A.default.can($.Permissions.ATTACH_FILES,u)})),I=function(e){var t=ae(r.useState((function(){var t;return null!==(t=M.default.getThreadSettings(e.id))&&void 0!==t?t:{}})),2),n=t[0],a=t[1],l=ae(r.useState((function(){var t=M.default.getDraft(e.id,M.DraftType.FirstThreadMessage)||e.template||"";return(0,m.createState)(t)
})),2),u=l[0],o=l[1],s=r.useCallback((function(t){a((function(e){return J({},e,{},t)}));i.default.changeThreadSettings(e.id,t)}),[e.id]),d=r.useCallback((function(){a({});o((0,m.createState)(e.template||""))}),[e.template]);return{threadSettings:n,setThreadSettings:a,updateThreadSettings:s,textAreaState:u,setTextAreaState:o,resetThreadSettings:d}}(u),w=I.threadSettings,F=I.updateThreadSettings,D=I.textAreaState,k=I.setTextAreaState,j=I.resetThreadSettings,x=function(e,t,n,a){var l=(0,o.useStateFromStores)([b.default],(function(){return b.default.getGuild(e.guild_id)})),u=ae(r.useState(!1),2),i=u[0],s=u[1],d=ae(r.useState(!1),2),f=d[0],c=d[1],p=(y=a,function(e){if(Array.isArray(e))return le(e)}(y)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||re(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
}()).map((function(e){return e.id})),v=(0,O.useCreateForumPost)({parentChannel:e,guild:l,threadSettings:t,appliedTags:p,onThreadCreated:E.default.openThreadSidebarForViewing}),m=r.useCallback((function(a,r,l){var u;null==a&&(a=n.textValue);a=a.trim();if(null==r||0===r.length){var o;r=null===(o=_.default.getStickerPreview(e.id,ue.drafts.type))||void 0===o?void 0:o.map((function(e){return e.id}))}null!=l&&0!==l.length||(l=R.default.getUploads(e.id,M.DraftType.FirstThreadMessage));return{content:a,stickers:r,uploads:l,hasNameError:0===(null!==(u=t.name)&&void 0!==u?u:"").length,hasMessageError:!(null!=a&&""!==a||null!=r&&0!==r.length||0!==l.length)}}),[e.id,n.textValue,t.name]),h=r.useCallback(function(){var t=ne(regeneratorRuntime.mark((function t(n,a,r){var l,u,o,i,d,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=m(n,a,r),u=l.content,o=l.stickers,i=l.uploads,d=l.hasNameError,f=l.hasMessageError;s(d);c(f);if(!d&&!f){t.next=5;break}
return t.abrupt("return",{shouldClear:!1,shouldRefocus:!0});case 5:t.next=7;return(0,B.applyChatRestrictions)({content:u,stickers:o,uploads:i,type:ue,channel:e});case 7:p=t.sent;if(p.valid){t.next=11;break}return t.abrupt("return",{shouldClear:!1,shouldRefocus:!0});case 11:t.next=13;return v(u,o,i);case 13:W.default.resort(e.id);(0,C.clearStickerPreview)(e.id,ue.drafts.type);return t.abrupt("return",{shouldClear:!0,shouldRefocus:!1});case 16:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),[v,m,e]),g=m(),S=!g.hasNameError&&!g.hasMessageError;var y;return{hasNameError:i,hasMessageError:f,submit:h,isCurrentlyValid:S}}(u,w,D,v),L=x.hasNameError,U=x.hasMessageError,z=x.submit,G=(0,o.useStateFromStoresArray)([R.default],(function(){return R.default.getUploads(u.id,M.DraftType.FirstThreadMessage)
})),Z=G.length>0||D.textValue.length>0&&D.textValue!==u.template||(null!==(t=null===(n=w.name)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0,V=function(e,t,n,a){var l,u=r.useRef(null),o=ae(r.useState((null!==(l=t.name)&&void 0!==l?l:"").length>0),2),i=o[0],s=o[1],d=r.useRef(null),f=r.useRef(!1);r.useEffect((function(){!i&&n&&s(!0)}),[i,n]);var c=r.useCallback((function(){!i||n||a||setTimeout((function(){var e=document.activeElement;null!=u.current&&(null!=e&&u.current.contains(e)||s(!1))}),0)}),[i,n,a]),v=function(t){var n;i||s(!0);if(t.target!==d.current){null===(n=d.current)||void 0===n||n.focus();if(!f.current){f.current=!0;(0,p.trackWithMetadata)($.AnalyticEvents.THREAD_CREATION_STARTED,{location,channel_id:e.id,guild_id:e.guild_id})}}},m=r.useCallback((function(){f.current=!1}),[]);return{clickableRef:u,inputRef:d,expandForm:i,setExpandForm:s,handleBlur:c,handleClick:v,afterSubmit:m}
}(u,w,Z,S),X=V.clickableRef,q=V.inputRef,Q=V.expandForm,te=V.setExpandForm,de=V.handleBlur,fe=V.handleClick,ce=V.afterSubmit,pe=r.useCallback(ne(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return z.apply(void 0,n);case 2:if((t=e.sent).shouldClear){ce();h(new Set);j()}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[ce,z,j]);r.useLayoutEffect(s,[Q,D,G,s]);return r.createElement(r.Fragment,null,ee(c.default,{channel:u,draftType:M.DraftType.FirstThreadMessage}),ee(P.default,{innerRef:X,"aria-label":Y.default.Messages.NEW_FORUM_POST,className:(0,l.default)(K.default.container,(a={},a[K.default.collapsed]=!Q,a)),onBlur:de,onClick:Q?void 0:fe},void 0,ee("form",{onMouseDown:N,onFocus:N,onSubmit:function(e){e.preventDefault();pe()},className:K.default.form},void 0,ee(oe,{parentChannel:u,threadSettings:w,updateThreadSettings:F,hasError:L,expandForm:Q,setExpandForm:te,
inputRef:q}),Q?r.createElement(r.Fragment,null,ee(ie,{parentChannel:u,textAreaState:D,setTextAreaState:k,submit:pe,hasError:U,canAttachFiles:T}),ee(se,{parentChannel:u,canAttachFiles:T,textAreaState:D,appliedTags:v,setAppliedTags:h,onPopoutOpen:function(){return y(!0)},onPopoutClose:function(){return y(!1)}})):null)))};var a,r=Q(n(667294)),l=X(n(294184)),u=X(n(441143)),o=n(536211),i=X(n(186705)),s=X(n(55189)),d=Q(n(538930)),f=X(n(707842)),c=X(n(805918)),p=n(844784),v=n(573285),m=n(424527),h=X(n(271180)),g=X(n(907616)),S=X(n(421250)),y=n(907932),_=X(n(422207)),C=n(770755),E=X(n(887174)),N=X(n(521595)),O=n(387812),M=Q(n(687549)),b=X(n(30098)),A=X(n(689389)),R=X(n(680873)),T=X(n(728429)),I=X(n(956117)),P=X(n(16941)),w=X(n(160629)),F=Q(n(279950)),D=X(n(730977)),k=X(n(547058)),j=X(n(129321)),x=X(n(899068)),L=X(n(776360)),H=n(993442),U=n(956506),z=n(905835),B=n(871382),G=n(247726),W=X(n(649563)),Z=X(n(299565)),V=X(n(461696)),$=n(770348),Y=X(n(247001)),K=X(n(977635));function X(e){
return e&&e.__esModule?e:{default:e}}function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(q=function(e){return e?n:t})(e)}function Q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=q(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}function J(){J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return J.apply(this,arguments)}function ee(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),
1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function te(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){te(l,a,r,u,o,"next",e)}function o(e){te(l,a,r,u,o,"throw",e)}u(void 0)}))}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,r,l=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(a=n.next()).done);u=!0){l.push(a.value);if(t&&l.length===t)break}}catch(e){o=!0;r=e}finally{try{u||null==n.return||n.return()}finally{if(o)throw r}}return l}(e,t)||re(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ue=v.ChatInputTypes.CREATE_FORUM_POST;function oe(e){var t,n=e.parentChannel,a=e.threadSettings,r=e.updateThreadSettings,l=e.hasError,i=e.expandForm,d=e.setExpandForm,f=e.inputRef,c=null!==(t=a.name)&&void 0!==t?t:"",p=(0,o.useStateFromStores)([T.default],(function(){return T.default.getCurrentUser()}));(0,u.default)(null!=p,"current user cannot be null");(0,H.useComponentAction)({event:$.ComponentActions.FOCUS_COMPOSER_TITLE,
handler:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.focus()}});return ee("div",{className:K.default.titleContainer},void 0,ee(F.default,{className:K.default.title,value:c,placeholder:i?Y.default.Messages.FORUM_POST_TITLE_PLACEHOLDER_FOCUSED:Y.default.Messages.FORUM_POST_TITLE_PLACEHOLDER,maxLength:$.MAX_CHANNEL_NAME_LENGTH,onChange:function(e){r({name:(0,N.default)(e,!1)});""!==e?s.default.startTyping(n.id):s.default.stopTyping(n.id)},onFocus:function(){return d(!0)},onBlur:function(){var e=(0,N.default)(c,!0);e!==c&&r({name:e})},error:l&&0===c.trim().length?Y.default.Messages.FORM_THREAD_NAME_REQUIRED_ERROR:null,inputRef:f}),i?null:ce)}oe.displayName="ForumPostTitle";function ie(e){var t,n=e.parentChannel,a=e.textAreaState,f=e.setTextAreaState,c=e.submit,p=e.hasError,v=e.canAttachFiles,m=(0,o.useStateFromStores)([T.default],(function(){return T.default.getCurrentUser()}));(0,u.default)(null!=m,"current user cannot be null");var S=(0,
y.useUserNickAndColor)(m,n),_=S.nick,C=S.colorString,E=ae(r.useState(!1),2),N=E[0],O=E[1],b=r.useCallback((function(){O(!0)}),[]),A=r.useCallback((function(){O(!1)}),[]),R=r.useCallback((function(e,t,a){i.default.saveDraft(n.id,t,M.DraftType.FirstThreadMessage);f((function(e){""!==t&&e.textValue!==t?s.default.startTyping(n.id):""===t&&s.default.stopTyping(n.id);return{textValue:t,richValue:a}}))}),[n.id,f]),I=r.useCallback((function(e){var t=e.value,n=e.uploads,a=e.stickers;return c(t,a,n)}),[c]);(0,H.useComponentAction)({event:$.ComponentActions.TEXTAREA_FOCUS,handler:b});(0,H.useComponentAction)({event:$.ComponentActions.TEXTAREA_BLUR,handler:A});var P=p&&0===a.textValue.trim().length;return ee("div",{className:K.default.bodyContainer},void 0,ee("div",{className:K.default.avatarContainer},void 0,ee(d.default,{className:K.default.avatar,user:m,size:d.Sizes.SIZE_40})),ee("div",{className:K.default.authorContainer},void 0,ee(L.default,{size:L.default.Sizes.SIZE_16,
color:L.default.Colors.HEADER_PRIMARY,className:K.default.authorName,style:{color:C}},void 0,_)),ee("div",{onClick:b},void 0,ee(h.default,{type:ue,channel:n,placeholder:Y.default.Messages.FORUM_POST_MESSAGE_PLACEHOLDER,textValue:a.textValue,richValue:a.richValue,focused:N,className:K.default.channelTextArea,innerClassName:(0,l.default)(K.default.channelTextAreaInner,(t={},t[K.default.channelTextAreaInnerError]=P,t)),onFocus:b,onBlur:A,onChange:R,onSubmit:I,promptToUpload:G.promptToUpload})),ee(F.Error,{error:P?Y.default.Messages.FORM_THREAD_STARTER_MESSAGE_REQUIRED_ERROR:null}),ee(g.default,{channelId:n.id,type:ue,canAttachFiles:v}))}ie.displayName="ForumPostBody";function se(e){var t=e.parentChannel,n=e.canAttachFiles,a=e.textAreaState,r=e.appliedTags,u=e.setAppliedTags,o=e.onPopoutOpen,i=e.onPopoutClose;return ee("div",{className:K.default.controlsContainer},void 0,ee("div",{className:(0,l.default)(K.default.controls,K.default.submitContainer)},void 0,ee(S.default,{type:ue,
textValue:a.textValue,className:K.default.characterCount}),fe),ee("div",{className:K.default.controls},void 0,n&&ee(pe,{parentChannel:t}),ee(ve,{parentChannel:t,appliedTags:r,setAppliedTags:u,onPopoutOpen:o,onPopoutClose:i}),ee(V.default,{appliedTags:r,setAppliedTags:u})))}se.displayName="ForumPostControls";function de(){return ee(I.default,{size:I.default.Sizes.SMALL,className:K.default.submitButton,type:"submit"},void 0,ee(k.default,{className:K.default.submitIcon,width:16,height:16}),ee(L.default,{className:K.default.submitText,size:L.default.Sizes.SIZE_16,color:L.default.Colors.CUSTOM},void 0,Y.default.Messages.SUBMIT_POST))}de.displayName="ForumPostSubmitButton";var fe=ee(de,{}),ce=ee(de,{});function pe(e){var t=e.parentChannel,n=r.useRef(null);return r.createElement(r.Fragment,null,r.createElement(f.default,{className:K.default.uploadInput,ref:n,onChange:function(e){(0,G.promptToUpload)(e.currentTarget.files,t,M.DraftType.FirstThreadMessage,{requireConfirm:!0})
;U.ComponentDispatch.dispatch($.ComponentActions.TEXTAREA_FOCUS);e.currentTarget.value=""},multiple:t.rateLimitPerUser<=0,tabIndex:-1,"aria-hidden":!0,maxSize:(0,z.maxFileSize)(t.getGuildId())}),ee(I.default,{onClick:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.activateUploadDialogue()},className:K.default.mediaButton,size:I.default.Sizes.ICON,look:I.default.Looks.OUTLINED,"aria-label":Y.default.Messages.ADD_ATTACHMENT_FORUM_POST},void 0,ee(j.default,{className:K.default.icon,width:20,height:20})))}function ve(e){var t=e.parentChannel,n=e.appliedTags,a=e.setAppliedTags,l=e.onPopoutOpen,u=e.onPopoutClose,o=n.size>=2,i=function(e){if(n.has(e)){n.delete(e);a(new Set(n))}else{n.add(e);a(new Set(n))}};return ee(w.default,{onRequestOpen:l,onRequestClose:u,renderPopout:function(e){var a=e.closePopout;return!o&&ee(Z.default,{parentChannel:t,appliedTags:n,onSelectTag:i,onClose:a})},position:w.default.Positions.BOTTOM,align:w.default.Align.CENTER},void 0,(function(e){
return ee(D.default,{text:o?Y.default.Messages.FORUM_TAG_POST_MAX_REACHED:null},void 0,(function(t){return r.createElement(I.default,J({},e,t,{size:I.default.Sizes.ICON,className:K.default.mediaButton,disabled:o,look:I.default.Looks.OUTLINED,"aria-label":Y.default.Messages.ADD_TAG_FORUM_POST}),ee(x.default,{className:K.default.icon,width:20,height:20}))}))}))}ve.displayName="ForumPostAddTagButton"},831294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=M;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a
}(n(667294)),l=y(n(294184)),u=n(536211),o=y(n(689389)),i=y(n(956117)),s=y(n(16941)),d=y(n(730977)),f=y(n(155393)),c=n(194322),p=y(n(971639)),v=y(n(776360)),m=y(n(487213)),h=n(770348),g=y(n(247001)),S=y(n(581895));function y(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function C(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(){E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
;return E.apply(this,arguments)}function N(e,t,n,a,r,l,u){try{var o=e[l](u),i=o.value}catch(e){n(e);return}o.done?t(i):Promise.resolve(i).then(a,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var l=e.apply(t,n);function u(e){N(l,a,r,u,o,"next",e)}function o(e){N(l,a,r,u,o,"throw",e)}u(void 0)}))}}function M(e){var t=e.channel,a=e.tagFilter,y=e.setTagFilter,_=(0,u.useStateFromStores)([o.default],(function(){return o.default.can(h.Permissions.MANAGE_CHANNELS,t)})),N=t.availableTags,M=N.length>0,b=N.length>=10,A=null,R=function(){_&&!b&&(0,c.openModalLazy)(O(regeneratorRuntime.mark((function e(){var a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([n.e(40532),n.e(22915)]).then(n.bind(n,222915));case 2:a=e.sent;l=a.default;return e.abrupt("return",(function(e){return r.createElement(l,E({},e,{channelId:t.id,guildId:t.guild_id}))}));case 5:case"end":return e.stop()}}),e)}))))}
;_&&(A=M?C(d.default,{text:b?g.default.Messages.FORUM_TAG_POST_MAX_REACHED:null},void 0,(function(e){var t;return r.createElement(s.default,E({},e,{onClick:R,className:(0,l.default)(S.default.addTags,(t={},t[S.default.disabled]=b,t))}),C(f.default,{color:h.Colors.WHITE}))})):r.createElement(r.Fragment,null,C(v.default,{size:v.default.Sizes.SIZE_14,color:v.default.Colors.HEADER_SECONDARY,className:S.default.description},void 0,g.default.Messages.FORUM_TAG_CREATE_DESCRIPTION),C(i.default,{onClick:R},void 0,g.default.Messages.FORUM_TAG_CREATE)));return C("div",{className:S.default.container},void 0,C(p.default,{size:p.default.Sizes.SIZE_16},void 0,g.default.Messages.FORUM_TAGS),C("div",{className:S.default.tags},void 0,N.map((function(e){return C(m.default,{tag:e,onClick:function(l){return function(e,l){_&&e.shiftKey?(0,c.openModalLazy)(O(regeneratorRuntime.mark((function e(){var a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2
;return Promise.all([n.e(40532),n.e(22915)]).then(n.bind(n,222915));case 2:a=e.sent;u=a.default;return e.abrupt("return",(function(e){return r.createElement(u,E({},e,{channelId:t.id,guildId:t.guild_id,tag:l}))}));case 5:case"end":return e.stop()}}),e)})))):y(l.id===a?null:l.id)}(l,e)},selected:a===e.id},e.id)})),A))}M.displayName="ForumTagsCard"},129321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=f;var a,r,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=r?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e;n&&n.set(e,a);return a}(n(667294)),u=(a=n(468205))&&a.__esModule?a:{default:a},o=["width","height","color","foreground"]
;function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return s.apply(this,arguments)}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var l=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var o=new Array(u),i=0;i<u;i++)o[i]=arguments[i+3];t.children=o}if(t&&l)for(var s in l)void 0===t[s]&&(t[s]=l[s]);else t||(t=l||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function f(e){var t=e.width,n=void 0===t?24:t,a=e.height,r=void 0===a?24:a,i=e.color,f=void 0===i?"currentColor":i,c=e.foreground,p=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++){n=l[a]
;t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,o);return l.createElement("svg",s({},(0,u.default)(p),{width:n,height:r,viewBox:"0 0 24 24",fill:"none"}),d("path",{fillRule:"evenodd",clipRule:"evenodd",className:c,d:"M13.2899 2H6C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22H18C20.2091 22 22 20.2091 22 18V10.7101C21.3663 10.8987 20.695 11 20 11C16.134 11 13 7.86599 13 4C13 3.30503 13.1013 2.63371 13.2899 2ZM8 6C9.1032 6 10 6.8952 10 8C10 9.1056 9.1032 10 8 10C6.8944 10 6 9.1056 6 8C6 6.8952 6.8944 6 8 6ZM6 18L9 14L11 16L15 11L18 18H6Z",fill:f}),d("path",{d:"M21 0V3H24V5H21V8H19V5H16V3H19V0H21Z",fill:f}))}f.displayName="ImagePlaceholderWithPlusIcon"},138845:e=>{e.exports=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}},781629:(e,t,n)=>{var a=n(138845),r=n(105976)((function(e,t){return a(e,1,t)}));e.exports=r}}]);
//# sourceMappingURL=344b0429879506ae319c.js.map