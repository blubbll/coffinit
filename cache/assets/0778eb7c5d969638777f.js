"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[84438],{413546:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,o=(r=n(636602))&&r.__esModule?r:{default:r},i=n(770348);var a={popFirstFile:function(e){o.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_POP_FILE,channelId:e})},addFiles:function(e){var t=e.files,n=e.channelId,r=e.showLargeMessageDialog,a=e.draftType;o.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:t,showLargeMessageDialog:r,draftType:a})},addFile:function(e){var t=e.file,n=e.channelId,r=e.showLargeMessageDialog,a=e.draftType;o.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_ADD_FILES,channelId:n,files:[t],showLargeMessageDialog:r,draftType:a})},remove:function(e,t,n){o.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILE,channelId:e,id:t,draftType:n})},removeFiles:function(e,t,n){o.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_REMOVE_FILES,channelId:e,attachmentIds:t,draftType:n})},clearAll:function(e,t){o.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_CLEAR_ALL_FILES,channelId:e,draftType:t})},update:function(e,t,n,r){var a=r.description,u=r.filename,l=r.spoiler;o.default.dispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_UPDATE_FILE,channelId:e,id:t,filename:u,description:a,spoiler:l,draftType:n})},setUploads:function(e){var t=e.uploads,n=e.channelId,r=e.draftType;o.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_UPLOADS,channelId:n,uploads:t,draftType:r})},setFile:function(e){var t=e.file,n=e.channelId,r=e.id,a=e.draftType;o.default.dirtyDispatch({type:i.ActionTypes.UPLOAD_ATTACHMENT_SET_FILE,channelId:n,id:r,file:t,draftType:a})}};t.default=a},298169:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.numberParts=void 0;t.numberParts={__proto__:null,bg:{group:" ",decimal:","},cs:{group:" ",decimal:","},da:{group:".",decimal:","},de:{group:".",decimal:","},el:{group:".",decimal:","},"en-GB":{group:",",decimal:"."},"en-US":{group:",",decimal:"."},"es-ES":{group:".",decimal:","},fi:{group:" ",decimal:","},fr:{group:"â€¯",decimal:","},hi:{group:",",decimal:"."},hr:{group:".",decimal:","},hu:{group:" ",decimal:","},it:{group:".",decimal:","},ja:{group:",",decimal:"."},ko:{group:",",decimal:"."},lt:{group:" ",decimal:","},nl:{group:".",decimal:","},no:{group:" ",decimal:","},pl:{group:" ",decimal:","},"pt-BR":{group:".",decimal:","},ro:{group:".",decimal:","},ru:{group:" ",decimal:","},"sv-SE":{group:" ",decimal:","},th:{group:",",decimal:"."},tr:{group:".",decimal:","},uk:{group:" ",decimal:","},vi:{group:".",decimal:","},"zh-CN":{group:",",decimal:"."},"zh-TW":{group:",",decimal:"."}}},724833:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.UserExperiment=t.GuildExperiment=void 0;t.shouldUseBackendV2=function(e){if(null!=e.guild_id)return o.getCurrentConfig({guildId:e.guild_id}).enabled;return i.getCurrentConfig({}).enabled};var r=n(373505),o=(0,r.createExperiment)({kind:"guild",label:"App Commands V2 Guild",id:"2022-02_app_commands_v2_guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});t.GuildExperiment=o;var i=(0,r.createExperiment)({kind:"user",label:"App Commands V2 DM",id:"2022-02_app_commands_v2_dm",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});t.UserExperiment=i},166806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useTopCommands=function(e){r.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,o.useStateFromStores)([a.default],(function(){return a.default.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){return(0,a.getFilteredTopCommands)(t,e)}),[t,e])};t.useTopRealCommands=function(e){r.useEffect((function(){i.FrecencyUserSettingsActionCreators.loadIfNecessary()}),[]);var t=(0,o.useStateFromStores)([a.default],(function(){return a.default.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){var n=(0,a.getFilteredTopCommands)(t,e);return(0,a.getTopRealCommands)(n)}),[t,e])};var r=l(n(667294)),o=n(536211),i=n(828593),a=l(n(290760));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}},632184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,o,i,a,u,l,c=m(n(536211)),d=m(n(636602)),s=m(n(473517)),f=m(n(892083)),p=n(770348);function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}function v(){i=null;o=null;u=null;l=null}function h(e){var t=e.guildId;if(a!==t)return!1;g()}function g(){var e;i=null===(e=i)||void 0===e?void 0:e.markStale()}var I=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(s.default)};n.getGuildCommands=function(e,t){var n,r;return(null===(n=i)||void 0===n?void 0:n.guildId)===e&&(null===(r=i)||void 0===r?void 0:r.commandType)===t?i:null};n.getFilteredApplicationId=function(e){var t;return(null===(t=i)||void 0===t?void 0:t.guildId)===e?l:null};return t}(c.default.Store);I.displayName="ApplicationCommandDiscoveryStore";var A=new I(d.default,((r={})[p.ActionTypes.LOGOUT]=function(){a=null;l=null;v()},r[p.ActionTypes.CLEAR_GUILD_DISCOVERY_COMMANDS]=v,r[p.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.guildId;if(a===t)return!1;a=t;i=null;o=null;u=null;l=null},r[p.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE]=function(e){var t=e.nonce,n=e.applications,r=e.applicationCommands;if(t===o&&null!=u){var a;i=null===(a=i)||void 0===a?void 0:a.loadComplete(r,u.isBefore,u.offset,u.commandType,u.jumpDescriptor,n);u=null}},r[p.ActionTypes.INTEGRATION_DELETE]=function(e){var t=e.guildId,n=e.applicationId;if(a!==t)return!1;null!=n&&g()},r[p.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST]=function(e){var t,n=e.guildId,r=e.offset,a=e.isBefore,c=e.jumpDescriptor,d=e.nonce,s=e.commandType;s!==(null===(t=i)||void 0===t?void 0:t.commandType)&&v();l=null;o=d;u={guildId:n,offset:r,isBefore:a,jumpDescriptor:c,commandType:s};null!=i&&i.guildId===n||(i=new f.default(n));i=i.loadStart()},r[p.ActionTypes.APPLICATION_COMMAND_QUERY_LIST_REQUEST]=function(e){var t=e.guildId,n=e.applicationId,r=e.commandType,a=e.nonce;if("discovery"===e.scope){o=a;u={guildId:t,offset:0,isBefore:!1,commandType:r,jumpDescriptor:{sectionId:n}};l=n;null!=i&&i.guildId===t||(i=new f.default(t));i=i.loadStart()}},r[p.ActionTypes.APPLICATIONS_REQUEST]=function(e){var t,n=e.nonce,r=e.guildId,a=e.commandType;a!==(null===(t=i)||void 0===t?void 0:t.commandType)&&v();l=null;o=n;u={guildId:r,offset:0,isBefore:!1,commandType:a};(null==i||i.guildId!==r||i.isStale)&&(i=new f.default(r))},r[p.ActionTypes.APPLICATION_COMMAND_CREATE]=h,r[p.ActionTypes.APPLICATION_COMMAND_DELETE]=h,r[p.ActionTypes.APPLICATION_COMMAND_UPDATE]=h,r));t.default=A},24922:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.filterEmpty=p;t.getBoolean=m;t.getChannelId=y;t.getOptionalBoolean=function(e,t){return null==e[t]?null:m(e,t)};t.getOptionalChannelId=function(e,t){return null==e[t]?null:y(e,t)};t.getOptionalRoleId=function(e,t){return null==e[t]?null:h(e,t)};t.getOptionalString=function(e,t){return null==e[t]?null:g(e,t)};t.getOptionalUserId=function(e,t){return null==e[t]?null:v(e,t)};t.getRoleId=h;t.getString=g;t.getUserId=v;t.normalizeNumericString=function(e,t){if(e!==i){var n;i=e;var a=null!==(n=u.numberParts[e])&&void 0!==n?n:u.numberParts["en-US"],c=a.group,d=a.decimal;r=new RegExp(l.default.escape(c),"g");o=new RegExp(l.default.escape(d),"g")}return t.replace(r,"").replace(o,".")};var r,o,i,a=d(n(441143)),u=n(298169),l=d(n(827513)),c=n(484278);function d(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return null==e?[]:e.filter((function(t,n){return"text"!==t.type||(n>0&&n<e.length-1?""!==t.text:""!==t.text.trim())}))}function m(e,t){var n,r=p(e[t]);(0,a.default)(1===r.length,"Contains multiple values");(0,a.default)("text"===(null===(n=r[0])||void 0===n?void 0:n.type),"First value is not text");return r[0].text===c.TRUE_OPTION_NAME}function y(e,t){var n,r=p(e[t]);(0,a.default)(1===r.length,"Contains multiple values");(0,a.default)("channelMention"===(null===(n=r[0])||void 0===n?void 0:n.type),"First value is not a channel mention");return r[0].channelId}function v(e,t){var n,r=p(e[t]);(0,a.default)(1===r.length,"Contains multiple values");(0,a.default)("userMention"===(null===(n=r[0])||void 0===n?void 0:n.type),"First value is not a user mention");return r[0].userId}function h(e,t){var n,r=p(e[t]);(0,a.default)(1===r.length,"Contains multiple values");(0,a.default)("roleMention"===(null===(n=r[0])||void 0===n?void 0:n.type),"First value is not a role mention");return r[0].roleId}function g(e,t){for(var n,r="",o=s(e[t]);!(n=o()).done;){var i=n.value;switch(i.type){case"text":case"textMention":r+=i.text;break;case"userMention":r+="<@!"+i.userId+">";break;case"channelMention":r+="<#"+i.channelId+">";break;case"roleMention":r+="<@&"+i.roleId+">";break;case"emoji":r+=i.surrogate;break;case"customEmoji":r+="<"+(i.animated?"a":"")+":"+i.name.replace(/:/g,"").split("~")[0]+":"+i.emojiId+">"}}return r}},375543:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.SearchManagerQueryStore=void 0;t.scoreCommand=G;t.useSearchManager=function(e,t,n,r,i){var a=void 0===i?{}:i,u=a.canOnlyUseTextCommands,l=a.canUseFrecency,c=E(o.useState(!0),2),d=c[0],m=c[1],A=o.useRef(!1),b=E(o.useState(),2),T=b[0],_=b[1],O=E(o.useState(),2),M=O[0],P=O[1],D=E(o.useState([]),2),L=D[0],k=D[1],R=E(o.useState([]),2),B=R[0],W=R[1],G=E(o.useState(),2),q=G[0],Q=G[1],Y=o.useRef(null);o.useEffect((function(){Y.current=new AbortController;return function(){var e;null===(e=Y.current)||void 0===e||e.abort()}}),[]);var V=o.useCallback((function(n,r){var o;if(!A.current){A.current=!0;w(e.id,S({type:t},n),null===(o=Y.current)||void 0===o?void 0:o.signal).then((function(e){var t;A.current=!1;(null===(t=Y.current)||void 0===t?void 0:t.signal.aborted)||r(e)}))}}),[e.id,t]),$=o.useMemo((function(){return{channel:e,guild:null!=e.guild_id?f.default.getGuild(e.guild_id):null}}),[e]),z=(0,h.useTopRealCommands)($);o.useEffect((function(){if(d){m(!1);if(!(e.isMultiUserDM()||e.isSystemDM()||e.isDM()&&null==e.rawRecipients.find((function(e){return e.bot})))){var t=y.default.fromTimestamp(Date.now());F(t,"http","discovery");var n=e.isDM()?{applicationId:e.getRecipientId()}:{limit:r,includeApplications:null==T,commandIds:d?z:void 0,cursor:T};V(n,(function(n){H(t);if(null!=n){W(U([],n.applicationCommands));if(e.isDM()){var r=p.default.getUser(e.getRecipientId());k([{type:I.ApplicationCommandSectionType.DM,id:r.id,name:r.username,icon:r.avatar,bot:r}])}else null!=n.applications&&k(n.applications.map((function(e){return{type:I.ApplicationCommandSectionType.GUILD,id:e.id,name:e.name,icon:e.icon,bot:null!=e.bot?new s.default(e.bot):void 0}})));_(n.prevCursor);P(n.nextCursor)}}))}}}),[e,r,d,T,V,z]);var Z=o.useCallback((function(){if(null!=M){var e=y.default.fromTimestamp(Date.now());F(e,"http","discovery");V({limit:r,cursor:M},(function(t){H(e);if(null!=t){!1===t.repaired?W(U([],t.applicationCommands)):W(U(B,t.applicationCommands));P(t.nextCursor)}}))}}),[r,V,M,B]),X=o.useCallback((function(t){if(!A.current)if(null!=t){Q(t);P(void 0);t in v.BUILT_IN_SECTIONS||e.isDM()||V({applicationId:t},(function(e){null!=e&&W(U([],e.applicationCommands))}))}else{Q(null);e.isDM()||m(!0)}}),[e,V]),J=o.useMemo((function(){return j($,t,u)}),[$,t,u]),K=(0,h.useTopCommands)($),ee=o.useMemo((function(){return l?B.concat(J).filter((function(e){return K.includes(e.id)})).sort((function(e,t){var n=g.default.getScoreWithoutLoadingLatest($,e);return g.default.getScoreWithoutLoadingLatest($,t)-n})).slice(0,C.DISCOVERY_COMMANDS_FRECENCY_LIMIT):[]}),[l,J,$,K,B]),te=o.useMemo((function(){if(u)return[v.BUILT_IN_SECTIONS[C.BuiltInSectionId.BUILT_IN]];var e=ee.length>0?[v.BUILT_IN_SECTIONS[C.BuiltInSectionId.FRECENCY]]:[],t=[v.BUILT_IN_SECTIONS[C.BuiltInSectionId.BUILT_IN]];return[].concat(e,N(L),t)}),[u,L,ee]),ne=d||A.current||null!=M,re=o.useMemo((function(){if(!ne)return[];for(var e=[],r=0;r<n;r++)e.push(x("after",r,t));return e}),[ne,n,t]),oe=o.useMemo((function(){var e=[],t=[];te.forEach((function(n){if(null==q||n.id===q){var r;if((r=n.id===C.BuiltInSectionId.BUILT_IN?ne?[]:N(J):n.id===C.BuiltInSectionId.FRECENCY?N(ee):B.filter((function(e){return e.applicationId===n.id}))).length>0||n.id===q){e.push(n);t.push({section:n,data:r})}}}));if(t.length>0&&re.length>0){var n;(n=t[t.length-1].data).push.apply(n,N(re))}return{activeSections:e,commandsByActiveSection:t}}),[te,ee,B,J,re,ne,q]),ie=oe.activeSections,ae=oe.commandsByActiveSection,ue=o.useMemo((function(){return u?J:[].concat(N(ee),N(B),N(J))}),[u,ee,B,J]);return{filterSection:X,scrollDown:Z,loading:A,filteredSectionId:q,hasMoreAfter:ne,commands:ue,sectionDescriptors:te,activeSections:ie,commandsByActiveSection:ae,placeholders:re}};var r,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=T(n(23279)),a=T(n(536211)),u=T(n(118915)),l=T(n(636602)),c=T(n(177230)),d=n(828593),s=T(n(759027)),f=T(n(30098)),p=T(n(728429)),m=T(n(308920)),y=T(n(71636)),v=n(481414),h=n(166806),g=T(n(290760)),I=n(65621),A=n(153823),C=n(484278),b=n(770348);function T(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function O(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;M(e,t)}function M(e,t){M=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return M(e,t)}function S(){S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return S.apply(this,arguments)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,o)}function w(e,t,n){if(null==n?void 0:n.aborted)return Promise.resolve(null);var r={type:t.type};if("query"in t){r.query=t.query;r.limit=t.limit;r.include_applications=t.includeApplications}else if("applicationId"in t)r.application_id=t.applicationId;else{r.limit=t.limit;r.cursor=t.cursor;r.command_ids=t.commandIds;r.include_applications=t.includeApplications}var o=function(){var r,o=(r=regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return new Promise((function(e){setTimeout(e,o)}));case 2:return r.abrupt("return",w(e,t,n));case 3:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){L(i,n,o,a,u,"next",e)}function u(e){L(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}();return u.default.get({url:b.Endpoints.APPLICATION_COMMANDS_SEARCH(e),query:r}).then((function(e){var t,n,r;return 202===e.status?o(5e3):{applicationCommands:e.body.application_commands,applications:e.body.applications,nextCursor:null===(t=e.body.cursor)||void 0===t?void 0:t.next,prevCursor:null===(n=e.body.cursor)||void 0===n?void 0:n.previous,repaired:null===(r=e.body.cursor)||void 0===r?void 0:r.repaired}}),(function(e){return(null==n?void 0:n.aborted)?null:429===e.status?o(1e3*e.body.retry_after):null}))}var j=function(e,t,n){var r=e.channel,o=e.guild;return null!=r?(0,v.getBuiltInCommands)(t,!0,n).filter((function(e){return null==e.predicate||e.predicate({channel:r,guild:o})})):[]};function U(e,t){if(0===t.length)return e;var n=N(e),r=(0,A.buildApplicationCommands)(t).filter((function(e){var t=n.findIndex((function(t){return t.id===e.id}));if(t>=0){n[t]=e;return!1}return!0}));return[].concat(N(n),N(r))}var x=function(e,t,n){return{type:n,inputType:I.ApplicationCommandInputType.PLACEHOLDER,id:"placeholder-"+e+"-"+t,name:"",displayName:"",description:"",displayDescription:"",applicationId:""}};var k,R,B,W=0,F=function(e,t,n){W=Date.now();k=e;R=t;B=n},H=function(e){if(null!=e&&e===k){var t=Date.now()-W;m.default.track(b.AnalyticEvents.APPLICATION_COMMAND_LOAD_TIMING,{duration_ms:t,method:R,area:B});W=0;k=null;R=null;B=null}};function G(e,t){var n=t.name,r=t.serverLocalizedName;if(n.startsWith(e))return 4;if(null==r?void 0:r.startsWith(e))return 4;if(n.includes(e))return 3;if(null==r?void 0:r.includes(e))return 3;for(var o,i=!1,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=P(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(null!==(u=t.options)&&void 0!==u?u:[]);!(o=a()).done;){var u,l=o.value,c=l.name,d=l.serverLocalizedName;if(c.startsWith(e))return 2;if((n+" "+c).startsWith(e))return 2;if(null!=r&&(r+" "+c).startsWith(e))return 2;if(null!=d){if(d.startsWith(e))return 2;if((n+" "+d).startsWith(e))return 2;if(null!=r&&(r+" "+d).startsWith(e))return 2}(c.includes(e)||(null==d?void 0:d.includes(e)))&&(i=!0)}return i?1:0}
var q=function(e){O(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(t=e.call.apply(e,[this].concat(r))||this).query=null;t.channelId=null;t.sections=null;t.applicationCommands=null;return t}var n=t.prototype;n.getApplicationSections=function(e,t){return t!==this.channelId||e!==this.query?null:this.sections};n.getApplicationCommands=function(e,t){return t!==this.channelId||e!==this.query?null:this.applicationCommands};return t}(a.default.Store);q.displayName="QueryStore";var Q=new q(l.default,((r={})[b.ActionTypes.LOGOUT]=function(){Q.query=null;Q.channelId=null;return!0},r[b.ActionTypes.CHANNEL_SELECT]=function(e){var t=e.channelId;if(Q.channelId!==t){Q.query=null;Q.channelId=null;return!0}return!1},r));t.SearchManagerQueryStore=Q;function Y(e,t,n,r,o,i){Q.query=n;Q.channelId=e.channel.id;null==Q.sections&&(Q.sections={});Q.sections[C.BuiltInSectionId.BUILT_IN]=v.BUILT_IN_SECTIONS[C.BuiltInSectionId.BUILT_IN];null==o||o.forEach((function(e){Q.sections[e.id]={type:I.ApplicationCommandSectionType.GUILD,id:e.id,name:e.name,icon:e.icon,bot:null!=e.bot?new s.default(e.bot):void 0}}));var a=U([],null!=i?i:[]),u=j(e,t,!1),l=[];[].concat(N(a),N(u)).forEach((function(e){var t=G(n,e);t>0&&l.push(S({},e,{score:t}))}));d.FrecencyUserSettingsActionCreators.loadIfNecessary();l.sort((function(t,n){if(t.score!==n.score)return n.score-t.score;var r=g.default.getScoreWithoutLoadingLatest(e,t);return g.default.getScoreWithoutLoadingLatest(e,n)-r}));if(null==i)for(var c=l.length;c<r;c+=1)l.push(S({},x("after",c,t),{score:0}));Q.applicationCommands=l.slice(0,r);Q.emitChange()}var V=(0,i.default)((function(e,t,n,r,o,i){F(i,"http","query");w(e.channel.id,{type:t,query:n,limit:r,includeApplications:o}).then((function(o){H(i);null!=o&&Q.query===n&&Q.channelId===e.channel.id&&Y(e,t,n,r,o.applications,o.applicationCommands)}))}),250,{leading:!0,trailing:!0,maxWait:750});function $(e){var t=e.context,n=e.commandType,r=e.query,o=e.limit,i=e.includeApplications,a=e.nonce;Y(t,n,r,o);V(t,n,r,o,i,a)}function z(e){var t=e.nonce;F(t,"gateway","query")}function Z(e){var t=e.nonce;F(t,"gateway","discovery")}function X(e){var t=e.nonce;F(t,"gateway","discovery-scroll")}function J(e){var t=e.nonce;H(t)}var K=new(function(e){O(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n._initialize=function(){l.default.subscribe(b.ActionTypes.APPLICATION_COMMAND_QUERY_SEARCH_MANAGER,$);l.default.subscribe(b.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST,z);l.default.subscribe(b.ActionTypes.APPLICATIONS_REQUEST,Z);l.default.subscribe(b.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST,X);l.default.subscribe(b.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE,J)};n._terminate=function(){l.default.unsubscribe(b.ActionTypes.APPLICATION_COMMAND_QUERY_SEARCH_MANAGER,$);l.default.unsubscribe(b.ActionTypes.APPLICATION_COMMAND_QUERY_REQUEST,z);l.default.unsubscribe(b.ActionTypes.APPLICATIONS_REQUEST,Z);l.default.unsubscribe(b.ActionTypes.APPLICATION_COMMAND_DISCOVERY_REQUEST,X);l.default.unsubscribe(b.ActionTypes.GUILD_APPLICATION_COMMANDS_UPDATE,J)};return t}(c.default));t.default=K},892083:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=n(153823);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function e(t){var n=this;this.commandType=null;this.commandsArray=[];this._map={};this._commandIds=new Set;this.topOffset=-1;this.bottomOffset=-1;this.jumpDescriptor=null;this.jumpSequenceId=1;this.loadingMore=!1;this.isStale=!1;this.mutate=function(t){var r=new e(n.guildId);r.commandType=n.commandType;r.commandsArray=n.commandsArray;r._map=n._map;r._commandIds=n._commandIds;r.topOffset=n.topOffset;r.bottomOffset=n.bottomOffset;r.jumpDescriptor=n.jumpDescriptor;r.loadingMore=n.loadingMore;r.jumpSequenceId=n.jumpSequenceId;r.isStale=n.isStale;t(r);return r};this.loadStart=function(){return n.mutate((function(e){e.loadingMore=!0;e.jumpDescriptor=null}))};this.loadComplete=function(e,t,r,o,i,a){return(null!=i?n.reset(e,r,a):n.merge(e,t,a)).mutate((function(e){e.jumpDescriptor=i;e.loadingMore=!1;e.commandType=o;null!=i&&(e.jumpSequenceId=n.jumpSequenceId+1)}))};this.reset=function(e,t,o){var i=e.filter((function(e){return null!=e.id&&!1!==e.listed})).length,a=null==o?void 0:(0,r.applicationPermissionsList)(o);return n.mutate((function(n){n.commandsArray=(0,r.buildApplicationCommands)(e,a);n._map={};n.commandsArray.forEach((function(e){return n._map[e.id]=e}));n._commandIds.clear();e.forEach((function(e){null!=e.id&&""!==e.id&&n._commandIds.add(e.id)}));n.topOffset=t;n.bottomOffset=Math.max(t+i-1,t);n.isStale=!1}))};this.merge=function(e,t,i){var a=null==i?void 0:i.map((function(e){return{applicationCommandPermissions:e.application_command_permissions,id:e.id}})),u=null!=a?(0,r.applicationPermissionsList)(a):void 0;return n.mutate((function(n){var i=e.filter((function(e){if(null==e.id||!1===e.listed)return!1;if(n._commandIds.has(e.id))return!1;n._commandIds.add(e.id);return!0})).length,a=(0,r.buildApplicationCommands)(e,u).filter((function(e){var t=n._map[e.id];n._map[e.id]=e;if(null!=t){n.commandsArray[n.commandsArray.indexOf(t)]=e;return!1}return!0}));n.commandsArray=t?[].concat(o(a),o(n.commandsArray)):[].concat(o(n.commandsArray),o(a));if(i>0){t?n.topOffset-=i:n.bottomOffset+=i;n.topOffset=-1===n.topOffset?0:n.topOffset;n.bottomOffset=-1===n.bottomOffset?0:n.bottomOffset;n.isStale=!1}}))};this.markStale=function(){return n.mutate((function(e){e.isStale=!0}))};this.guildId=t}},462936:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r,o){return W.apply(this,arguments)};t.retryCommandMessage=void 0;var r=P(n(441143)),o=P(n(636602)),i=P(n(786345)),a=P(n(413546)),u=n(81069),l=N(n(79267)),c=P(n(844784)),d=N(n(741464)),s=n(632341),f=N(n(551048)),p=P(n(887174)),m=n(687549),y=P(n(433385)),v=P(n(30098)),h=P(n(680873)),g=P(n(871778)),I=P(n(728429)),A=n(71246),C=n(536487),b=P(n(373265)),T=N(n(24922)),_=n(65621),O=n(153823),M=n(484278),S=n(770348);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}function P(e){return e&&e.__esModule?e:{default:e}}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function w(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){U(i,r,o,a,u,"next",e)}function u(e){U(i,r,o,a,u,"throw",e)}a(void 0)}))}}var k=function(e,t){var n;return null==e||null===(n=e.find((function(e){return e.displayName===t})))||void 0===n?void 0:n.value},R=function(e,t,n,r){var o;void 0===r&&(r=function(e){return e});if(e.name===(null===(o=n.autocomplete)||void 0===o?void 0:o.name))return t;if(""===t)return null;var i=b.default.getAutocompleteLastChoices(n.channel.id,e.name);if(null!=i){var a;return null!==(a=k(i,t))&&void 0!==a?a:r(t)}return r(t)},B=function(e){var t=e.toLowerCase()===M.TRUE_OPTION_NAME.toLowerCase(),n=e.toLowerCase()===M.FALSE_OPTION_NAME.toLowerCase();return t||n?t:null};function W(){return(W=x(regeneratorRuntime.mark((function e(t,n,i,l,d){var s,f,y,v,I,A,b,O,M,E,N,P,L,w,j,U,x,W,G,q,Q,Y,V,$,z,Z,X,J;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=i.autocomplete){e.next=5;break}o.default.dispatch({type:"APPLICATION_COMMAND_USED",context:i,command:t});if(!i.channel.isArchivedThread()){e.next=5;break}e.next=5;return p.default.unarchiveThread(i.channel,!1);case 5:I=[];A=[];if(null==t.options){e.next=53;break}b=D(t.options);case 9:if((O=b()).done){e.next=53;break}if((N=O.value).type!==u.ApplicationCommandOptionType.SUB_COMMAND&&N.type!==u.ApplicationCommandOptionType.SUB_COMMAND_GROUP&&N.name in n){e.next=13;break}
return e.abrupt("continue",51);case 13:P=(null===(M=i.autocomplete)||void 0===M?void 0:M.name)===N.name||void 0;L=null;if(N.type!==u.ApplicationCommandOptionType.STRING){e.next=21;break}U=null!==(w=null===(j=T.getOptionalString(n,N.name))||void 0===j?void 0:j.trim())&&void 0!==w?w:"";L=null!=N.choices?k(N.choices,U):N.autocomplete?R(N,U,i):U;(0,r.default)(null!=i.autocomplete||null!=L,'Option "'+N.name+'" expects a value');null!=L&&I.push({type:N.type,name:N.name,value:L,focused:P});return e.abrupt("continue",51);case 21:if(N.type!==u.ApplicationCommandOptionType.ATTACHMENT){e.next=25;break}if("continue"!==function(){var e=h.default.getUpload(i.channel.id,N.name,m.DraftType.ChannelMessage);if(null==e)return"continue";var t=h.default.getUploads(i.channel.id,m.DraftType.ChannelMessage).findIndex((function(t){return e.id===t.id}));A.push(e);L=t;I.push({type:N.type,name:N.name,value:L,focused:P});return"continue"}()){e.next=25;break}return e.abrupt("continue",51);case 25:x=T.filterEmpty(n[N.name]);(0,r.default)(null!=i.autocomplete||1===x.length,'Option "'+N.name+'" expects a single option type');if(null!=x[0]||P){e.next=29;break}return e.abrupt("continue",51);case 29:W=null!==(E=x[0])&&void 0!==E?E:{type:"text",text:""};e.t0=N.type;e.next=e.t0===u.ApplicationCommandOptionType.CHANNEL?33:e.t0===u.ApplicationCommandOptionType.ROLE?35:e.t0===u.ApplicationCommandOptionType.USER?37:e.t0===u.ApplicationCommandOptionType.MENTIONABLE?39:e.t0===u.ApplicationCommandOptionType.BOOLEAN?41:e.t0===u.ApplicationCommandOptionType.INTEGER?43:e.t0===u.ApplicationCommandOptionType.NUMBER?45:47;break;case 33:"channelMention"===W.type?L=W.channelId:"text"===W.type&&(L=W.text.trim());return e.abrupt("break",49);case 35:"roleMention"===W.type?L=W.roleId:"text"===W.type?L=W.text.trim():"textMention"===W.type&&"@everyone"===W.text&&(L=null===(G=i.guild)||void 0===G?void 0:G.id);return e.abrupt("break",49);case 37:"userMention"===W.type?L=W.userId:"text"===W.type&&(L=W.text.trim());return e.abrupt("break",49);case 39:"userMention"===W.type?L=W.userId:"roleMention"===W.type?L=W.roleId:"text"===W.type?L=W.text.trim():"textMention"===W.type&&"@everyone"===W.text&&(L=null===(q=i.guild)||void 0===q?void 0:q.id);return e.abrupt("break",49);case 41:"text"===W.type&&(L=B(W.text.trim()));return e.abrupt("break",49);case 43:if("text"===W.type){Q=W.text.trim();L=null!=N.choices?Number(k(N.choices,Q)):N.autocomplete?R(N,Q,i,Number):Number(T.normalizeNumericString(g.default.locale,Q))}return e.abrupt("break",49);case 45:if("text"===W.type){Y=W.text.trim();L=null!=N.choices?Number(k(N.choices,Y)):N.autocomplete?R(N,Y,i,Number):Number(T.normalizeNumericString(g.default.locale,Y))}return e.abrupt("break",49);case 47:(0,r.default)("Unsupported option type: "+N.type);return e.abrupt("continue",51);case 49:(0,r.default)(null!=i.autocomplete||null!=L,'Unexpected value for option "'+N.name+'"');null!=L&&I.push({type:N.type,name:N.name,value:L,focused:P});case 51:e.next=9;break;case 53:if(null!=t.subCommandPath)for(V=t.subCommandPath.length-1;V>=0;V-=1){$=t.subCommandPath[V],z=$.name,Z=$.type;I=[{type:Z,name:z,options:I}]}if(null==t.execute){e.next=57;break}c.default.trackWithMetadata(S.AnalyticEvents.APPLICATION_COMMAND_USED,{command_id:t.id,application_id:t.applicationId,command_type:t.type});return e.abrupt("return",t.execute(I,i));case 57:if(t.inputType!==_.ApplicationCommandInputType.BUILT_IN&&t.inputType!==_.ApplicationCommandInputType.BUILT_IN_TEXT&&t.inputType!==_.ApplicationCommandInputType.BUILT_IN_INTEGRATION){e.next=59;break}return e.abrupt("return");case 59:X={version:t.version,id:null!==(s=null===(f=t.rootCommand)||void 0===f?void 0:f.id)&&void 0!==s?s:t.id,guild_id:t.guildId,name:null!==(y=null===(v=t.rootCommand)||void 0===v?void 0:v.name)&&void 0!==y?y:t.name,type:t.type,options:I,application_command:t.rootCommand};J=function(){F(n)};null!=l&&(X.target_id=l);if(null!=i.autocomplete)(0,C.performAutocomplete)(t,i,X);else{a.default.clearAll(i.channel.id,m.DraftType.ChannelMessage);H(t.applicationId,X,i,A,d,J)}case 63:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){var t=Object.values(e).flatMap((function(e){return e.map((function(e){return"emoji"===e.type?{name:e.name.replaceAll(":","")}:"customEmoji"===e.type?y.default.getCustomEmojiById(e.emojiId):null})).filter(A.isNotNullish)}));t.length>0&&o.default.dispatch({type:S.ActionTypes.EMOJI_TRACK_USAGE,emojiUsed:t})};t.retryCommandMessage=function(e,t,n){if(e.isCommandType()){var r=t.guild_id;null!=e.interactionData&&H(n,e.interactionData,{channel:t,guild:null!=r?v.default.getGuild(r):null})}};var H=function(e,t,n,r,a,c){var p=n.channel,m=n.guild,y=p.id,v=null==m?void 0:m.id,h=L((0,O.getInteractionAuthor)(n,e),2),g=h[0],A=h[1],C=t.type===u.ApplicationCommandType.CHAT?S.MessageTypes.CHAT_INPUT_COMMAND:S.MessageTypes.CONTEXT_MENU_COMMAND,b=(0,f.default)(y,"",!1,C,void 0,void 0,null!=g?g:void 0);b.application=null!=A?A:void 0;b.interaction={id:t.id,name:t.name,type:u.InteractionTypes.APPLICATION_COMMAND,user:(0,f.userRecordToServer)(I.default.getCurrentUser())};b.interaction_data=t;var T={applicationId:e,channelId:y,guildId:v,data:t,nonce:b.id,attachments:r,maxSizeCallback:a};i.default.receiveMessage(y,b,!0,{applicationId:e});d.addQueued(T.nonce,{messageId:b.id,onCreate:function(e){null!=b.interaction&&(b.interaction.id=e)},onFailure:function(e,t){return function(e,t){null==t&&null!=e&&i.default.sendClydeError(y,e);o.default.dirtyDispatch({type:S.ActionTypes.MESSAGE_SEND_FAILED,messageId:b.id,channelId:y,reason:t})}(e,t)},data:{interactionType:u.InteractionTypes.APPLICATION_COMMAND,channelId:y}});l.default.enqueue({type:l.MessageDataType.COMMAND,message:T},(function(e){(0,s.handleInteractionResponse)(T.nonce,e);e.ok&&null!=c&&c()}))}},807149:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useApplicationCommandsDiscoveryState=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),o=g(n(496486)),i=n(536211),a=g(n(689389)),u=g(n(728429)),l=n(481414),c=g(n(117883)),d=n(166806),s=g(n(290760)),f=g(n(632184)),p=g(n(473517)),m=n(65621),y=n(153823),v=n(484278),h=n(770348);function g(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function A(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _={guildCommandSections:null,guildCommands:null,filteredApplicationId:null},O=function(e,t,n){return{type:n,inputType:m.ApplicationCommandInputType.PLACEHOLDER,id:"placeholder-"+e+"-"+t,name:"",displayName:"",description:"",displayDescription:"",applicationId:""}};t.useApplicationCommandsDiscoveryState=function(e,t,n,g){var I=(0,i.useStateFromStoresObject)([p.default,f.default,a.default],(function(){if(null==e.guild)return _;if(!a.default.can(h.Permissions.USE_APPLICATION_COMMANDS,e.channel))return _;var t=e.guild.id;return{guildCommandSections:p.default.getGuildSections(t),guildCommands:f.default.getGuildCommands(t,n),filteredApplicationId:f.default.getFilteredApplicationId(t)}}),[e,n]),b=I.guildCommandSections,T=I.guildCommands,M=I.filteredApplicationId,S=r.useMemo((function(){return null==b?void 0:b.filter((function(e){var t,r;return(null!==(t=null===(r=e.commandCountByType)||void 0===r?void 0:r[n])&&void 0!==t?t:0)>0}))}),[b,n]),E=(0,i.useStateFromStoresObject)([c.default,u.default],(function(){var t,r,o;if((null===(t=e.channel)||void 0===t?void 0:t.type)!==h.ChannelTypes.DM)return{dmCommandSections:null,dmCommands:null};var i=null===(r=e.channel)||void 0===r?void 0:r.getRecipientId(),a=u.default.getUser(i);if(null==a||!0!==a.bot)return{dmCommandSections:null,dmCommands:null};var l=c.default.getCommands(i,n);return{dmCommandSections:null!=l&&l.length>0?[{id:l[0].applicationId,type:m.ApplicationCommandSectionType.DM,name:a.username,commandCountByType:(o={},o[n]=l.length,o),icon:a.avatar}]:[],dmCommands:l}})),N=E.dmCommandSections,P=E.dmCommands,D=r.useMemo((function(){return function(e,t,n){var r=e.channel,o=e.guild;return null!=r?(0,l.getBuiltInCommands)(t,!0,n).filter((function(e){return null==e.predicate||e.predicate({channel:r,guild:o})})):[]}(e,n,g)}),[g,e,n]),L=(0,d.useTopCommands)(e),w=C(r.useState(!1),2),j=w[0],U=w[1];r.useEffect((function(){U(!1)}),[e,n]);var x=r.useMemo((function(){var t,n=(null!==(t=null!=e.guild?null==T?void 0:T.commandsArray:P)&&void 0!==t?t:[]).concat(D).filter((function(e){return!!L.includes(e.id)&&!!(0,y.hasAccess)(e)})).sort((function(t,n){var r=s.default.getScoreWithoutLoadingLatest(e,t);return s.default.getScoreWithoutLoadingLatest(e,n)-r})).slice(0,v.DISCOVERY_COMMANDS_FRECENCY_LIMIT);n.length>0&&U(!0);return n}),[D,e,L,P,null==T?void 0:T.commandsArray]),k=r.useMemo((function(){var t;if(g)return[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.BUILT_IN]];var n=j?[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.FRECENCY]]:[],r=null!==(t=null!=e.guild?S:N)&&void 0!==t?t:[],o=[l.BUILT_IN_SECTIONS[v.BuiltInSectionId.BUILT_IN]];return[].concat(n,A(r),o)}),[g,e.guild,N,S,j]),R=r.useMemo((function(){if(null!=M)return{hasMoreBefore:!1,hasMoreAfter:!1};var e=k.reduce((function(e,t){var r;return e+(null!=t.commandCountByType&&null!==(r=t.commandCountByType[n])&&void 0!==r?r:0)}),0);return{hasMoreBefore:null!=T&&T.topOffset>0&&e>0,hasMoreAfter:null!=T&&T.bottomOffset<e-1}}),[T,k,n,M]),B=R.hasMoreBefore,W=R.hasMoreAfter,F=r.useMemo((function(){if(!B)return[];for(var e=[],r=0;r<t;r++)e.push(O("before",r,n));return e}),[B,t,n]),H=r.useMemo((function(){if(!W)return[];for(var e=[],r=0;r<t;r++)e.push(O("after",r,n));return e}),[W,t,n]),G=r.useMemo((function(){var t;if(g)return D;var n=null!==(t=null!=e.guild?null==T?void 0:T.commandsArray:P)&&void 0!==t?t:[];W||(n=n.concat(D));return n}),[D,g,e.guild,P,T,W]),q=r.useMemo((function(){return B?G:x.concat(G)}),[G,x,B]),Q=r.useMemo((function(){var e={},t=o.default.chain(G).filter((function(e){return!!e.listed||e.inputType===m.ApplicationCommandInputType.BUILT_IN||e.inputType===m.ApplicationCommandInputType.BUILT_IN_TEXT||e.inputType===m.ApplicationCommandInputType.BUILT_IN_INTEGRATION})).groupBy((function(e){return e.applicationId})).value();!B&&x.length>0&&(t[v.BuiltInSectionId.FRECENCY]=x);var r=k.map((function(n){var r,o=null!==(r=t[n.id])&&void 0!==r?r:[];n.type===m.ApplicationCommandSectionType.BUILT_IN&&(e[n.id]=o.length);return{data:o,section:n,key:n.id}})).filter((function(e){return(null==M||e.section.id===M)&&e.data.length>0}));if(r.length>0){var i,a;(i=r[0].data).unshift.apply(i,A(F));(a=r[r.length-1].data).push.apply(a,A(H))}var u=r.reduce((function(e,t){return e.concat(t.data)}),[]),l=[],c=0;k.forEach((function(t){var r,o;l.push(c);var i=null!=t.commandCountByType&&null!==(r=t.commandCountByType[n])&&void 0!==r?r:0;c+=t.type===m.ApplicationCommandSectionType.BUILT_IN?null!==(o=e[t.id])&&void 0!==o?o:0:i}));return{discoverySections:r,sectionsOffset:l,discoveryCommands:u,builtInSectionCommandCount:e}}),[G,x,F,H,k,B,n,M]),Y=Q.discoverySections,V=Q.sectionsOffset,$=Q.discoveryCommands;return{filteredApplicationId:M,discoverySections:Y,applicationCommandSections:k,discoveryCommands:$,commands:q,guildCommands:T,sectionsOffset:V,hasMoreBefore:B,hasMoreAfter:W}}},456206:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r)}(n(667294));var r,o=a(n(810919)),i=a(n(767846));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t,n,o){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var c=l(o.default,{dotRadius:4,themed:!0}),d=function(){return l("div",{className:i.default.loadingWrapper},void 0,c)};d.displayName="ApplicationCommandLoadingMenuItem";var s=d;t.default=s},159872:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,o=P(n(667294)),i=E(n(441143)),a=E(n(496486)),u=n(536211),l=P(n(536487)),c=E(n(117883)),d=E(n(473517)),s=n(905043),f=n(65621),p=n(153823),m=E(n(462936)),y=n(807149),v=n(396229),h=E(n(456206)),g=n(145122),I=n(567186),A=E(n(644263)),C=E(n(30098)),b=E(n(689389)),T=E(n(728429)),_=n(770348),O=n(484278),M=E(n(247001)),S=E(n(929945));function E(e){return e&&e.__esModule?e:{default:e}}function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}function D(e,t,n,o){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var L=a.default.debounce((function(e,t,n,r,o,i){l.getApplicationDiscoveryCommands(e,t,n,!1,r,o,i)}),100,{maxWait:100}),w=D(h.default,{}),j=function(e,t,n,r,a){var h=o.useRef(!1),E=(0,u.useStateFromStoresObject)([A.default,C.default],(function(){var e=A.default.getChannel(n);return{channel:e,guild:C.default.getGuild(null!=r?r:null==e?void 0:e.guild_id)}})),N=E.channel,P=E.guild,j=o.useCallback((function(t,n,r){void 0===r&&(r=O.DISCOVERY_COMMANDS_QUERY_LIMIT);null!=(null==P?void 0:P.id)&&L(P.id,t,r,!1,e,n)}),[P,e]),U=function(e,t,n){o.useEffect((function(){var r;if(null!=(null==n?void 0:n.id)&&(null==n||null===(r=n.applicationCommandCounts)||void 0===r?void 0:r[e])>0)l.queryGuildApplications(null==n?void 0:n.id,15,e);else if((null==t?void 0:t.type)===_.ChannelTypes.DM){var o=T.default.getUser(t.getRecipientId());!0===(null==o?void 0:o.bot)&&null==c.default.getCommands(o.id,e)&&l.queryDmApplicationCommands(o.id,e)}}),[t,e,n]);var r=(0,y.useApplicationCommandsDiscoveryState)({channel:t,guild:n},1,e),i=r.discoveryCommands,a=r.hasMoreAfter,u=r.guildCommands;return{visible:o.useMemo((function(){var r,o=(null==t?void 0:t.type)===_.ChannelTypes.DM;return null!=t&&(o||b.default.can(_.Permissions.USE_APPLICATION_COMMANDS,t))&&(0,I.isTextChannel)(t.type)&&!t.isArchivedThread()&&(o&&i.length>0||(null!==(r=null==n?void 0:n.applicationCommandCounts[e])&&void 0!==r?r:0)>0)}),[t,e,null==n?void 0:n.applicationCommandCounts,i.length]),discoveryCommands:i,hasMoreAfter:a,guildCommands:u}}(e,N,P),x=U.visible,k=U.discoveryCommands,R=U.hasMoreAfter,B=U.guildCommands;o.useEffect((function(){if(x!==h.current){x&&(null==a||a());h.current=x}}),[x,a]);o.useEffect((function(){(null==B?void 0:B.isStale)&&j(0,{sectionId:null,offset:0})}),[null==B?void 0:B.isStale,j]);var W=o.useCallback((function(e){null!=B&&!B.loadingMore&&R&&e+500>34*k.length-40&&j(B.bottomOffset+1)}),[k.length,R,B,j]),F=o.useCallback((function(e){if(e.inputType===f.ApplicationCommandInputType.PLACEHOLDER)return D(g.MenuItem,{id:"menu-command-"+e.id,render:function(){return w}},"menu-command-"+e.id);if(null!=N){var n=(0,s.getCommandSection)(e.applicationId,d.default,T.default,N),r=null!=n?(0,v.getIconComponent)(n):void 0;return D(g.MenuItem,{id:e.id,label:e.name,showIconFirst:!0,disabled:!(0,p.hasAccess)(e),icon:function(){return null!=r?D(r,{channel:N,section:n,width:18,height:18,selectable:!1}):null},action:function(){(0,i.default)(!N.isArchivedThread(),"Context menu commands cannot be run on archived threads.");(0,m.default)(e,{},{channel:N,guild:P},t)}},e.id)}return null}),[N,P,t]);return x&&D(g.MenuItem,{id:"apps",label:M.default.Messages.APPS,onChildrenScroll:W,childRowHeight:34,listClassName:S.default.list},void 0,k.map(F))};t.default=j},804296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=A(n(441143)),a=n(536211),u=n(375543),l=n(65621),c=A(n(462936)),d=n(396229),s=A(n(456206)),f=n(145122),p=n(567186),m=A(n(644263)),y=A(n(30098)),v=A(n(689389)),h=n(770348),g=A(n(247001)),I=A(n(929945));function A(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function b(e,t,n,o){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var T=b(s.default,{}),_=function(e,t,n,r,s){var A=o.useRef(!1),C=(0,a.useStateFromStoresObject)([m.default,y.default],(function(){var e=m.default.getChannel(n);return{channel:e,guild:y.default.getGuild(null!=r?r:null==e?void 0:e.guild_id)}})),_=C.channel,O=C.guild,M=(0,u.useSearchManager)(_,e,1,15),S=M.hasMoreAfter,E=M.scrollDown,N=M.sectionDescriptors,P=M.commands,D=M.placeholders,L=o.useMemo((function(){var e=P.concat(D),t={};N.forEach((function(e){t[e.id]=e}));return{visibleCommands:e,sections:t}}),[P,N,D]),w=L.visibleCommands,j=L.sections,U=o.useMemo((function(){var t,n=(null==_?void 0:_.type)===h.ChannelTypes.DM;return null!=_&&(n||v.default.can(h.Permissions.USE_APPLICATION_COMMANDS,_))&&(0,p.isTextChannel)(_.type)&&!_.isArchivedThread()&&(n&&w.length>0||(null!==(t=null==O?void 0:O.applicationCommandCounts[e])&&void 0!==t?t:0)>0)}),[_,e,null==O?void 0:O.applicationCommandCounts,w.length]);o.useEffect((function(){if(U!==A.current){U&&(null==s||s());A.current=U}}),[U,s]);var x=o.useCallback((function(e){S&&e+500>34*w.length-40&&E()}),[S,E,w]),k=o.useCallback((function(e){if(e.inputType===l.ApplicationCommandInputType.PLACEHOLDER)return b(f.MenuItem,{id:"menu-command-"+e.id,render:function(){return T}},"menu-command-"+e.id);(0,i.default)(null!=_,"menu item should not show if channel is null");var n=j[e.applicationId],r=null!=n?(0,d.getIconComponent)(n):void 0;return b(f.MenuItem,{id:e.id,label:e.name,showIconFirst:!0,icon:function(){return null!=r?b(r,{channel:_,section:n,width:18,height:18,selectable:!1}):null},action:function(){(0,i.default)(!_.isArchivedThread(),"Context menu commands cannot be run on archived threads.");(0,c.default)(e,{},{channel:_,guild:O},t)}},e.id)}),[_,O,t,j]);return U&&b(f.MenuItem,{id:"apps",label:g.default.Messages.APPS,onChildrenScroll:x,childRowHeight:34,listClassName:I.default.list},void 0,w.map(k))};t.default=_},96763:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=s;var r,o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),a=(r=n(468205))&&r.__esModule?r:{default:r},u=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return c.apply(this,arguments)}function d(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=r;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}
if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function s(e){var t=e.width,n=void 0===t?24:t,r=e.height,o=void 0===r?24:r,l=e.color,s=void 0===l?"currentColor":l,f=e.foreground,p=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,u);return i.createElement("svg",c({},(0,a.default)(p),{width:n,height:o,viewBox:"0 0 24 24"}),d("path",{className:f,fill:s,fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM8.79741 7.72V16H6.74541V7.72H8.79741ZM13.2097 7.72C16.0897 7.72 17.5897 9.388 17.5897 11.848C17.5897 14.308 16.0537 16 13.2577 16H10.3537V7.72H13.2097ZM13.1497 14.404C14.6137 14.404 15.5257 13.636 15.5257 11.86C15.5257 10.12 14.5537 9.316 13.1497 9.316H12.4057V14.404H13.1497Z"}))}
s.displayName="CopyID"}}]);