"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66845],{264720:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.popAllLayers=function(){o.default.dirtyDispatch({type:i.ActionTypes.LAYER_POP_ALL})};t.popLayer=function(){o.default.dirtyDispatch({type:i.ActionTypes.LAYER_POP})};t.pushLayer=function(e){o.default.dirtyDispatch({type:i.ActionTypes.LAYER_PUSH,component:e})};var r,o=(r=n(636602))&&r.__esModule?r:{default:r},i=n(770348)},226800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=f(n(118915)),o=f(n(972247)),i=f(n(636602)),u=f(n(516818)),a=f(n(308920)),l=n(692711),s=f(n(40856)),c=n(264720),p=n(770348),d=f(n(247001));function f(e){return e&&e.__esModule?e:{default:e}}function _(){_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return _.apply(this,arguments)}function S(e,t,n){
void 0===t&&(t=null);i.default.dispatch(_({type:p.ActionTypes.USER_SETTINGS_MODAL_INIT,section:e,subsection:t},n))}var T={open:function(e,t,n){void 0===e&&(e=null);void 0===t&&(t=null);void 0===n&&(n={openWithoutBackstack:!1});S(e,t,n);(0,c.pushLayer)(p.Layers.USER_SETTINGS)},init:S,close:function(){var e=u.default.onClose;i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_CLOSE});null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null);i.default.dirtyDispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION,section:e,subsection:t})},clearSubsection:function(){i.default.dirtyDispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_CLEAR_SUBSECTION})},updateAccount:function(e){i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT,settings:e})},submitComplete:function(){i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE})},reset:function(){i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_RESET})},
saveAccountChanges:function(e,t){var n=this;i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_SUBMIT});var u=e.username,c=e.email,f=e.emailToken,S=e.password,T=e.avatar,E=e.newPassword,y=e.discriminator,O=t.close;return(0,s.default)({title:d.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(e){var t=_({username:u,email:c,email_token:f,password:S,avatar:T,new_password:E},e,{discriminator:null!=y&&""!==y?y:void 0}),n=o.default.get(p.DEVICE_TOKEN);if(null!=p.DEVICE_PUSH_PROVIDER&&null!=n){t.push_provider=p.DEVICE_PUSH_PROVIDER;t.push_token=n}var i=o.default.get(p.DEVICE_VOIP_TOKEN);if(null!=p.DEVICE_PUSH_VOIP_PROVIDER&&null!=i){t.push_voip_provider=p.DEVICE_PUSH_VOIP_PROVIDER;t.push_voip_token=i}return r.default.patch({url:p.Endpoints.ME,body:t,oldFormErrors:!0})}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body,r=t.token
;a.default.track(p.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,l.isAnimatedIconHash)(t.avatar)});delete t.token;i.default.dispatch({type:p.ActionTypes.UPDATE_TOKEN,token:r,userId:t.id});i.default.dispatch({type:p.ActionTypes.CURRENT_USER_UPDATE,user:t});null!=E&&i.default.dispatch({type:p.ActionTypes.USER_PASSWORD_UPDATE,user:t,newPassword:E});O?n.close():n.submitComplete();return e}),(function(e){i.default.dispatch({type:p.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:e.body});return e}))}};t.default=T},516818:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,o=s(n(496486)),i=s(n(536211)),u=s(n(636602)),a=s(n(728429)),l=n(770348);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}
function d(){d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return d.apply(this,arguments)}var f=l.FormStates.CLOSED,_=null,S={},T={},E=null,y=null,O=!1,A=!1,v=null,h=null,U=null;function I(e){var t,n,r,o,i=a.default.getCurrentUser();if(null==i)return C();_=null!==(t=e.section)&&void 0!==t?t:_;null!=e.subsection&&null!=_&&(S[_]=e.subsection);A=!!e.openWithoutBackstack;f=l.FormStates.OPEN;T={};E=((n={})[l.UserSettingsSections.ACCOUNT]={userId:i.id,username:i.username,discriminator:i.discriminator,email:i.email,avatar:i.avatar,password:"",newPassword:null,claimed:i.isClaimed()},n);y=d({},E);h=null!==(r=e.onClose)&&void 0!==r?r:null;U=null!==(o=e.analyticsLocation)&&void 0!==o?o:null}function C(){f=l.FormStates.CLOSED;O=!1;E=null;y=null;_=null;S={};h=null;U=null}function N(){f=l.FormStates.OPEN;T={}}var R=function(e){!function(e,t){e.prototype=Object.create(t.prototype)
;e.prototype.constructor=e;p(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(a.default)};n.hasChanges=function(){return null!=y&&null!=E&&(!(!this.isOpen()&&v!==l.DrawerTabTypes.USER_SETTINGS)&&!o.default.isEqual(y,E))};n.isOpen=function(){return O};n.getSection=function(){return _};n.getSubsection=function(){return null!=_?S[_]:null};n.shouldOpenWithoutBackstack=function(){return A};n.getProps=function(){return{submitting:f===l.FormStates.SUBMITTING,section:_,subsection:null!=S&&null!=_?S[_]:null,settings:y,errors:T,hasChanges:this.hasChanges(),openWithoutBackstack:A,analyticsLocation:U}};!function(e,t,n){t&&c(e.prototype,t);n&&c(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onClose",get:function(){return h}}]);return t}(i.default.Store);R.displayName="UserSettingsModalStore";var b=new R(u.default,((r={})[l.ActionTypes.USER_SETTINGS_MODAL_OPEN]=function(e){O=!0;I(e)},
r[l.ActionTypes.USER_SETTINGS_MODAL_INIT]=I,r[l.ActionTypes.USER_SETTINGS_MODAL_CLOSE]=C,r[l.ActionTypes.LOGOUT]=C,r[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT]=function(){f=l.FormStates.SUBMITTING},r[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE]=function(e){var t;if(f!==l.FormStates.SUBMITTING)return!1;f=l.FormStates.OPEN;_=l.UserSettingsSections.ACCOUNT;T=null!==(t=e.errors)&&void 0!==t?t:{}},r[l.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION]=function(e){_=e.section;null!=e.subsection&&(S[_]=e.subsection)},r[l.ActionTypes.USER_SETTINGS_MODAL_CLEAR_SUBSECTION]=function(){null!=_&&delete S[_]},r[l.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT]=function(e){var t=e.settings;null==y&&(y={});var n=y[l.UserSettingsSections.ACCOUNT];y[l.UserSettingsSections.ACCOUNT]=d({},n,{},t)},r[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE]=N,r[l.ActionTypes.USER_SETTINGS_MODAL_RESET]=function(){var e=a.default.getCurrentUser();N();if(null!=e){var t;E=((t={})[l.UserSettingsSections.ACCOUNT]={
userId:e.id,username:e.username,discriminator:e.discriminator,email:e.email,avatar:e.avatar,password:"",newPassword:null,claimed:e.isClaimed()},t);y=d({},E)}},r[l.ActionTypes.DRAWER_SELECT_TAB]=function(e){v=e.tab;return null==_&&v===l.DrawerTabTypes.USER_SETTINGS&&I({type:l.ActionTypes.USER_SETTINGS_MODAL_INIT,section:null,subsection:null,openWithoutBackstack:!1})},r));t.default=b},417184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=p;var r,o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),u=(r=n(468205))&&r.__esModule?r:{default:r
},a=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return s.apply(this,arguments)}function c(e,t,n,r){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=r;else if(u>1){for(var a=new Array(u),l=0;l<u;l++)a[l]=arguments[l+3];t.children=a}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){var t=e.width,n=void 0===t?20:t,r=e.height,o=void 0===r?20:r,l=e.color,p=void 0===l?"currentColor":l,d=e.foreground,f=function(e,t){if(null==e)return{}
;var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,a);return i.createElement("svg",s({},(0,u.default)(f),{width:n,height:o,viewBox:"0 0 20 20"}),c("path",{d:"M10 0C4.486 0 0 4.486 0 10C0 15.515 4.486 20 10 20C15.514 20 20 15.515 20 10C20 4.486 15.514 0 10 0ZM9 4H11V11H9V4ZM10 15.25C9.31 15.25 8.75 14.691 8.75 14C8.75 13.31 9.31 12.75 10 12.75C10.69 12.75 11.25 13.31 11.25 14C11.25 14.691 10.69 15.25 10 15.25Z",fillRule:"evenodd",clipRule:"evenodd",className:d,fill:p}))}p.displayName="WarningCircle"}}]);
//# sourceMappingURL=b963570b4c5e3ff452e4.js.map