"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[86955],{839924:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.getGuildIdentitySettingsPatch=function(e){var t=e.pendingAvatar,n=e.pendingNickname,r=e.pendingBanner,a=e.pendingBio,i={};void 0!==t&&(i.avatar=t);void 0!==r&&(i.banner=r);null!=a&&(i.bio=a);void 0!==n&&(i.nick=n);return i};t.setNewPendingGuildIdentityBio=function(e,t){(0,r.setPendingBio)(e===t?void 0:e)};t.setNewPendingNickname=function(e,t){(0,r.setPendingNickname)(e===t?void 0:e)};var r=n(799393)},862976:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=E;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}(n(667294)),i=n(536211),l=f(n(669879)),u=f(n(871778)),o=n(799393),s=f(n(350957)),d=n(839924);function f(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function g(e,t,n,r,a,i,l){try{var u=e[i](l),o=u.value}catch(e){n(e);return}u.done?t(o):Promise.resolve(o).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){g(i,r,a,l,u,"next",e)}function u(e){g(i,r,a,l,u,"throw",e)}l(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;a=e}finally{try{l||null==n.return||n.return()}finally{if(u)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(){var e=(0,i.useStateFromStores)([u.default],(function(){return u.default.theme})),t=(0,i.useStateFromStores)([s.default],(function(){return s.default.getIsDisableSubmit()})),n=(0,i.useStateFromStores)([s.default],(function(){return s.default.getGuild()})),r=m(a.useState(!1),2),f=r[0],c=r[1],g=a.useCallback(v(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);t=s.default.getAllPending();r=(0,d.getGuildIdentitySettingsPatch)(t);if(0!==Object.keys(r).length){e.next=5;break}return e.abrupt("return");case 5:e.next=7;return(0,o.saveGuildIdentityChanges)(null==n?void 0:n.id,r);case 7:(null==(a=e.sent)?void 0:a.ok)&&(0,o.resetAllPending)();c(!1);case 10:case"end":return e.stop()}}),e)}))),[null==n?void 0:n.id]),y=a.useCallback((function(){(0,o.resetAllPending)()}),[]);return p(l.default,{theme:e,submitting:f,onSave:g,onReset:y,disabled:t})}E.displayName="GuildIdentitySettingsNotice"},799017:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=J;var r,a=x(n(667294)),i=F(n(441143)),l=n(235234),u=n(536211),o=F(n(636602)),s=F(n(226800)),d=F(n(898361)),f=F(n(844784)),c=x(n(125478)),p=F(n(468532)),g=F(n(845176)),v=F(n(482117)),m=F(n(498163)),y=F(n(561511)),E=F(n(876874)),I=F(n(871778)),_=F(n(728429)),N=F(n(956117)),S=F(n(380439)),P=F(n(60097)),b=F(n(730977)),O=F(n(41024)),h=F(n(417184)),M=n(194322),A=F(n(776360)),T=F(n(308920)),C=F(n(838583)),R=n(799393),k=F(n(350957)),w=n(839924),L=F(n(862976)),G=F(n(65139)),U=n(770348),B=n(265517),D=F(n(247001)),j=F(n(923247));function F(e){return e&&e.__esModule?e:{default:e}}function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e;n&&n.set(e,r);return r}function H(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Y(){Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return Y.apply(this,arguments)}function z(e,t,n,r,a,i,l){try{var u=e[i](l),o=u.value}catch(e){n(e);return}u.done?t(o):Promise.resolve(o).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){z(i,r,a,l,u,"next",e)}function u(e){z(i,r,a,l,u,"throw",e)}l(void 0)}))}}function K(){T.default.track(U.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:U.AnalyticsPages.GUILD_MEMBER_PROFILE_SETTINGS,location_object:U.AnalyticsObjects.BADGE});(0,R.closeGuildIdentitySettings)();s.default.open(U.UserSettingsSections.PREMIUM)}function V(e){(0,M.openModalLazy)($(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return Promise.all([n.e(40532),n.e(83084)]).then(n.bind(n,858023));case 2:r=t.sent;i=r.default;return t.abrupt("return",(function(t){return a.createElement(i,Y({source:Y({},e,{page:U.AnalyticsPages.GUILD_MEMBER_PROFILE_SETTINGS})},t))}));case 5:case"end":return t.stop()}}),t)}))))}function Z(e){var t=e.onUpsellClick;a.useEffect((function(){T.default.track(U.AnalyticEvents.PREMIUM_UPSELL_VIEWED,{type:B.PremiumUpsellTypes.PREMIUM_GUILD_MEMBER_PROFILE_UPSELL_INLINE,location:{page:U.AnalyticsPages.GUILD_CHANNEL,section:U.AnalyticsSections.PREMIUM_GUILD_MEMBER_PROFILE}})}),[]);return H("div",{className:j.default.upsellContainer},void 0,H(A.default,{},void 0,D.default.Messages.GUILD_IDENTITY_SETTINGS_UPSELL_NO_LINK),H(P.default,{size:N.default.Sizes.SMALL,onClick:t,color:N.default.Colors.GREEN,className:j.default.upsellButton,innerClassName:j.default.upsellButtonInner},void 0,H(O.default,{className:j.default.premiumIconButton}),D.default.Messages.CHANGE_IDENTITY_UPSELL))}Z.displayName="InlineUpsell";var X="GUILD_IDENTITY_SETTINGS_PAGE";function q(){var e,t,n,r=(0,u.useStateFromStores)([_.default],(function(){var e=_.default.getCurrentUser();(0,i.default)(null!=e,"GuildIdentitySettingsPage: user cannot be undefined");return e})),d=(0,u.useStateFromStoresObject)([k.default],(function(){var e=k.default.getAllPending(),t=e.pendingAvatar,n=e.pendingNickname,r=e.pendingBio;return{pendingAvatar:t,pendingNickname:n,pendingBanner:e.pendingBanner,pendingBio:r,errors:k.default.getErrors(),guild:k.default.getGuild(),source:k.default.getSource()}})),I=d.pendingAvatar,N=d.pendingNickname,P=d.pendingBanner,M=d.pendingBio,T=d.errors,L=d.guild,B=d.source,F=(0,u.useStateFromStores)([E.default],(function(){return null==L?null:E.default.getMember(L.id,r.id)}));a.useEffect((function(){return function(){return o.default.wait(R.resetAllPending)}}),[]);a.useEffect((function(){null!=B&&f.default.trackWithMetadata(U.AnalyticEvents.SETTINGS_PANE_VIEWED,{settings_type:"guild",destination_pane:U.AnalyticsSections.SETTINGS_CUSTOMIZE_PROFILE,source:B})}),[B]);var W=void 0===I?r.getAvatarURL(null==L?void 0:L.id,80,!0):I,x=null!==(e=(0,l.hex2int)((0,c.default)(W,U.Colors.PRIMARY_DARK_530,c.ColorFormats.HEX)))&&void 0!==e?e:0,z=C.default.canUsePremiumProfileCustomization(r),$=void 0===I?null!=(null==F?void 0:F.avatar):null!=I,X=void 0===P?null!=(null==F?void 0:F.banner):null!=P,q=null!==(t=null==F?void 0:F.bio)&&void 0!==t?t:"";return null==L?null:a.createElement(a.Fragment,null,H("div",{className:j.default.notice},void 0,H(h.default,{className:j.default.warningCircleIcon}),H(A.default,{},void 0,D.default.Messages.CHANGE_IDENTITY_USER_PROFILE_HELP.format({onUserProfileClick:function(){(0,R.closeGuildIdentitySettings)();s.default.open(U.UserSettingsSections.PROFILE_CUSTOMIZATION)}}))),H(p.default,{title:H("span",{className:j.default.title},void 0,D.default.Messages.CHANGE_IDENTITY_SERVER_PROFILE),description:H(A.default,{className:j.default.guildInfo},void 0,H(S.default,{className:j.default.guildIconInline,guild:L,size:S.default.Sizes.MINI},"guild-icon"),H("span",{},void 0,L.name)),previewTitle:D.default.Messages.CHANGE_IDENTITY_PREVIEW,customizationSections:[H(G.default,{username:r.toString(),pendingNick:N,currentNick:null==F?void 0:F.nick,guild:L},"nick"),z?null:H(Z,{onUpsellClick:function(){return V({object:U.AnalyticsObjects.BUTTON_CTA})}}),H(m.default,{sectionTitle:a.createElement(a.Fragment,null,D.default.Messages.USER_SETTINGS_AVATAR,H(b.default,{text:D.default.Messages.PROFILE_CUSTOMIZATION_NITRO_ICON_TOOLTIP},void 0,(function(e){return a.createElement(O.default,Y({},e,{className:j.default.nitroWheel}))}))),showRemoveAvatarButton:$,onAvatarChange:R.setPendingAvatar,errors:T.avatar,guildId:L.id,disabled:!z},"avatar"),H(y.default,{sectionTitle:D.default.Messages.USER_SETTINGS_PROFILE_BANNER,canUsePremiumCustomization:z,showRemoveBannerButton:X,errors:T.banner,upsellButton:null,onBannerChange:R.setPendingBanner,guildId:null==L?void 0:L.id,disabled:!z},"banner"),H(v.default,{placeholder:D.default.Messages.CHANGE_IDENTITY_BIO_PLACEHOLDER,sectionTitle:a.createElement(a.Fragment,null,D.default.Messages.USER_PROFILE_ABOUT_ME,H(b.default,{text:D.default.Messages.PROFILE_CUSTOMIZATION_NITRO_ICON_TOOLTIP},void 0,(function(e){return a.createElement(O.default,Y({},e,{className:j.default.nitroWheel}))}))),onBioChange:function(e){(0,w.setNewPendingGuildIdentityBio)(e,q);(0,R.setDisableSubmit)(null!=e&&e.length>U.BIO_MAX_LENGTH)},errors:T.bio,pendingBio:M,currentBio:q,disabled:!z},"about")],profilePreview:H(g.default,{user:r,guild:L,canUsePremiumCustomization:z,bannerColor:null!==(n=r.accentColor)&&void 0!==n?n:x,onAvatarChange:R.setPendingAvatar,onBannerChange:R.setPendingBanner,onUpsellClick:V,pendingBanner:P,pendingBio:M,pendingAvatar:I,pendingNickname:N,activityName:D.default.Messages.CHANGE_IDENTITY_SERVER_PROFILE,activityCharacter:"phibi",openPremiumSettings:K})}))}function J(){var e=(0,u.useStateFromStores)([I.default],(function(){return I.default.theme}));return H(d.default,{theme:e,section:X,sections:[{section:X,label:null,element:q,notice:{store:k.default,element:L.default}}],onClose:R.closeGuildIdentitySettings,hideSidebar:!0})}J.displayName="GuildIdentitySettings"},65139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=m;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e;n&&n.set(e,r)}(n(667294));var r,a=n(536211),i=p(n(456701)),l=p(n(689389)),u=p(n(279950)),o=n(688388),s=n(839924),d=n(770348),f=p(n(247001)),c=p(n(514049));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var u=new Array(l),o=0;o<l;o++)u[o]=arguments[o+3];t.children=u}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e){var t=e.errors,n=e.pendingNick,r=e.currentNick,p=e.username,g=e.guild,m=null!=n?n:r,y=(0,a.useStateFromStores)([l.default],(function(){return l.default.can(d.Permissions.CHANGE_NICKNAME,g)||l.default.can(d.Permissions.MANAGE_NICKNAMES,g)}));return v(i.default,{title:f.default.Messages.NICKNAME,errors:t},void 0,v(u.default,{value:null!=m?m:"",placeholder:p,maxLength:d.USERNAME_MAX_LENGTH,onChange:function(e){(0,s.setNewPendingNickname)(e,r)},disabled:!y}),!y&&v(o.FormText,{className:c.default.nicknameDisabled,type:o.FormText.Types.DESCRIPTION},void 0,f.default.Messages.CHANGE_IDENTITY_NICKNAME_PERMISSIONS_DISABLED))}m.displayName="NicknameSection"}}]);