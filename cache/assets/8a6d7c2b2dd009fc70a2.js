"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[39447],{651510:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useActiveGuildThreads=function(e){var t=(0,u.useStateFromStoresArray)([i.default,c.default,o.default],(function(){return(0,a.default)(c.default.getThreadsForGuild(e)).values().map((function(e){var t=e.id;return o.default.getChannel(t)})).filter(s.isNotNullish).filter((function(e){return i.default.can(y.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return n.useMemo((function(){return(0,a.default)(t).sort((function(e,t){return d.default.compare(f.default.lastMessageId(e),f.default.lastMessageId(t))})).reverse().value()}),[t])};t.useActiveThreadIds=E;t.useActiveThreads=function(e){var t=E(e),r=b((0,u.useStateFromStores)([v.default],(function(){return a.default.partition(t,(function(e){return v.default.hasJoined(e)}))}),[t],u.statesWillNeverBeEqual),2),n=r[0],l=r[1];return{joinedThreadIds:n,
unjoinedThreadIds:l}};t.useArchivedThreads=function(e,t,r){var f=(0,u.useStateFromStoresObject)([p.default],(function(){return{loading:p.default.isLoading(e.id,t,r),canLoadMore:p.default.canLoadMore,nextOffset:p.default.nextOffset}})),s=f.canLoadMore,d=f.loading,c=f.nextOffset,v=n.useCallback((function(){i.default.can(y.Permissions.READ_MESSAGE_HISTORY,e)&&h.default.loadArchivedThreads(e.guild_id,e.id,t,r,c)}),[e,t,r,c]),m=b(n.useState(!0),2),g=m[0],S=m[1];n.useEffect((function(){S(!1);v()}),[e.id,t,r]);n.useEffect((function(){l.default.resort(e.id)}),[e.id]);return{threadIds:(0,u.useStateFromStoresArray)([p.default,o.default,i.default],(function(){return(0,a.default)(p.default.getThreads(e.id,t,r)).filter((function(e){var t=o.default.getChannel(e);return null!=t&&i.default.can(y.Permissions.VIEW_CHANNEL,t)})).value()})),canLoadMore:s,loading:d||g,loadMore:v}};t.useTrackThreadBrowserTab=function(){n.useEffect((function(){(0,m.trackThreadBrowserTab)()}),[])};var n=function(e,t){
if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),a=g(r(496486)),u=r(536211),l=g(r(649563)),o=g(r(644263)),i=g(r(689389)),f=g(r(191391)),s=r(71246),d=g(r(71636)),c=g(r(782270)),p=g(r(612548)),v=g(r(730451)),h=g(r(887174)),m=r(566142),y=r(478036);function g(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return
;var n,a,u=[],l=!0,o=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){o=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(o)throw a}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e){var t=(0,u.useStateFromStoresArray)([i.default,c.default,o.default],(function(){return(0,a.default)(c.default.getThreadsForGuild(e.guild_id)).values().map((function(e){var t=e.id
;return o.default.getChannel(t)})).filter(s.isNotNullish).filter((function(t){return!0===window._THREAD_BROWSER_ALL_CHANNELS||t.parent_id===e.id})).filter((function(e){return i.default.can(y.Permissions.VIEW_CHANNEL,e)})).map((function(e){return e.id})).value()}),[]);return n.useMemo((function(){return(0,a.default)(t).sort((function(e,t){return d.default.compare(f.default.lastMessageId(e),f.default.lastMessageId(t))})).reverse().value()}),[t])}},789317:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=v;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),u=d(r(294184)),l=d(r(521358)),o=d(r(895377)),i=d(r(903086)),f=d(r(247001)),s=d(r(610687));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function p(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e){var t=e.channel,r=e.threadIds,n=e.startThread,d=e.gotoThread,c=a.useCallback((function(e){return p(i.default,{threadId:r[e.row],gotoThread:d},e.section+"-"+e.row)}),[r,d]);return 0===r.length?p(o.default,{channel:t,header:f.default.Messages.THREAD_BROWSER_EMPTY_STATE_HEADER,
startThread:n}):p(l.default,{className:(0,u.default)(s.default.list,s.default.activeThreadsList),fade:!0,sections:[r.length],sectionHeight:0,rowHeight:80,renderRow:c,renderSection:function(){return null},chunkSize:20})}v.displayName="SearchThreadsTab"},39447:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=k;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),u=w(r(294184)),l=r(536211),o=w(r(118915)),i=w(r(636602)),f=r(391869),s=w(r(689389)),d=w(r(956117)),c=w(r(16941)),p=w(r(665759)),v=w(r(259530)),h=w(r(830759)),m=w(r(971639)),y=w(r(887174)),g=r(819235),S=r(566142),b=w(r(789317)),_=w(r(911163)),E=r(64072),T=r(770348),M=w(r(247001)),O=w(r(386545));function w(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function R(e,t,r,n,a,u,l){try{var o=e[u](l),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,u=[],l=!0,o=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){o=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(o)throw a}}return u
}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,
ref:null,props:t,_owner:null}}var C=j(v.default,{});function k(e){var t,r,n,p,v,w,A,P,k,D,H,W,x,B,F,L,z=e.channel,$=e.className,Y=e.onClose,Z=(0,l.useStateFromStores)([s.default],(function(){return s.default.can(T.Permissions.READ_MESSAGE_HISTORY,z)})),G=(0,g.useCanStartThread)(z),U=function(){Y();y.default.openThreadSidebarForCreating(z,void 0,"Thread Browser Empty State")},V=a.useCallback((function(e,t){Y();t?y.default.openThreadSidebarForViewing(e):(0,f.transitionToThread)(e,E.OpenThreadAnalyticsLocations.BROWSER)}),[Y]),q=(t=z.guild_id,r=z.id,n=N(a.useState(""),2),p=n[0],v=n[1],w=N(a.useState(!1),2),A=w[0],P=w[1],k=N(a.useState(!1),2),D=k[0],H=k[1],W=N(a.useState([]),2),x=W[0],B=W[1],F=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n,a,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=p&&""!==p){e.next=2;break}return e.abrupt("return");case 2:if(!A){e.next=4;break}return e.abrupt("return");case 4:P(!0);e.prev=5;e.next=8
;return o.default.get({url:T.Endpoints.THREAD_SEARCH(r),query:{name:p}});case 8:n=e.sent;a=n.body;u=a.threads;l=a.members;i.default.dispatch({type:T.ActionTypes.LOAD_THREADS_SUCCESS,threads:u,members:l,guildId:t});H(!0);B(u.map((function(e){return e.id})));case 15:e.prev=15;P(!1);return e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,,15,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function l(e){R(u,n,a,l,o,"next",e)}function o(e){R(u,n,a,l,o,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),L=function(e){v(e);0===e.length&&H(!1)},{query:p,setQuery:L,isLoading:A,hasResults:D,submit:F,results:x});a.useEffect((function(){(0,S.trackThreadBrowserTab)()}),[]);return j("div",{className:(0,u.default)($,O.default.container)},void 0,j("div",{className:O.default.header},void 0,j(h.default,{className:O.default.threadIcon}),j(m.default,{size:m.default.Sizes.SIZE_16,className:O.default.title
},void 0,M.default.Messages.THREAD_BROWSER_TITLE),Z?a.createElement(a.Fragment,null,j("div",{className:O.default.divider}),a.createElement(I,q)):null,j("div",{className:O.default.spacer}),G?j(d.default,{size:d.default.Sizes.MIN,className:O.default.createButton,onClick:function(){Y();y.default.openThreadSidebarForCreating(z,void 0,"Thread Browser Toolbar")}},void 0,M.default.Messages.CREATE):null,j(c.default,{className:O.default.closeIcon,onClick:Y,"aria-label":M.default.Messages.CLOSE},void 0,C)),q.hasResults?j(b.default,{channel:z,startThread:U,gotoThread:V,threadIds:q.results}):j(_.default,{channel:z,startThread:U,gotoThread:V}))}k.displayName="ThreadBrowser";function I(e){var t=e.query,r=e.setQuery,n=e.submit,a=e.isLoading;return j(p.default,{autoFocus:!0,className:O.default.searchBox,query:t,isLoading:a,onChange:function(e){return r(e)},onClear:function(){return r("")},onKeyDown:function(e){return"Enter"===e.key&&n()}})}I.displayName="SearchBox"},895377:(e,t,r)=>{
Object.defineProperty(t,"__esModule",{value:!0});t.default=m;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n)}(r(667294));var n,a=c(r(956117)),u=c(r(571830)),l=c(r(830759)),o=c(r(971639)),i=c(r(776360)),f=r(819235),s=c(r(247001)),d=c(r(170471));function c(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),
1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var h=v(l.default,{width:36,height:36});function m(e){var t=e.channel,r=e.header,n=e.startThread,l=(0,f.useCanStartPublicThread)(t),c=(0,f.useCanStartPrivateThread)(t);return v("div",{className:d.default.container},void 0,v("div",{className:d.default.iconContainer},void 0,v("div",{className:d.default.icon},void 0,h),v(u.default,{className:d.default.stars})),v(o.default,{className:d.default.header,size:o.default.Sizes.SIZE_24},void 0,r),v(i.default,{color:i.default.Colors.HEADER_SECONDARY,size:i.default.Sizes.SIZE_16},void 0,s.default.Messages.THREAD_BROWSER_EMPTY_STATE_SUBTEXT),l||c?v(a.default,{className:d.default.cta,onClick:n},void 0,s.default.Messages.CREATE_THREAD):null)}m.displayName="ThreadBrowserEmptyState"},903086:(e,t,r)=>{
Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(536211),l=r(378158),o=y(r(644263)),i=y(r(737483)),f=y(r(728429)),s=y(r(16941)),d=y(r(971639)),c=y(r(152731)),p=y(r(864061)),v=y(r(330042)),h=r(64072),m=y(r(259869));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function S(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function b(){b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return b.apply(this,arguments)}function _(e,t,r,n,a,u,l){try{var o=e[u](l),i=o.value}catch(e){r(e);return}o.done?t(i):Promise.resolve(i).then(n,a)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function l(e){_(u,n,a,l,o,"next",e)}function o(e){_(u,n,a,l,o,"throw",e)}l(void 0)}))}}var T=a.memo((function(e){var t=e.threadId,n=e.gotoThread,i=e.showChannelName,f=(0,u.useStateFromStores)([o.default],(function(){
return o.default.getChannel(t)})),c=(0,u.useStateFromStores)([o.default],(function(){return o.default.getChannel(f.parent_id)}));return S(s.default,{className:m.default.container,onClick:function(e){return n(f,e.shiftKey)},onContextMenu:function(e){return(0,l.openContextMenuLazy)(e,E(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return Promise.all([r.e(40532),r.e(68219),r.e(29021)]).then(r.bind(r,818228));case 2:t=e.sent;n=t.default;return e.abrupt("return",(function(e){return a.createElement(n,b({},e,{channel:f}))}));case 5:case"end":return e.stop()}}),e)}))))}},void 0,S("div",{className:m.default.left},void 0,S(d.default,{className:m.default.threadNameLine,size:d.default.Sizes.SIZE_16},void 0,S("span",{className:m.default.threadName},void 0,f.name),i&&null!=c?S("span",{className:m.default.parentName},void 0,"#"+c.name):null),(0,v.default)(f)),S(M,{channel:f}))}));t.default=T;function M(e){
var t=e.channel,r=(0,u.useStateFromStores)([p.default],(function(){var e;return null!==(e=p.default.getMemberIdsPreview(t.id))&&void 0!==e?e:[]})),n=(0,u.useStateFromStores)([p.default],(function(){var e;return null!==(e=p.default.getMemberCount(t.id))&&void 0!==e?e:0})),l=(0,u.useStateFromStoresArray)([f.default],(function(){return r.map((function(e){return f.default.getUser(e)}))}));a.useEffect((function(){r.filter((function(e,t){return null==l[t]})).forEach((function(e){i.default.requestMember(t.guild_id,e)}))}),[]);return 0===r.length?null:S(c.default,{className:m.default.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:l,count:n,max:h.MAX_THREAD_MEMBERS_PREVIEW})}M.displayName="Facepile"},330042:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.RecentMessageSubtext=N;t.default=function(e){return e.isActiveThread()?w(A,{channel:e}):w(P,{channel:e})}
;var n,a=O(r(667294)),u=r(536211),l=O(r(538930)),o=r(982437),i=T(r(786661)),f=T(r(116518)),s=T(r(907932)),d=T(r(876874)),c=T(r(191391)),p=T(r(290629)),v=T(r(728429)),h=T(r(830759)),m=r(961365),y=T(r(776360)),g=T(r(71636)),S=T(r(979674)),b=r(566142),_=T(r(247001)),E=T(r(259869));function T(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}function w(e,t,r,a){
n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function A(e){var t=e.channel,r=(0,u.useStateFromStores)([S.default],(function(){return S.default.getMostRecentMessage(t.id)}));return null==r?w(R,{channel:t}):w(N,{channel:t,message:r})}function R(e){var t=e.channel,r=(0,u.useStateFromStores)([c.default],(function(){return c.default.lastMessageId(t.id)}));return w(y.default,{className:E.default.subtext,size:y.default.Sizes.SIZE_14,color:y.default.Colors.HEADER_SECONDARY},void 0,_.default.Messages.THREAD_BROWSER_NO_RECENT_MESSAGES,"  •  ",(0,b.getTimestampString)(g.default.extractTimestamp(r)))}R.displayName="NoRecentMessageSubtext"
;function N(e){var t,r=e.channel,n=e.message;(0,o.useSubscribeGuildMembers)(((t={})[r.guild_id]=[n.author.id],t));var i=(0,u.useStateFromStores)([v.default],(function(){var e;return null!==(e=v.default.getUser(n.author.id))&&void 0!==e?e:n.author})),d=(0,s.default)(n),c=d.nick,h=d.colorString,S=(0,u.useStateFromStores)([p.default],(function(){return p.default.isBlocked(n.author.id)})),_=a.useMemo((function(){var e=null!=n.content&&""!==n.content?(0,f.default)(n,{formatInline:!0}).content:null,t=(0,m.renderSingleLineMessage)(n,e,S,E.default.messageContent,E.default.messageContentIcon),r=t.contentPlaceholder,u=t.renderedContent,l=t.icon;return a.createElement(a.Fragment,null,null!=u?u:w("span",{},void 0,r),l)}),[n,S]);return w(y.default,{className:E.default.subtext,size:y.default.Sizes.SIZE_14,color:y.default.Colors.HEADER_SECONDARY},void 0,w(l.default,{className:E.default.avatar,user:i,size:l.Sizes.SIZE_16}),w("span",{className:E.default.authorName,style:{color:h}
},void 0,c,":")," ",_,"  •  ",(0,b.getTimestampString)(g.default.extractTimestamp(n.id)))}N.displayName="RecentMessageSubtext";function P(e){var t,r,n,f,s=e.channel,p=(0,u.useStateFromStores)([c.default],(function(){return c.default.lastMessageId(s.id)})),m=null==p?new Date(null!==(t=null===(r=s.threadMetadata)||void 0===r?void 0:r.archiveTimestamp)&&void 0!==t?t:Date.now()).getTime():g.default.extractTimestamp(p);(0,o.useSubscribeGuildMembers)(((n={})[s.guild_id]=[s.ownerId],n));var S=(0,u.useStateFromStores)([v.default],(function(){return v.default.getUser(s.ownerId)})),T=(0,u.useStateFromStores)([d.default],(function(){return d.default.getMember(s.guild_id,s.ownerId)})),M=null!==(f=(0,i.default)(s))&&void 0!==f?f:h.default;return w(y.default,{className:E.default.subtext,size:y.default.Sizes.SIZE_14,color:y.default.Colors.HEADER_SECONDARY},void 0,null==S?a.createElement(a.Fragment,null,w("div",{className:E.default.noAvatarIcon},void 0,w(M,{width:10,height:10
})),_.default.Messages.THREAD_BROWSER_LAST_ACTIVE_TIME.format({time:(0,b.getTimestampString)(m)})):a.createElement(a.Fragment,null,w(l.default,{className:E.default.avatar,user:S,size:l.Sizes.SIZE_16}),_.default.Messages.THREAD_BROWSER_STARTED_BY.format({authorHook:function(e,t){var r,n;return w("span",{className:E.default.startedByName,style:{color:null!==(r=null==T?void 0:T.colorString)&&void 0!==r?r:void 0}},t," ",null!==(n=null==T?void 0:T.nick)&&void 0!==n?n:S.username)}}),w("span",{className:E.default.bullet},void 0,"•"),_.default.Messages.THREAD_BROWSER_LAST_ACTIVE_TIME.format({time:(0,b.getTimestampString)(m)})))}P.displayName="ArchiveTimeSubtext"},911163:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=y;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(n,u,l):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=v(r(80828)),l=v(r(776360)),o=v(r(521358)),i=r(651510),f=v(r(895377)),s=v(r(903086)),d=r(64072),c=v(r(247001)),p=v(r(610687));function v(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function m(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var o=new Array(l),i=0;i<l;i++)o[i]=arguments[i+3];t.children=o}if(t&&u)for(var f in u)void 0===t[f]&&(t[f]=u[f]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function y(e){
var t=e.channel,r=e.startThread,n=e.gotoThread,l=(0,i.useActiveThreads)(t),v=l.joinedThreadIds,h=l.unjoinedThreadIds,y=(0,i.useArchivedThreads)(t,d.SortOrder.LastMessage,null),S=y.threadIds,b=y.canLoadMore,_=y.loading,E=y.loadMore,T=a.useRef(null);(0,i.useTrackThreadBrowserTab)();var M=a.useCallback((function(e){var t=0===e.section?v:1===e.section?h:S;return m(s.default,{threadId:t[e.row],gotoThread:n},e.section+"-"+e.row)}),[S,v,h,n]),O=a.useCallback((function(e){return 0===e.section?m(g,{text:c.default.Messages.THREAD_BROWSER_JOINED_HEADER.format({count:v.length})},e.section):1===e.section?m(g,{text:c.default.Messages.THREAD_BROWSER_OTHER_HEADER.format({count:h.length})},e.section):m(g,{text:c.default.Messages.THREAD_BROWSER_ARCHIVED_HEADER},e.section)}),[v.length,h.length]),w=a.useCallback((function(e){return 1===e&&v.length>0||2===e&&(v.length>0||h.length>0)?64:32}),[v.length,h.length]),A=a.useCallback((function(){var e,t=null===(e=T.current)||void 0===e?void 0:e.getScrollerState()
;if(null!=t){var r=t.scrollTop+t.offsetHeight;t.scrollHeight-r<200&&E()}}),[E]);return 0===v.length&&0===h.length&&0===S.length?m("div",{className:p.default.list},void 0,_?m(u.default,{className:p.default.spinner}):m(f.default,{channel:t,header:c.default.Messages.THREAD_BROWSER_EMPTY_STATE_HEADER,startThread:r})):a.createElement(o.default,{ref:T,className:p.default.list,fade:!0,sections:[v.length,h.length,S.length],sectionHeight:w,rowHeight:80,renderRow:M,renderSection:O,chunkSize:20,onScroll:b?A:void 0})}y.displayName="ThreadList";function g(e){var t=e.text;return m(l.default,{color:l.default.Colors.HEADER_SECONDARY,size:l.default.Sizes.SIZE_12,className:p.default.sectionHeader},void 0,t)}g.displayName="SectionHeader"}}]);
//# sourceMappingURL=8a6d7c2b2dd009fc70a2.js.map